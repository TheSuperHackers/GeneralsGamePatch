


;------------------------------------------------------------------------------
Object Infa_ChinaJetMIG

  ; *** ART Parameters ***
  SelectPortrait         = SNMig_L
  ButtonImage            = SNMig
  
  UpgradeCameo1 = Upgrade_ChinaAircraftArmor
  UpgradeCameo2 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    DefaultConditionState
      Model               = NVMIG
      HideSubObject       = BurnerFX01 BurnerFX02
      WeaponLaunchBone    = PRIMARY WeaponA
    End

    ConditionState        = JETEXHAUST
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState       = JETEXHAUST JETAFTERBURNER
      ShowSubObject      = BurnerFX01 BurnerFX02
      ParticleSysBone     = Exhaust01 JetExhaust
      ParticleSysBone     = Exhaust02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = REALLYDAMAGED
      Model               = NVMIG_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = RUBBLE
      Model               = NVMIG_D
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST
      Model               = NVMIG_D
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = REALLYDAMAGED JETEXHAUST JETAFTERBURNER
      Model               = NVMIG_D
      ShowSubObject       = BurnerFX01 BurnerFX02
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

    ConditionState        = RUBBLE JETEXHAUST JETAFTERBURNER
      ; @todo srj -- model missing
      ;Model              = NVMIG_D1B
      Model               = NVMIG_D
      ;HideSubObject is needed cause there're inherited from default condition state      
      HideSubObject       = None 
      ShowSubObject       = None
      ParticleSysBone     = Engine01 JetExhaust
      ParticleSysBone     = Engine02 JetExhaust
      ParticleSysBone     = Wingtip01 JetContrail
      ParticleSysBone     = Wingtip02 JetContrail
    End

  End

  ; ***DESIGN parameters ***
  DisplayName             = OBJECT:MIG
  EditorSorting           = VEHICLE
  Side                    = ChinaInfantryGeneral
  TransportSlotCount      = 0          ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange             = 200.0 
  ShroudClearingRange     = 300.0

  Prerequisites
    Object                = Infa_ChinaAirfield
  End

  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY     NapalmMissileWeapon
;    AutoChooseSources = PRIMARY     NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon            = PRIMARY     BlackNapalmMissileWeapon
;    AutoChooseSources = PRIMARY     NONE
  End

  ArmorSet
    Conditions           = None
    Armor                = AirplaneArmor
    DamageFX             = None
  End

  BuildCost               = 1200
  BuildTime               = 10   
  ExperienceValue         = 50 50 100 150   ;Experience point value at each level
  ExperienceRequired      = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 1  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet             = ChinaJetMIGCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect             = MigVoiceSelect
  VoiceMove               = MigVoiceMove
  VoiceAttack             = MigVoiceAttack
  VoiceAttackAir          = MigVoiceAttackAir
  VoiceGuard              = MigVoiceAirPatrol
  SoundAmbient            = MigAmbientLoop
  UnitSpecificSounds
    VoiceCreate           = MigVoiceCreate
    Afterburner           = RaptorAfterburner
    VoiceGarrison         = MigVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority          = UNIT
  KindOf                 = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK SELECTABLE VEHICLE SCORE AIRCRAFT
  Body                   = ActiveBody ModuleTag_02
    MaxHealth            = 160.0
    InitialHealth        = 160.0
  End

  Behavior                          = JetSlowDeathBehavior ModuleTag_03
    FXOnGroundDeath                 = FX_JetOnGroundDeath
    OCLOnGroundDeath                = OCL_MIGDeathFinalBlowUp
    DestructionDelay                = 99999999  ; destruction will happen when we
    RollRate                        = 0.2
    RollRateDelta                   = 100%      ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0.0
    FallHowFast                     = 110.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_MigDeathInitial
    OCLInitialDeath                 = OCL_MIGDeathInitial
    DelaySecondaryFromInitialDeath  = 500       ; in milliseconds
    FXSecondary                     = FX_JetDeathSecondary
    OCLSecondary                    = OCL_MIGDeathSecondary
    FXHitGround                     = FX_JetDeathHitGround
    OCLHitGround                    = OCL_MIGDeathHitGround
    DelayFinalBlowUpFromHitGround   = 200       ; in milliseconds
    FXFinalBlowUp                   = FX_JetDeathFinalBlowUp
    OCLFinalBlowUp                  = OCL_MIGDeathFinalBlowUp
  End

  Behavior = WeaponSetUpgrade ModuleTag_04
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 500.0
  End

  Behavior = JetAIUpdate ModuleTag_06
    OutOfAmmoDamagePerSecond  = 10%     ; amount of damage to take per SEC (not per frame) when out of ammo
                                        ; note that it's expressed as a percent of max health, not an absolute
    TakeoffDistForMaxLift     = 0%   ; larger numbers give more lift sooner when taking off
    TakeoffPause              = 500
    MinHeight                 = 5
    ReturnToBaseIdleTime      = 10000         ; if idle for this long, return to base, even if not out of ammo
  End

  Locomotor = SET_NORMAL MIGLocomotor
  Locomotor = SET_TAXIING BasicJetTaxiLocomotor


  Behavior = FlammableUpdate ModuleTag_08
    AflameDuration = 5000        ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500      ; this often.
  End

  Behavior                       = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_MIGDamageTransition
  End

  Behavior        = MaxHealthUpgrade ModuleTag_10
    TriggeredBy   = Upgrade_ChinaAircraftArmor
    AddMaxHealth  = 40.0
    ChangeType    = ADD_CURRENT_HEALTH_TOO   ;Choices are PRESERVE_RATIO, ADD_CURRENT_HEALTH_TOO, and SAME_CURRENTHEALTH
  End



  Geometry                 = Box
  GeometryIsSmall          = Yes
  GeometryMajorRadius      = 14.0
  GeometryMinorRadius      = 7.0
  GeometryHeight           = 5.0
  Shadow                   = SHADOW_VOLUME
  
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End




;------------------------------------------------------------------------------
Object Infa_ChinaJetCargoPlane

  ; *** ART Parameters ***
  Draw = W3DModelDraw ModuleTag_01
    DefaultConditionState
      Model           = NVCargoPln
      Animation       = NVCargoPln.NVCargoPln
      AnimationMode   = LOOP
      ParticleSysBone = Propeller01 JetBlackTrailThin
      ParticleSysBone = Propeller02 JetBlackTrailThin
      ParticleSysBone = Propeller03 JetBlackTrailThin
      ParticleSysBone = Propeller04 JetBlackTrailThin
      ParticleSysBone = WingTip01 JetContrailThin
      ParticleSysBone = WingTip02 JetContrailThin
    End
    ConditionState = DAMAGED
      Model           = NVCargoPln_D
      Animation       = NVCargoPln_D.NVCargoPln_D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Smoke01 JetFireLarge
      ParticleSysBone = Smoke03 JetFireLarge
      ParticleSysBone = Propeller01 JetBlackTrailThin
      ParticleSysBone = Propeller02 JetBlackTrailThin
      ParticleSysBone = Propeller03 JetBlackTrailThin
      ParticleSysBone = Propeller04 JetBlackTrailThin
      ParticleSysBone = Smoke01 JetSmokeLarge
      ParticleSysBone = Smoke03 JetSmokeLarge
      ParticleSysBone = WingTip01 JetContrailThin
      ParticleSysBone = WingTip02 JetContrailThin
    End
    ConditionState = REALLYDAMAGED
      Model           = NVCargoPln_D
      Animation       = NVCargoPln_D.NVCargoPln_D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Smoke01 JetFireLarge
      ParticleSysBone = Smoke03 JetFireLarge
      ParticleSysBone = Smoke04 JetFireLarge
      ParticleSysBone = Propeller03 JetBlackTrailThin
      ParticleSysBone = Propeller04 JetBlackTrailThin
      ParticleSysBone = Smoke01 JetSmokeLarge
      ParticleSysBone = Smoke03 JetSmokeLarge
      ParticleSysBone = Smoke04 JetSmokeLarge
      ParticleSysBone = WingTip01 JetContrailThin
      ParticleSysBone = WingTip02 JetContrailThin
    End
    ConditionState = RUBBLE
      Model           = NVCargoPln_D1
      ParticleSysBone = Smoke01 JetFireLarge
      ParticleSysBone = Smoke06 JetFireLarge
      ParticleSysBone = Smoke03 JetFireLarge
      ParticleSysBone = Smoke04 JetFireLarge
      ParticleSysBone = Smoke01 JetSmokeLarge
      ParticleSysBone = Smoke06 JetSmokeLarge
      ParticleSysBone = Smoke03 JetSmokeLarge
      ParticleSysBone = Smoke04 JetSmokeLarge
    End
    
    OkToChangeModelColor = Yes
      ParticlesAttachedToAnimatedBones = Yes 

  End

  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = NVCargoPln_A2
      Animation       = NVCargoPln_A2.NVCargoPln_A2
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    ConditionState = DOOR_1_OPENING
      Model           = NVCargoPln_A2
      Animation       = NVCargoPln_A2.NVCargoPln_A2
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    ConditionState = DOOR_1_CLOSING
      Model           = NVCargoPln_A2
      Animation       = NVCargoPln_A2.NVCargoPln_A2
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End
  End

  
  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:CargoPlane
  EditorSorting       = VEHICLE
  Side                = ChinaInfantryGeneral
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange         = 0.0 
  ArmorSet
    Conditions      = None
    Armor           = AirplaneArmor
    DamageFX        = None
  End
  CommandSet        = Command_ScriptedTransportDrops

  ; *** AUDIO Parameters ***
  SoundAmbient = C130AmbientLoop
  SoundAmbientRubble    = NoSound

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS CAN_ATTACK VEHICLE SCORE TRANSPORT AIRCRAFT FORCEATTACKABLE IGNORED_IN_GUI EMP_HARDENED
  Body = ActiveBody ModuleTag_03
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0
  End

  ExperienceValue     = 40 40 40 40  ; Experience point value at each level
 
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 500.0
  End

  Behavior = DeliverPayloadAIUpdate ModuleTag_05
    DoorDelay = 500
    MaxAttempts = 4
    DropOffset = X:0 Y:0 Z:-10
    DropDelay = 300 ;500 ; time in between each item dropped (if more than one)
    PutInContainer = AmericaParachute
    DeliveryDistance = 150
  End
  Locomotor = SET_NORMAL B52Locomotor

  Behavior = TransportContain ModuleTag_06
    Slots = 100                     ; hey, it's a BIG transport
    ScatterNearbyOnExit = No
    OrientLikeContainerOnExit = Yes
    KeepContainerVelocityOnExit = Yes
    ExitPitchRate = 30
    ExitBone = WeaponA01
    AllowInsideKindOf  = INFANTRY VEHICLE PROJECTILE DOZER PARACHUTABLE
    DoorOpenTime = 0                ; this prevents the Contain module from messing with the doors, since we want DeliverPayload to handle 'em
    NumberOfExitPaths = 0
    DestroyRidersWhoAreNotFreeToExit = Yes  ; 'destroy' as opposed to 'kill'
  End

  ;SCRIPTED SUPPORT: These special powers are triggered directly 
  ;from the transport without creating a transport. This is done 
  ;via new code support and CreateLocation USE_OWNER_OBJECT -- 
  ;which also prevents creating the payload transport.
  Behavior    = OCLSpecialPower ModuleTag_07
    SpecialPowerTemplate = SuperweaponDaisyCutter ;@@KRIS@@
    OCL                  = SUPERWEAPON_DaisyCutter
    CreateLocation       = USE_OWNER_OBJECT
    ScriptedSpecialPowerOnly = Yes
  End
  Behavior    = OCLSpecialPower ModuleTag_08
    SpecialPowerTemplate = Infa_SuperweaponInfantryParadrop
    UpgradeOCL           = SCIENCE_Paradrop3 Infa_SUPERWEAPON_Paradrop3
    UpgradeOCL           = SCIENCE_Paradrop2 Infa_SUPERWEAPON_Paradrop2
    OCL                  = Infa_SUPERWEAPON_Paradrop1
    CreateLocation       = USE_OWNER_OBJECT
    ScriptedSpecialPowerOnly = Yes
  End 
  Behavior    = OCLSpecialPower ModuleTag_09
    SpecialPowerTemplate = SuperweaponCarpetBomb
    OCL                  = SUPERWEAPON_CarpetBomb
    CreateLocation       = USE_OWNER_OBJECT
    ScriptedSpecialPowerOnly = Yes
  End 
  Behavior    = OCLSpecialPower ModuleTag_10
    SpecialPowerTemplate = SuperweaponClusterMines
    OCL                  = SUPERWEAPON_ClusterMines
    CreateLocation       = USE_OWNER_OBJECT
    ScriptedSpecialPowerOnly = Yes
  End 
  Behavior    = OCLSpecialPower ModuleTag_11
    SpecialPowerTemplate = SuperweaponEMPPulse
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = USE_OWNER_OBJECT
    ScriptedSpecialPowerOnly = Yes
  End 
    
  Behavior                          = JetSlowDeathBehavior ModuleTag_12
    DestructionDelay                = 2000 
    RollRate                        = 0.0
    RollRateDelta                   = 100%      ;each frame, rollrate = rollrate * rollrateDelta
    PitchRate                       = 0
    FallHowFast                     = 25.0%    ;Bigger is faster (can be over 100%,it's a fraction of gravity)
    FXInitialDeath                  = FX_JetBigDeathInitial
    OCLInitialDeath                 = OCL_AmericaJetCargoDeathStart
    DelaySecondaryFromInitialDeath  = 2000       ; in milliseconds     This guy won't hit the ground, so this time equals the above time
    OCLSecondary                    = OCL_AmericaJetCargoHulkDeath
    FXSecondary                     = FX_BigPlaneDeath
  End

;;;;;;;;  ClientUpdate         = AnimatedParticleSysBoneClientUpdate ModuleTag_13
;;;;;;;;  End

  Behavior = TransitionDamageFX ModuleTag_14
    DamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_JetBigDamageTransition
  End

  Geometry = Box
  GeometryIsSmall = No
  GeometryMajorRadius = 40.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 10.0
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End


































































































;------------------------------------------------------------------------------
Object Infa_ChinaInfantryBlackLotus

  ; *** ART Parameters ***
  SelectPortrait         = SNSprLotus_L
  ButtonImage            = SNSprLotus
  
  ;UpgradeCameo1 = NONE
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes
    
    ; --- idle
    DefaultConditionState
      Model             = NIHERO_SKN
      IdleAnimation     = NIHERO_SKL.NIHERO_STA 0 17
      IdleAnimation     = NIHERO_SKL.NIHero_IDA
      IdleAnimation     = NIHERO_SKL.NIHero_IDB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Stand
    End

    ConditionState      = REALLYDAMAGED
      IdleAnimation     = NIHERO_SKL.NIHERO_ISTA 0 30
      IdleAnimation     = NIHERO_SKL.NIHero_IIDA
      AnimationMode     = ONCE
      TransitionKey     = TRANS_StandInjured
    End

    TransitionState     = TRANS_Stand TRANS_StandInjured
      Animation         = NIHero_SKL.NIHero_ISTAHIT
      AnimationMode     = ONCE
    End

    ; --- moving
    ConditionState      = MOVING
      Animation         = NIHero_SKL.NIHero_RNA
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING

    ConditionState      = MOVING REALLYDAMAGED
      Animation         = NIHero_SKL.NIHero_IRNA
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

    ; --- packing states
    ConditionState      = UNPACKING
      ;Preparing to attack (unpacking gear)
      Animation         = NIHero_SKL.NIHero_ATA1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A

    ConditionState      = FIRING_A
      ;Processing attack (hacking)
      Animation         = NIHero_SKL.NIHero_ATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringA
    End

    ConditionState      = PACKING
      ;Completing attack (packing gear)
      Animation         = NIHero_SKL.NIHero_ATA3
      AnimationMode     = ONCE
    End
    AliasConditionState = FIRING_A PACKING 

    TransitionState     = TRANS_FiringA TRANS_FiringAInjured
      Animation         = NIHero_SKL.NIHero_IATAHIT
      AnimationMode     = ONCE
    End

    ; --- injured-packing states
    ConditionState      = UNPACKING REALLYDAMAGED
      ;Preparing to attack (unpacking gear)
      Animation         = NIHero_SKL.NIHero_IATA1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A REALLYDAMAGED

    ConditionState      = FIRING_A REALLYDAMAGED
      ;Processing attack (hacking)
      Animation         = NIHero_SKL.NIHero_IATA2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringAInjured
    End

    ConditionState      = PACKING REALLYDAMAGED
      ;Completing attack (packing gear)
      Animation         = NIHero_SKL.NIHero_IATA3
      AnimationMode     = ONCE
    End
    AliasConditionState = FIRING_A PACKING REALLYDAMAGED

    ; --- packing-dying states
; code doesn't really support this. Oh well.
;    ConditionState      = DYING RAISING_FLAG
;      Animation         = NIHero_SKL.NIHero_IDTA
;      Animation         = NIHero_SKL.NIHero_IDTB
;      AnimationMode     = ONCE
;    End
;    AliasConditionState = DYING RAISING_FLAG EXPLODED_FLAILING EXPLODED_BOUNCING

    ; --- normal-dying states
    ConditionState      = DYING
      Animation         = NIHero_SKL.NIHero_DTA
      Animation         = NIHero_SKL.NIHero_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NIHero_SKL.NIHero_ADTF1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NIHero_SKL.NIHero_ADTF2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NIHero_SKL.NIHero_ADTF3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ; --- cheering states
    ConditionState      = SPECIAL_CHEERING
      Animation         = NIHERO_SKL.NIHERO_CHA
      AnimationMode     = ONCE
    End

    ConditionState      = SPECIAL_CHEERING REALLYDAMAGED
      Animation         = NIHERO_SKL.NIHERO_ICHA
      AnimationMode     = ONCE
    End

    ; --- falling states
    ConditionState      = FREEFALL
      Animation         = NIHero_SKL.NIHero_PFL
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState      = PARACHUTING
      Animation         = NIHero_SKL.NIHero_PHG
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState     = TRANS_Falling TRANS_Chute
      Animation         = NIHero_SKL.NIHero_POP
      AnimationMode     = ONCE
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NIHero_SKL.NIHero_PTD
      AnimationMode     = ONCE
    End

    TransitionState     = TRANS_Chute TRANS_StandInjured
      Animation         = NIHero_SKL.NIHero_PTD
      AnimationMode     = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:BlackLotus
  Side                = ChinaInfantryGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions        = None 
    Weapon            = PRIMARY None
  End
  ArmorSet
    Conditions      = None
    Armor           = InfGen_HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HazMatHumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange         = 300
  ShroudClearingRange = 400
  Prerequisites
    Object = Infa_ChinaBarracks
    Object = Infa_ChinaPropagandaCenter
  End
  BuildCost             = 1500
  BuildTime             = 20.0          ;in seconds    
  MaxSimultaneousOfType = 1

  ExperienceValue       = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired    = 0 150 450 900  ;Experience points needed to gain each level
  IsTrainable           = Yes             ;Can gain experience
  CrushableLevel        = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet            = Infa_ChinaInfantryBlackLotusCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = BlackLotusVoiceSelect
  VoiceMove = BlackLotusVoiceMove
  VoiceAttack = NoSound
  VoiceGuard = BlackLotusVoiceMove
  VoiceFear = BlackLotusVoiceFear
  VoiceTaskComplete = BlackLotusVoiceCaptureComplete
  SoundStealthOn = StealthOn
  SoundStealthOff = StealthOff
  
  UnitSpecificSounds
    VoiceCreate          = BlackLotusVoiceCreate
    VoiceGarrison = BlackLotusVoiceMove
    VoiceEnter = BlackLotusVoiceMove
    VoiceEnterHostile = BlackLotusVoiceMove
    VoiceStealCashComplete = BlackLotusVoiceCashComplete
    VoiceDisableVehicleComplete = BlackLotusVoiceDisableComplete
    VoiceCaptureBuildingComplete = BlackLotusVoiceCaptureComplete
    VoiceGetHealed      = BlackLotusVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE HERO CANNOT_RETALIATE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 200.0
    InitialHealth   = 200.0
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_03 ; allows use of command button hunt script with this unit. 
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = No
  End
  Locomotor = SET_NORMAL BlackLotusLocomotor
  Locomotor = SET_FREEFALL FreeFallLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End
  Behavior = StealthUpdate ModuleTag_07
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY
    HintDetectableConditions    = USING_ABILITY
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
    EnemyDetectionEvaEvent      = EnemyBlackLotusDetected
    OwnDetectionEvaEvent        = OwnBlackLotusDetected
  End

  Behavior = StealthDetectorUpdate ModuleTag_44
    DetectionRate   = 500   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange = ??? ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = SpecialAbility ModuleTag_08
    SpecialPowerTemplate = SpecialAbilityBlackLotusCaptureBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = BlackLotusVoiceHackBuilding
  End
  Behavior = SpecialAbilityUpdate ModuleTag_09
    SpecialPowerTemplate  = SpecialAbilityBlackLotusCaptureBuilding
    StartAbilityRange     = 150.0
    UnpackTime            = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime              = 2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime       = 4500 ;time to complete hack once prepared (unpacked)
    SpecialObject         = BinaryDataStream
    DoCaptureFX           = Yes
    PackSound             = BlackLotusPack
    UnpackSound           = BlackLotusUnpack
    TriggerSound          = BlackLotusTrigger
    PrepSoundLoop         = BlackLotusPrepLoop
    AwardXPForTriggering  = 20
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = SpecialAbility ModuleTag_10
    SpecialPowerTemplate      = SpecialAbilityBlackLotusDisableVehicleHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound           = BlackLotusVoiceHackVehicle
  End
  Behavior = SpecialAbilityUpdate ModuleTag_11
    SpecialPowerTemplate    = SpecialAbilityBlackLotusDisableVehicleHack
    StartAbilityRange       = 300.0
    UnpackTime              = 2000 ;6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime                = 1000 ;2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime         = 2000 ;time to complete hack once prepared (unpacked)
    EffectDuration          = 20000 ;duration vehicle is disabled  (30 seconds)
    DisableFXParticleSystem = DisabledEffectBinaryShower0
    SpecialObject           = BinaryDataStream
    PackSound               = BlackLotusPack
    UnpackSound             = BlackLotusUnpack
    TriggerSound            = BlackLotusTrigger
    PrepSoundLoop           = BlackLotusPrepLoop
    AwardXPForTriggering    = 0
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = SpecialAbility ModuleTag_12
    SpecialPowerTemplate      = SpecialAbilityBlackLotusStealCashHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound         = BlackLotusVoiceHackCash
  End
  Behavior = SpecialAbilityUpdate ModuleTag_13
    SpecialPowerTemplate  = SpecialAbilityBlackLotusStealCashHack
    StartAbilityRange     = 150.0
    UnpackTime            = 6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime              = 5800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime       = 6000 ;time to complete hack once prepared (unpacked)
    EffectValue           = 1500 ;amount of cash stolen
    SpecialObject         = BinaryDataStream
    PackSound             = BlackLotusPack
    UnpackSound           = BlackLotusUnpack
    TriggerSound          = BlackLotusTrigger
    PrepSoundLoop         = BlackLotusPrepLoop
    AwardXPForTriggering  = 20
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
 
  ;Hero units can't be squished!
  ;Behavior = SquishCollide ModuleTag_14
  ;  ;nothing
  ;End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_BlackLotusDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_BlackLotusDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireFemale
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End

  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinFemale
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_17
    PoisonDamageInterval  = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration        = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = VeterancyGainCreate ModuleTag_18
    StartingLevel = VETERAN
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End

;------------------------------------------------------------------------------
Object Infa_ChinaInfantryTankHunter

  ; *** ART Parameters ***
  SelectPortrait         = SNTankHunter_L
  ButtonImage            = SNTankHunter
  
  UpgradeCameo1 = UPGRADE:Fanaticism
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
  
  
    DefaultConditionState
      Model             = NIMSST_SKN
      IdleAnimation     = NIMSST_SKL.NIMSST_STA 0 30
      IdleAnimation     = NIMSST_SKL.NIMSST_IDA
      IdleAnimation     = NIMSST_SKL.NIMSST_IDB
      AnimationMode     = ONCE
      AnimationSpeedFactorRange = 0.8 1.2
      TransitionKey     = TRANS_Stand
      WeaponMuzzleFlash = PRIMARY MuzzleFX
      WeaponFireFXBone  = PRIMARY Muzzle
      WeaponLaunchBone  = PRIMARY Muzzle
      WeaponLaunchBone  = SECONDARY Muzzle
    End
    AliasConditionState = REALLYDAMAGED

    ConditionState      = FIRING_A 
      Animation         = NIMSST_SKL.NIMSST_ATA 
      AnimationMode     = ONCE
      TransitionKey     = TRANS_START_FIRING
    End
    AliasConditionState = REALLYDAMAGED FIRING_A
    
    ConditionState      = BETWEEN_FIRING_SHOTS_A
      Animation         = NIMSST_SKL.NIMSST_STA
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_START_FIRING
    End
    AliasConditionState = REALLYDAMAGED BETWEEN_FIRING_SHOTS_A

    ConditionState      = MOVING
      Animation         = NIMSST_SKL.NIMSST_RNA 20
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = REALLYDAMAGED MOVING
    AliasConditionState = MOVING ATTACKING
    AliasConditionState = MOVING ATTACKING REALLYDAMAGED

    ConditionState      = RELOADING_A
      Animation         = NIMSST_SKL.NIMSST_ATA 10
      AnimationMode     = ONCE
      ;WeaponLaunchBone = PRIMARY WeaponA
    End
    AliasConditionState = MOVING RELOADING_A
    AliasConditionState = REALLYDAMAGED MOVING RELOADING_A

    ConditionState      = DYING
      Animation         = NIMSST_SKL.NIMSST_DTA
      Animation         = NIMSST_SKL.NIMSST_DTB
      AnimationSpeedFactorRange = 0.9 1.25
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End
    AliasConditionState = DYING RUBBLE

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NIMSST_SKL.NIMSST_ADTD1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NIMSST_SKL.NIMSST_ADTD2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NIMSST_SKL.NIMSST_ADTD3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ;PARACHUTING ANIMATIONS
    ConditionState      = FREEFALL
      Animation         = NIMSST_SKL.NIMSST_POP
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING
    
    ConditionState      = PARACHUTING
      Animation         = NIMSST_SKL.NIMSST_PHG
      AnimationMode     = LOOP
      Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey     = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING
    
   ; TransitionState     = TRANS_Falling TRANS_Chute
   ;   Animation         = NIMSST_SKL.NIMSST_POP
   ;   AnimationMode     = ONCE
   ;   Flags             = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
   ; End
    
    TransitionState     = TRANS_Chute TRANS_Stand
      Animation         = NIMSST_SKL.NIMSST_PDN
      AnimationMode     = ONCE
    End

  End


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:TankHunter
  Side = ChinaInfantryGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY ChinaInfantryTankHunterMissileLauncher
  End
  ArmorSet
    Conditions      = None
    Armor           = InfGen_HumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 400
  Prerequisites
    Object = Infa_ChinaBarracks
  End
  BuildCost = 300
  BuildTime = 5.0          ;in seconds    

  ExperienceValue = 20 20 40 60    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaInfantryTankHunterCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = TankHunterVoiceSelect
  VoiceMove = TankHunterVoiceMove
  VoiceAttack = TankHunterVoiceAttack
  VoiceAttackAir = TankHunterVoiceAttack
  VoiceGuard = TankHunterVoiceMove
  VoiceFear = TankHunterVoiceFear
  UnitSpecificSounds
    VoiceCreate          = TankHunterVoiceCreate
    VoiceGarrison = TankHunterVoiceGarrison
    VoiceEnter = TankHunterVoiceMove
    VoiceEnterHostile = TankHunterVoiceMove
    VoiceGetHealed      = TankHunterVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = AIUpdateInterface ModuleTag_03
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL MissileDefenderLocomotor
  Behavior = HordeUpdate ModuleTag_04
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    RubOffRadius = 60    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 5.0
  End


  Behavior = SpecialAbility ModuleTag_07
    SpecialPowerTemplate = SpecialAbilityTankHunterTNTAttack
    UpdateModuleStartsAttack = Yes
    InitiateSound = TankHunterVoiceTNT
  End
  Behavior = SpecialAbilityUpdate ModuleTag_08
    SpecialPowerTemplate = SpecialAbilityTankHunterTNTAttack
    StartAbilityRange = 5.0
    PreparationTime = 0
    SpecialObject = TNTStickyBomb
    MaxSpecialObjects = 8
    SpecialObjectsPersistWhenOwnerDies = Yes ;Charges are removed instantly when owner dies (nobody can detonate).
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = Yes        ;This prevents multiple charges placed on the same object.
    FleeRangeAfterCompletion = 100.0         ;Runs away after finishing ability
  End

 
  Behavior = SquishCollide ModuleTag_09
    ;nothing
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_TankHunterDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_TankHunterDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_12
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  
  Behavior = VeterancyGainCreate ModuleTag_13
    StartingLevel = VETERAN
  End
 
  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End



;------------------------------------------------------------------------------
Object Infa_ChinaInfantryHacker

  ; *** ART Parameters ***
  SelectPortrait         = SNHacker2_L
  ButtonImage            = SNHacker2
  
  ;UpgradeCameo1 = NONE
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ;NORMAL STANDING
    DefaultConditionState
      Model = NIHCKR_SKN
      IdleAnimation = NIHCKR_SKL.NIHCKR_STA 0 25
      ;Regular spice animations
      IdleAnimation = NIHCKR_SKL.NIHCKR_IDA
      IdleAnimation = NIHCKR_SKL.NIHCKR_IDB
      AnimationMode = ONCE
      WeaponFireFXBone = PRIMARY Bone_SatCom
      TransitionKey = TRANS_Stand
    End
    AliasConditionState = REALLYDAMAGED

    ConditionState = MOVING
      Animation = NIHCKR_SKL.NIHCKR_RNA 14
      AnimationMode = LOOP
      Flags = RANDOMSTART
      TransitionKey = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING UNPACKING
    AliasConditionState = MOVING UNPACKING REALLYDAMAGED

    ConditionState = UNPACKING
      Animation = NIHCKR_SKL.NIHCKR_ATB1
      AnimationMode = ONCE
    End
    AliasConditionState = UNPACKING FIRING_A
    AliasConditionState = UNPACKING REALLYDAMAGED
    AliasConditionState = UNPACKING FIRING_A REALLYDAMAGED

    ;HACKING ATTACK
    ConditionState = FIRING_A
      Animation = NIHCKR_SKL.NIHCKR_ATB2
      AnimationMode = LOOP
      TransitionKey = TRANS_FiringA
    End
    AliasConditionState = FIRING_A REALLYDAMAGED

    ConditionState = PACKING
      Animation = NIHCKR_SKL.NIHCKR_ATB3
      AnimationMode = ONCE
    End
    AliasConditionState = PACKING FIRING_A
    AliasConditionState = PACKING REALLYDAMAGED
    AliasConditionState = PACKING FIRING_A REALLYDAMAGED



    TransitionState = TRANS_FiringA TRANS_Stand ; I was stopped by a stop command, so I get no proper PACKING state
      Animation = NIHCKR_SKL.NIHCKR_ATB3
      AnimationMode = ONCE
    End


    ConditionState = FREEFALL
      Animation = NIHCKR_SKL.NIHCKR_PFL
      AnimationMode = LOOP
      TransitionKey = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState = PARACHUTING
      Animation = NIHCKR_SKL.NIHCKR_PHG
      AnimationMode = LOOP
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING


    ConditionState = DYING
      Animation = NIHCKR_SKL.NIHCKR_DTA
      Animation = NIHCKR_SKL.NIHCKR_DTB
      AnimationMode = ONCE
      TransitionKey = TRANS_Dying
    End

    TransitionState = TRANS_Dying TRANS_Flailing
      Animation = NIHCKR_SKL.NIHCKR_ADTG1
      AnimationMode = ONCE
    End

    ConditionState = DYING EXPLODED_FLAILING
      Animation = NIHCKR_SKL.NIHCKR_ADTG2
      AnimationMode = LOOP
      TransitionKey = TRANS_Flailing
    End

    ConditionState = DYING EXPLODED_BOUNCING
      Animation = NIHCKR_SKL.NIHCKR_ADTG3
      AnimationMode = ONCE
      TransitionKey = None
    End

    ConditionState = SPECIAL_CHEERING
      Animation = NIHCKR_SKL.NIHCKR_CHA
      AnimationMode = LOOP
    End

    TransitionState = TRANS_Falling TRANS_Chute
      Animation = NIHCKR_SKL.NIHCKR_POP
      AnimationMode = ONCE
      Flags = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState = TRANS_Chute TRANS_Stand
      Animation = NIHCKR_SKL.NIHCKR_PTD
      AnimationMode = ONCE
    End

  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Hacker
  Side = ChinaInfantryGeneral
  EditorSorting = INFANTRY
  TransportSlotCount = 1                 ;how many "slots" we take in a transport (0 == not transportable)

  ArmorSet
    Conditions      = None
    Armor           = InfGen_HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HazMatHumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 150
  ShroudClearingRange = 300
  Prerequisites
    Object = Infa_ChinaBarracks
    Object = Infa_ChinaPropagandaCenter
  End
  BuildCost = 625
  BuildTime = 20.0          ;in seconds    
  ExperienceValue = 50 100 150 400    ;Experience point value at each level
  ExperienceRequired = 0 100 300 500  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience

  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Infa_ChinaInfantryHackerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = SuperHackerVoiceSelect
  VoiceMove = HackerVoiceMove
  VoiceAttack = NoSound
  VoiceGuard = HackerVoiceMove
  VoiceFear = HackerVoiceFear
  VoiceTaskComplete = HackerVoiceHackComplete
  UnitSpecificSounds
    VoiceGarrison = HackerVoiceGarrison
    VoiceCreate     = SuperHackerVoiceCreate
    UnitPack        = HackerPack
    UnitUnpack      = HackerUnpack
    UnitCashPing    = HackerCashPing
    VoiceEnter = HackerVoiceMove
    ;VoiceStealCashComplete = SuperHackerVoiceCashComplete
    VoiceDisableVehicleComplete = SuperHackerVoiceDisableComplete
    ;VoiceCaptureBuildingComplete = SuperHackerVoiceCaptureComplete
    VoiceEnterHostile = HackerVoiceMove
    VoiceGetHealed      = HackerVoiceMove
    VoiceHackInternet   = HackerVoiceModeInternet
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS INFANTRY SCORE IGNORES_SELECT_ALL MONEY_HACKER

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End


  Behavior = HackInternetAIUpdate ModuleTag_03
    UnpackTime          = 7300 ;animation time is 7300 (changing this will scale anim speed)
    PackTime            = 5133 ;animation time is 5133 (changing this will scale anim speed)
    CashUpdateDelay     = 2000
    CashUpdateDelayFast = 1600  ; Fast speed used inside a container (can only hack inside an Internet Center)
    RegularCashAmount   = 5
    VeteranCashAmount   = 6
    EliteCashAmount     = 8
    HeroicCashAmount    = 10
    XpPerCashUpdate     = 1
    PackUnpackVariationFactor = 0.5 ;Adds + or - 20% to pack and unpack time randomly.
  End
  Locomotor = SET_NORMAL BasicHumanLocomotor
 
  Behavior = SpecialAbility ModuleTag_04
    SpecialPowerTemplate = SpecialAbilityHackerDisableBuilding
    UpdateModuleStartsAttack = Yes
    InitiateSound         = HackerVoiceHack
  End

  Behavior = SpecialAbilityUpdate ModuleTag_05
    SpecialPowerTemplate = SpecialAbilityHackerDisableBuilding
    StartAbilityRange = 150.0
    UnpackTime      = 7300 ;animation time is 7300 (changing this will scale anim speed)
    PackTime        = 5133 ;animation time is 5133 (changing this will scale anim speed)
    PreparationTime = 3000

    ;PersistentPrepTime = 500 ; old setting
    PersistentPrepTime = 333 ; NOTE! This drives how often the disable effect gets triggered
                             ; This is also how often a new particle system effect is spawned
    EffectDuration = 2000
    SpecialObject = BinaryDataStream
    DisableFXParticleSystem = DisabledEffectBinaryShower0
    PackSound       = HackerPack
    UnpackSound     = HackerUnpack
    PrepSoundLoop   = HackerPrepLoop
    AwardXPForTriggering  = 0    ;Careful, this is persistant so it's a DoT xp gain!
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End


  Behavior = PhysicsBehavior ModuleTag_06
    Mass = 5.0
  End

  Behavior = SquishCollide ModuleTag_08
    ;nothing
  End


; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_HackerDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_HackerDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinGLA
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_11
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End
   Behavior = SpecialAbility ModuleTag_12
    SpecialPowerTemplate      = SpecialAbilityBlackLotusDisableVehicleHack
    UpdateModuleStartsAttack  = Yes
    InitiateSound           = SuperHackerVoiceHackVehicle
  End
  Behavior = SpecialAbilityUpdate ModuleTag_13
    SpecialPowerTemplate    = SpecialAbilityBlackLotusDisableVehicleHack
    StartAbilityRange       = 150.0
    UnpackTime              = 2000 ;6730 ;animation time is 6730 (changing this will scale anim speed)
    PackTime                = 1000 ;2800 ;animation time is 5800 (changing this will scale anim speed)
    PreparationTime         = 2000 ;time to complete hack once prepared (unpacked)
    EffectDuration          = 15000 ;duration vehicle is disabled  (30 seconds)
    DisableFXParticleSystem = DisabledEffectBinaryShower0
    SpecialObject           = BinaryDataStream
    PackSound               = BlackLotusPack
    UnpackSound             = BlackLotusUnpack
    TriggerSound            = BlackLotusTrigger
    PrepSoundLoop           = BlackLotusPrepLoop
    AwardXPForTriggering    = 0
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = StealthUpdate ModuleTag_14
    StealthDelay                = 2500 ; msec
    StealthForbiddenConditions  = USING_ABILITY
    HintDetectableConditions    = USING_ABILITY
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Behavior = VeterancyGainCreate ModuleTag_15
    StartingLevel = VETERAN
  End

  Geometry = CYLINDER
  GeometryMajorRadius = 10.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End




















































;------------------------------------------------------------------------------
;China Dragon Tank
Object Infa_ChinaTankDragon

  ; *** ART Parameters ***
  SelectPortrait         = SNDragonTank_L
  ButtonImage            = SNDragonTank
  
  UpgradeCameo1 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes

    DefaultConditionState
      Model = NVDragon
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState = REALLYDAMAGED
      Model = NVDragon_D
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    ConditionState = RUBBLE
      Model = NVDragon_D
      Turret = Turret
      TurretPitch = TURRETEL
      WeaponFireFXBone = PRIMARY WeaponA
      WeaponLaunchBone = PRIMARY WeaponA
      WeaponFireFXBone = SECONDARY WeaponA
      WeaponLaunchBone = SECONDARY WeaponA
    End
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Dragon
  Side = ChinaInfantryGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY DragonTankFlameWeapon
    Weapon = SECONDARY DragonTankFireWallWeapon
    AutoChooseSources = SECONDARY NONE
  End
  WeaponSet
    Conditions = PLAYER_UPGRADE 
    Weapon = PRIMARY DragonTankFlameWeaponUpgraded
    Weapon = SECONDARY DragonTankFireWallWeaponUpgraded
    AutoChooseSources = SECONDARY NONE
    WeaponLockSharedAcrossSets = Yes ; This set is so similar to the default set that it can hold the weapon lock
  End

  ArmorSet
    Conditions      = None
    Armor           = DragonTankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 900
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = Infa_ChinaWarFactory
  End

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaTankDragonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = DragonTankVoiceSelect
  VoiceMove = DragonTankVoiceMove
  VoiceGuard = DragonTankVoiceMove
  VoiceAttack = DragonTankVoiceAttack
  SoundMoveStart = DragonTankMoveStart
  SoundMoveStartDamaged = DragonTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = DragonTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    VoiceEnter = DragonTankVoiceMove
    VoiceFlameLocation = DragonTankVoiceFireStorm
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 280.0
    InitialHealth   = 280.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 560
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      TurretTurnRate = 120
      TurretPitchRate = 120
      AllowsPitch = Yes
      MinPhysicalPitch = -15

      TurretFireAngleSweep = PRIMARY 10
      TurretFireAngleSweep = SECONDARY 60
      TurretSweepSpeedModifier = PRIMARY 0.5    ; Sweep slower than you turn (aim for 30 for art)
      TurretSweepSpeedModifier = SECONDARY 2.0  ; Sweep faster than you turn
      ControlledWeaponSlots = PRIMARY SECONDARY
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor = SET_NORMAL DragonLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 50.0
  End


  Behavior = WeaponSetUpgrade ModuleTag_05
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
  End
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End


  ; just explode death
  Behavior = SlowDeathBehavior ModuleTag_10
    DeathTypes = ALL -CRUSHED -SPLATTED
;    ProbabilityModifier = 33
    DestructionDelay = 500
    DestructionDelayVariance = 500
    FX  = INITIAL  FX_BattleMasterExplosionOneFinal
    OCL = FINAL    OCL_DragonDebris
    FX  = FINAL    FX_DragonTankDeathExplosionFinal
  End
  
  ; Catch fire, and explode death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 33
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_CrusaderCatchFire
;    OCL = FINAL    OCL_DragonDebris  
;    FX  = FINAL    FX_GenericTankDeathExplosion 
;  End

  ; Napalm spills out, and explode death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 34
;    DestructionDelay = 2000
;    DestructionDelayVariance = 300
;    FX  = INITIAL  FX_DragonNapalmSpill
;    OCL = FINAL    OCL_DragonDebris  
;    FX  = FINAL    FX_DragonTankDeathExplosionFinal
;  End

  ; Turret fly off death
;  Behavior = SlowDeathBehavior
;    DeathTypes = ALL -CRUSHED -SPLATTED
;;    ProbabilityModifier = 25
;    DestructionDelay = 500
;    DestructionDelayVariance = 100
;    FX  = INITIAL  FX_GenericTankDeathEffect
;    OCL = MIDPOINT OCL_DragonDebris
;    FX  = FINAL    FX_GenericTankDeathExplosionFinal
;  End


  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_13
;   ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes Psys:SmokeSmallContinuous01
    ReallyDamagedParticleSystem2 = Bone:Smoke RandomBone:Yes Psys:DragonTransitionFire
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_DragonDamageTransition
  End

  Geometry = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 11.0   ; Height set to allow clear clipping of projectile stream  
  GeometryIsSmall = Yes
  Shadow = SHADOW_VOLUME    
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length

End







;------------------------------------------------------------------------------
Object Infa_ChinaVehicleInfernoCannon

  ; *** ART Parameters ***
  SelectPortrait         = SNInferno_L
  ButtonImage            = SNInferno
  
  UpgradeCameo1 = Upgrade_ChinaBlackNapalm
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw                    = W3DTankDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    ConditionState        = NONE
      Model               = NVInferno
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    
    ConditionState        = RUBBLE REALLYDAMAGED
      Model               = NVInferno_D
      Turret              = Turret
      TurretPitch         = TurretEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponRecoilBone    = PRIMARY Barrel
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponLaunchBone = PRIMARY Muzzle
    End
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName        = OBJECT:InfernoCannon
  Side               = ChinaInfantryGeneral
  EditorSorting      = VEHICLE
  TransportSlotCount = 3                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions       = None 
    Weapon           = PRIMARY InfernoCannonGun
  End
  WeaponSet
    Conditions       = PLAYER_UPGRADE 
    Weapon           = PRIMARY InfernoCannonGunUpgraded
  End
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost          = 1100
  BuildTime          = 15.0          ;in seconds    
  VisionRange        = 180
  ShroudClearingRange = 300
  Prerequisites
    Object           = Infa_ChinaWarFactory
    Object           = Infa_ChinaPropagandaCenter
  End

  ExperienceValue = 50 50 100 150    ;Experience point value at each level
  ExperienceRequired = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaVehicleInfernoCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect       = InfernoCannonVoiceSelect
  VoiceMove         = InfernoCannonVoiceMove
  VoiceGuard        = InfernoCannonVoiceMove
  VoiceAttack       = InfernoCannonVoiceAttack
  SoundMoveStart    = InfernoCannonMoveStart
  SoundMoveStartDamaged = InfernoCannonMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = InfernoCannonVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound
    VoiceCrush          = InfernoCannonVoiceCrush
    VoiceEnter         = InfernoCannonVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 240
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    Turret
      TurretTurnRate = 100
      TurretPitchRate = 100
      AllowsPitch = Yes
      FirePitch = 45
      ControlledWeaponSlots = PRIMARY
    End
    AutoAcquireEnemiesWhenIdle = No NotWhileAttacking
  End
  Locomotor = SET_NORMAL InfernoLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  ; A crushing defeat
  Behavior               = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX         = FX_CarCrush
  End
  Behavior               = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList    = OCL_CrusaderTank_CrushEffect
  End
  Behavior = SlowDeathBehavior ModuleTag_08
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 50
    DestructionDelay = 2000
    DestructionDelayVariance = 300
    FX  = INITIAL  FX_CrusaderCatchFire  
    FX  = FINAL    FX_GenericTankDeathExplosion 
    OCL = FINAL    OCL_InfernoCannonDeathEffect
  End

  Behavior                 = TransitionDamageFX ModuleTag_09
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:-7 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior         = CreateCrateDie ModuleTag_10
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior      = WeaponSetUpgrade ModuleTag_11
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = DestroyDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME 
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length   

End







;------------------------------------------------------------------------------
;Also called NukeCannon
Object Infa_ChinaVehicleNukeLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeCannon_L
  ButtonImage            = SNNukeCannon
  
  UpgradeCameo1 = Upgrade_ChinaNeutronShells
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DTankDraw ModuleTag_01
    
    InitialRecoilSpeed   = 120
    MaxRecoilDistance    = 8
    RecoilSettleSpeed    = 6

    OkToChangeModelColor = Yes

    ExtraPublicBone = Turret01

    DefaultConditionState
      Model                           = NVNukeCn
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponFireFXBone                = PRIMARY Muzzle
      WeaponRecoilBone                = PRIMARY Barrel
      WeaponLaunchBone                = SECONDARY Muzzle
      WeaponMuzzleFlash               = SECONDARY MuzzleFX
      WeaponFireFXBone                = SECONDARY Muzzle
      WeaponRecoilBone                = SECONDARY Barrel
      HideSubObject                   = TURRET01      ;Hide controlled turret
      ShowSubObject                   = TURRETFRONT TURRETBACK  ;Show pack/unpack animated turret
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End
      
    ConditionState                    = RUBBLE
      Model                           = NVNukeCn_D1
      WeaponLaunchBone                = PRIMARY Muzzle
      WeaponMuzzleFlash               = PRIMARY MuzzleFX
      WeaponRecoilBone                = PRIMARY Barrel
      WeaponLaunchBone                = SECONDARY Muzzle
      WeaponMuzzleFlash               = SECONDARY MuzzleFX
      WeaponRecoilBone                = SECONDARY Barrel
      HideSubObject                   = TURRET01      ;Hide controlled turret
      ShowSubObject                   = TURRETFRONT TURRETBACK  ;Show pack/unpack animated turret
      Turret                          = Turret01
      TurretPitch                     = TurretEL
    End

    ;*** PACKED STATE -- ready to move ***
    ConditionState    = MOVING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
    AliasConditionState = BETWEEN_FIRING_SHOTS_A
    ;***
    ConditionState    = REALLYDAMAGED MOVING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = REALLYDAMAGED MOVING BETWEEN_FIRING_SHOTS_A ;Very long shot delay -- possibly moving
     

    ;*** UNPACKING STATE  -- preparing to fire ***
    ConditionState    = UNPACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = MANUAL
    End
    AliasConditionState = UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED UNPACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED UNPACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay

    ;*** PACKING STATE -- preparing to move ***
    ConditionState    = PACKING
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = MANUAL
    End
    AliasConditionState = PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay
    ;***
    ConditionState    = REALLYDAMAGED PACKING
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = MANUAL
    End
    AliasConditionState = REALLYDAMAGED PACKING BETWEEN_FIRING_SHOTS_A ;Very long shot delay

    ;*** DEPLOYED STATE -- ready to fire ***
    ConditionState  = DEPLOYED 
      Animation       = NVNukeCn.NVNukeCn
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK   ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED FIRING_A
    AliasConditionState = DEPLOYED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED RELOADING_A
    AliasConditionState = DEPLOYED MOVING

    ConditionState  = DEPLOYED REALLYDAMAGED
      Model           = NVNukeCn_D
      Animation       = NVNukeCn_D.NVNukeCn_D
      AnimationMode   = ONCE
      Flags           = START_FRAME_LAST
      TransitionKey   = TRANS_FIRING_A
      HideSubObject   = TURRETFRONT TURRETBACK  ;Hide pack/unpack animated turret
      ShowSubObject   = TURRET01      ;Show controlled turret
    End
    AliasConditionState = DEPLOYED REALLYDAMAGED FIRING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED BETWEEN_FIRING_SHOTS_A
    AliasConditionState = DEPLOYED REALLYDAMAGED RELOADING_A
    AliasConditionState = DEPLOYED REALLYDAMAGED MOVING
    
    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:NukeLauncher
  Side = ChinaInfantryGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 10                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY NukeCannonGun
    Weapon = SECONDARY NukeCannonNeutronWeapon
    AutoChooseSources = PRIMARY FROM_PLAYER FROM_SCRIPT FROM_AI
    AutoChooseSources = SECONDARY FROM_SCRIPT FROM_AI
    ShareWeaponReloadTime = Yes
  End

  
  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1600
  BuildTime       = 20.0          ;in seconds    
  VisionRange     = 180
  ShroudClearingRange = 350
  Prerequisites
    Object = Infa_ChinaWarFactory
    Object = Infa_ChinaPropagandaCenter
    Science = SCIENCE_NukeLauncher
  End

  ExperienceValue = 50 100 200 400    ;Experience point value at each level
  ExperienceRequired = 0 400 600 1000  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = ChinaVehicleNukeCannonCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect           = NukeCannonVoiceSelect
  VoiceMove             = NukeCannonVoiceMove
  VoiceGuard            = NukeCannonVoiceMove
  VoiceAttack           = NukeCannonVoiceAttack
  SoundMoveStart        = NukeCannonMoveStart
  SoundMoveStartDamaged = NukeCannonMoveStart
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate         = NukeCannonVoiceCreate
    TurretMoveStart     = NoSound
    TurretMoveLoop      = NukeCannonTurretMoveLoop
    VoiceEnter          = NukeCannonVoiceMove
    Deploy              = NukeCannonDeploy
    Undeploy            = NukeCannonUnDeploy
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240.0
    InitialHealth   = 240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
    ScienceRequired = SCIENCE_ArtilleryTraining
  End

  Behavior = DeployStyleAIUpdate ModuleTag_04
    Turret
      TurretTurnRate        = 80
      TurretPitchRate       = 80
      FirePitch             = 0            ; Instead of aiming pitchwise at the target, it will aim here
      AllowsPitch           = Yes
      RecenterTime          = 5000         ; how long to wait during idle before recentering
      ControlledWeaponSlots = PRIMARY SECONDARY
      NaturalTurretAngle    = 0
      InitiallyDisabled     = Yes
    End
    AutoAcquireEnemiesWhenIdle = No
    PackTime = 3333
    UnpackTime = 3333
    TurretsFunctionOnlyWhenDeployed = Yes
    TurretsMustCenterBeforePacking = Yes
    ManualDeployAnimations = Yes
  End

  Locomotor = SET_NORMAL ChinaNukeCannonLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End

  Behavior = SlowDeathBehavior ModuleTag_06
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay  = 500
    DestructionDelayVariance  = 100
    FX  = INITIAL  FX_BattleMasterExplosionOneFinal
    OCL = INITIAL  OCL_RadiationFieldSmall
    OCL = MIDPOINT OCL_ChinaVehicleNukeCannonDie
    OCL = FINAL    OCL_RadiationFieldSmall
    FX  = FINAL    FX_ChinaVehicleNukeCannonDeathExplosion
  End
    
  ; A crushing defeat
  Behavior = FXListDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  Behavior = CreateObjectDie ModuleTag_08
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_CrusaderTank_CrushEffect
  End
  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior                 = TransitionDamageFX ModuleTag_10
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = ProductionUpdate ModuleTag_12
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End

  Geometry = BOX
  GeometryMajorRadius = 32.0
  GeometryMinorRadius = 10.0
  GeometryHeight = 17.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End





;------------------------------------------------------------------------------
Object Infa_ChinaTankGattling

  ; *** ART Parameters ***
  SelectPortrait         = SNGatlingTank_L
  ButtonImage            = SNGatlingTank
  
  ;UpgradeCameo1 = Upgrade_Nationalism
  UpgradeCameo1 = Upgrade_ChinaChainGuns
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw                      = W3DTankDraw ModuleTag_01
    OkToChangeModelColor    = Yes
    
    DefaultConditionState        
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = MANUAL
      Turret              = TURRET01
      TurretPitch         = TURRETEL01
      WeaponMuzzleFlash   = PRIMARY   MuzzleFX
      WeaponFireFXBone    = PRIMARY   Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
    End

    ConditionState        = REALLYDAMAGED RUBBLE         
      Model               = NVGattTank_D
    End


    ;-----pristine attacking----------------------
    ConditionState        = ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End

    ConditionState        = CONTINUOUS_FIRE_SLOW ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End

    ConditionState        = CONTINUOUS_FIRE_FAST ATTACKING
      Model               = NVGattTank
      Animation           = NVGattTank.NVGattTank
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End

    ;-----damaged attacking----------------------
    ConditionState  REALLYDAMAGED ATTACKING         
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  extemely sloowly
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End

    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End

    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING
      Model               = NVGattTank_D
      Animation           = NVGattTank_D.NVGattTank_D
      AnimationMode       = LOOP
      ParticleSysBone     = Muzzle01 GattlingMuzzleSmoke
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End




    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
    TreadDriveSpeedFraction = 0.3  ; fraction of locomotor speed below which treads stop moving.
    TreadPivotSpeedFraction = 0.6  ; fraction of locomotor speed below which we allow pivoting.
  End

  ; ***DESIGN parameters ***
  DisplayName               = OBJECT:GattlingTank
  Side                      = ChinaTankGeneral
  EditorSorting             = VEHICLE
  TransportSlotCount        = 3            ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions              = None 
    Weapon                  = PRIMARY   GattlingTankGun
    PreferredAgainst        = PRIMARY   AIRCRAFT
    Weapon                  = SECONDARY GattlingTankGunAir
  End

  ArmorSet
    Conditions    = None
    Armor         = AntiAirVehicle
    DamageFX      = TankDamageFX
  End
  BuildCost       = 800
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 360
  Prerequisites
    Object        = Infa_ChinaWarFactory
  End

  ExperienceValue = 50 50 100 150  ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = Tank_ChinaVehicleGattlingTankCommandSet


  ; *** AUDIO Parameters ***
  VoiceSelect     = GattlingTankVoiceSelect
  VoiceMove       = GattlingTankVoiceMove
  VoiceGuard      = GattlingTankVoiceMove
  VoiceAttack     = GattlingTankVoiceAttack
  SoundMoveStart  = GattlingTankMoveStart
  SoundMoveStartDamaged = GattlingTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = GattlingTankVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoopLoud
    VoiceCrush      = GattlingTankVoiceCrush
    VoiceEnter      = GattlingTankVoiceMove
    VoiceRapidFire  = GattlingTankVoiceRapid
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 180   // turn rate, in degrees per sec
      TurretPitchRate     = 180
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 45 ; this keeps it aimed half way between land and sky
                               ; since you never know from whence cometh danger
    End
    AutoAcquireEnemiesWhenIdle = Yes
    MoodAttackCheckRate        = 250
  End
  Locomotor       = SET_NORMAL GattlingTankLocomotor
  Behavior          = PhysicsBehavior ModuleTag_04
    Mass            = 40.0
  End

;  Behavior               = DestroyDie 
;    ;nothing
;  End
    
  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    ProbabilityModifier = 19
    DestructionDelay = 200
    DestructionDelayVariance = 100

    SinkRate = 0.5     ; in Dist/Sec

    OCL = FINAL    OCL_ChinaTankGattlingDebris
    FX  = FINAL    FX_GattlingExplosionOneFinal
  End

  Behavior = VeterancyGainCreate ModuleTag_23
    StartingLevel = VETERAN
  End


  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = WeaponBonusUpgrade ModuleTag_22
    TriggeredBy = Upgrade_ChinaChainGuns
  End

  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0

  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End


;------------------------------------------------------------------------------
;China Supply Truck
Object Infa_ChinaVehicleSupplyTruck

  ; *** ART Parameters ***
  
  SelectPortrait         = SNSupplyTruck_L
  ButtonImage            = SNSupplyTruck
  
  ;UpgradeCameo1 = NONE
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    DefaultConditionState
      Model           = NVSSUPPLYTK
      HideSubObject   = Cargo01
    End
    
    ConditionState    = REALLYDAMAGED
      Model           = NVSSUPPLYTK_D
    End
    
    ConditionState    = RUBBLE
      Model           = NVSSUPPLYTK_D
    End
    
    ConditionState    = CARRYING
      ShowSubObject   = Cargo01
    End
    
    ConditionState    = REALLYDAMAGED CARRYING
      Model           = NVSSUPPLYTK_D
      ShowSubObject   = Cargo01
    End
    
    ConditionState    = RUBBLE CARRYING
      Model           = NVSSUPPLYTK_D
      ShowSubObject   = Cargo01
    End
    
    TrackMarks              = EXTireTrack.tga

    LeftFrontTireBone           = Tire01
    RightFrontTireBone          = Tire02
    MidLeftRearTireBone         = Tire03
    MidRightRearTireBone        = Tire04
    LeftRearTireBone            = Tire05
    RightRearTireBone           = Tire06
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 2.5   ; This speed is added to the rotation speed when powersliding.

    Dust                    = RocketBuggyDust
    DirtSpray               = RocketBuggyDirtSpray
    PowerslideSpray         = RocketBuggyDirtPowerSlide

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SupplyTruck
  Side                = ChinaInfantryGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 2                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost           = 600
  BuildTime           = 10.0      ;in seconds
  VisionRange         = 150
  ShroudClearingRange = 300
  Prerequisites
    Object = Infa_ChinaSupplyCenter
  End

  ArmorSet
    Conditions      = None
    Armor           = TruckArmor
    DamageFX        = TankDamageFX
  End
  CrusherLevel            = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel          = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet              = ChinaSupplyTruckCommandSet
  ; *** AUDIO Parameters ***
  VoiceSelect             = SupplyTruckVoiceSelect
  VoiceMove               = SupplyTruckVoiceMove
  VoiceAttack             = NoSound
  SoundMoveStart          = SupplyTruckMoveStart
  SoundMoveStartDamaged = SupplyTruckMoveStart
  UnitSpecificSounds
    VoiceCreate           = SupplyTruckVoiceCreate
    TruckLandingSound     = NoSound
    TruckPowerslideSound  = NoSound
    VoiceSupply           = SupplyTruckVoiceSupply
    VoiceCrush            = SupplyTruckVoiceCrush
    VoiceEnter            = SupplyTruckVoiceMove

  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  ;@todo lorenzen removed the CAN_ATTACK from the chinasupplytruck... ok?
  KindOf = PRELOAD SELECTABLE CAN_CAST_REFLECTIONS VEHICLE HARVESTER SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = SupplyTruckAIUpdate ModuleTag_03
    MaxBoxes = 4
    SupplyCenterActionDelay = 400     ; ms for whole thing (one transaction)
    SupplyWarehouseActionDelay = 1000 ; ms per box (many small transactions)
    SupplyWarehouseScanDistance = 700 ;350 ; Max distance to look for a warehouse, or we go home.  (Direct dock command on warehouse overrides, and no max on Center Scan)
    SuppliesDepletedVoice = SupplyTruckVoiceSuppliesDepleted
  End
  Locomotor = SET_NORMAL SupplyTruckLocomotor
  Behavior = PhysicsBehavior ModuleTag_04
    Mass = 5.0
  End

  ExperienceValue    = 50 50 50 50 ;Experience point value at each level

  Behavior = SlowDeathBehavior ModuleTag_05
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 200
    DestructionDelayVariance = 100
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_ChinaSupplyTruckDeathEffect
  End
    
  Behavior = FXListDie ModuleTag_06
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End
  
  Behavior = CreateObjectDie ModuleTag_07
    DeathTypes = NONE +CRUSHED +SPLATTED
    CreationList = OCL_ChinaSupplyTruck_CrushEffect
  End

  Behavior                       = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = FlammableUpdate ModuleTag_10
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  ; A crushing defeat
  Behavior = DestroyDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior        = CreateCrateDie ModuleTag_12
    CrateData     = SalvageCrateData
  End

  Geometry = BOX
  GeometryMajorRadius = 17.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 14.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End



;------------------------------------------------------------------------------
;China Construction Dozer
Object Infa_ChinaVehicleDozer

  ; *** ART Parameters ***
  SelectPortrait         = SNDozer_L
  ButtonImage            = SNDozer
  
  ;UpgradeCameo1 = NONE
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw                      = W3DTankDraw ModuleTag_01

    OkToChangeModelColor    = Yes

    DefaultConditionState
      Model                 = NVCONSTDOZ_A
      ParticleSysBone       = EXHAUST01 DozerSmokeLight
    End
    ConditionState          = MOVING
      ParticleSysBone       = EXHAUST01 DozerSmokeHeavy
    End
    ConditionState = FIRING_A MOVING PREATTACK_A 
      Model = NVCONSTDOZ_A
      Animation = NVCONSTDOZ_A.NVCONSTDOZ_A
      AnimationMode = ONCE
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = DIRTFX01 DozerDirtFall
    End
    AliasConditionState = ATTACKING FIRING_A MOVING

    ConditionState          = REALLYDAMAGED RUBBLE
      Model                 = NVCONSTDOZ_AD
    End
    ConditionState          = MOVING REALLYDAMAGED RUBBLE
      Model                 = NVCONSTDOZ_AD
      ParticleSysBone       = EXHAUST01 DozerSmokeHeavy
    End
    ConditionState = FIRING_A MOVING PREATTACK_A REALLYDAMAGED RUBBLE
      Model = NVCONSTDOZ_AD
      Animation = NVCONSTDOZ_AD.NVCONSTDOZ_AD
      AnimationMode = ONCE
      ParticleSysBone = EXHAUST01 DozerSmokeHeavy
      ParticleSysBone = DIRTFX01 DozerDirtFall
    End
    AliasConditionState = ATTACKING FIRING_A MOVING REALLYDAMAGED RUBBLE
    
    TrackMarks           = EXTnkTrack.tga
    TreadAnimationRate      = 2.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Dozer
  Side                = ChinaInfantryGeneral
  EditorSorting       = VEHICLE
  TransportSlotCount  = 5                 ;how many "slots" we take in a transport (0 == not transportable)
  BuildCost           = 1000
  BuildTime           = 5.0 ;in seconds
  VisionRange         = 150
  ShroudClearingRange = 300

  WeaponSet
    Conditions = None 
    Weapon = PRIMARY None
  End
  WeaponSet
    Conditions = MINE_CLEARING_DETAIL 
    Weapon = PRIMARY DozerMineDisarmingWeapon
  End

  ArmorSet
    Conditions        = None
    Armor             = DozerArmor ;Special Explosion-Proof Armor
    DamageFX          = TankDamageFX
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet          = Infa_ChinaDozerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect         = DozerChinaVoiceSelect
  VoiceMove           = DozerChinaVoiceMove
  VoiceEnter          = DozerChinaVoiceMove
  VoiceTaskComplete   = DozerChinaVoiceBuildComplete
  SoundMoveStart      = DozerChinaMoveStart
  SoundMoveStartDamaged = DozerChinaMoveStart

  UnitSpecificSounds
    VoiceCreate       = DozerChinaVoiceCreate
    VoiceCrush        = DozerChinaVoiceCrush
    VoiceNoBuild      = DozerChinaVoiceBuildNot
    VoiceRepair       = DozerChinaVoiceRepair
    VoiceDisarm       = DozerChinaVoiceClearMine
    VoiceEnter        = DozerChinaVoiceMove
    VoiceBuildResponse = DozerChinaVoiceBuild
  End
 


  ; *** ENGINEERING Parameters ***
  RadarPriority       = UNIT
  KindOf              = PRELOAD VEHICLE SCORE SELECTABLE CAN_CAST_REFLECTIONS DOZER 
  
  Body                = ActiveBody ModuleTag_02
    MaxHealth         = 250.0
    InitialHealth     = 250.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = DozerAIUpdate ModuleTag_03
    RepairHealthPercentPerSecond = 2%    ; % of max health to repair each second
    BoredTime                    = 5000  ; in milliseconds
    BoredRange                   = 150   ; when bored, we look this far away to do something
    ; the only "enemies" that workers can acquire are mines, to be disarmed...
    AutoAcquireEnemiesWhenIdle   = Yes
  End
  Locomotor                    = SET_NORMAL ChinaVehicleDozerLocomotor
  Behavior            = PhysicsBehavior ModuleTag_04
    Mass              = 75.0
  End

  Behavior = StealthDetectorUpdate ModuleTag_05
    DetectionRate         = 500   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange       = ??? ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    ExtraRequiredKindOf   = MINE  ; we can only detect MINES, not other stealthed things
  End
  
  Behavior                 = TransitionDamageFX ModuleTag_06
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  
  ; Catch fire, and explode death
  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    ProbabilityModifier = 100
    DestructionDelay = 1500
    DestructionDelayVariance = 600
    FX  = INITIAL  FX_CrusaderCatchFire
    OCL = FINAL    OCL_ChinaDozerExplode  
    FX  = FINAL    FX_BattleMasterExplosionOneFinal
  End 

  Behavior = CreateCrateDie ModuleTag_09
    CrateData = SalvageCrateData
  End
    
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior               = FXListDie ModuleTag_22
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX         = FX_CarCrush
  End

  Behavior = DestroyDie ModuleTag_23
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Geometry            = BOX
  GeometryMajorRadius = 17.0;new radius to align mine sweeping position
  ;GeometryMajorRadius = 21.0;old radius
  GeometryMinorRadius = 10.0
  GeometryHeight      = 15.0     
  GeometryIsSmall     = NO
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End

;------------------------------------------------------------------------------
Object Infa_ChinaTankECM

  ; *** ART Parameters ***
  SelectPortrait         = SNbanshee_L
  ButtonImage            = SNbanshee
  
  Draw = W3DTankDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ExtraPublicBone = WEAPONA01

    DefaultConditionState
      Model                           = NVBANSHEE
      Turret                          = TURRET01
    End
    ConditionState                    = REALLYDAMAGED
      Model                           = NVBANSHEE_D
    End
    ConditionState                    = RUBBLE
      Model                           = NVBANSHEE_D1
      Turret                          = None
    End

    TrackMarks              = EXTnkTrack.tga
    TreadAnimationRate      = 4.0  ; amount of tread texture to move per second
  End

  ; ***DESIGN parameters ***
  DisplayName               = OBJECT:ECMTank
  Side                      = ChinaInfantryGeneral
  EditorSorting             = VEHICLE
  TransportSlotCount        = 3            ;how many "slots" we take in a transport (0 == not transportable)

  WeaponSet
    Conditions              = None 
    Weapon                  = PRIMARY   ECMTankVehicleDisabler
  End

  ArmorSet
    Conditions    = None
    Armor         = TankArmor
    DamageFX      = TankDamageFX
  End
  BuildCost       = 900
  BuildTime       = 10.0          ;in seconds    
  VisionRange     = 150
  ShroudClearingRange = 360
  Prerequisites
    Object        = Infa_ChinaWarFactory
    Object        = Infa_ChinaPropagandaCenter
  End

  ExperienceValue = 50 50 100 150  ;Experience point value at each level
  ExperienceRequired = 0 100 150 300  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet      = ChinaVehicleECMTankCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect     = FrequencyJammerVoiceSelect
  VoiceMove       = FrequencyJammerVoiceMove
  VoiceGuard      = FrequencyJammerVoiceMove
  VoiceAttack     = FrequencyJammerVoiceAttack
  SoundMoveStart  = MicrowaveTankMoveStart
  SoundMoveStartDamaged = MicrowaveTankMoveStart

  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = FrequencyJammerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop  = TurretMoveLoopLoud
    VoiceCrush      = NoSound
    VoiceEnter      = FrequencyJammerVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = UNIT
  KindOf            = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS VEHICLE SCORE CANNOT_RETALIATE
  
  Body              = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 600
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = AIUpdateInterface ModuleTag_03
    Turret
      ControlledWeaponSlots = PRIMARY
      TurretTurnRate        = 180   // turn rate, in degrees per sec
      FiresWhileTurning     = No
      MinIdleScanInterval   = 0    ; in milliseconds
      MaxIdleScanInterval   = 0    ; in milliseconds
      RecenterTime          = 0
      MinIdleScanAngle      = 180    ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 180    ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes
  End
  Locomotor       = SET_NORMAL GattlingTankLocomotor
  Behavior          = PhysicsBehavior ModuleTag_04
    Mass            = 40.0
  End

;  Behavior               = DestroyDie 
;    ;nothing
;  End
    
  ; Just explode death
  Behavior = SlowDeathBehavior ModuleTag_05
    ProbabilityModifier = 19
    DestructionDelay = 200
    DestructionDelayVariance = 100

    SinkRate = 0.5     ; in Dist/Sec

    OCL = FINAL    OCL_ChinaTankECMDebris
    FX  = FINAL    FX_GattlingExplosionOneFinal
  End

  Behavior = CreateCrateDie ModuleTag_06
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = TransitionDamageFX ModuleTag_07
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuous01
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_BattleMasterDamageTransition
  End
  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_22 ; allows use of command button hunt script with this unit. 
  End

  Behavior = FireWeaponUpdate ModuleTag_23
    Weapon = ECMTankMissileJammer
    ExclusiveWeaponDelay = 1000 ; If we fire a real weapon, we turn this module off for this long
  End
 
  Geometry            = BOX
  GeometryMajorRadius = 15.0
  GeometryMinorRadius = 10.0

  GeometryHeight      = 15.0     
  GeometryIsSmall     = Yes
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End






















































;------------------------------------------------------------------------------
Object Infa_ChinaCommandCenter

  ; *** ART Parameters ***
  
  ; ------------ the main building itself -----------------
  SelectPortrait         = SNComCentr_L
  ButtonImage            = SNComCentr
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; DAY ************************************
    DefaultConditionState
      Model              = NBConYardI
      Animation          = NBConYardI.NBConYardI
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED
      Model              = NBConYardI_D
      Animation          = NBConYardI_D.NBConYardI_D
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBConYardI_E
      Animation          = NBConYardI_E.NBConYardI_E
      AnimationMode      = LOOP
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Fire04 SmolderingFire
      ParticleSysBone    = Fire05 SmolderingFire
      ParticleSysBone    = Fire06 SmolderingFire
      ParticleSysBone    = Fire07 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End


    ;NIGHT ***********************************
    ConditionState       = NIGHT
      Model              = NBConYardI_N
      Animation          = NBConYardI_N.NBConYardI_N
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED NIGHT
      Model              = NBConYardI_DN
      Animation          = NBConYardI_DN.NBConYardI_DN
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = NBConYardI_EN
      Animation       = NBConYardI_EN.NBConYardI_EN
      AnimationMode   = LOOP
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
    End

    
    ;SNOW *************************************
    ConditionState       = SNOW
      Model              = NBConYardI_S
      Animation          = NBConYardI_S.NBConYardI_S
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED SNOW
      Model              = NBConYardI_DS
      Animation          = NBConYardI_DS.NBConYardI_DS
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = NBConYardI_ES
      Animation          = NBConYardI_ES.NBConYardI_ES
      AnimationMode      = LOOP
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Fire04 SmolderingFire
      ParticleSysBone    = Fire05 SmolderingFire
      ParticleSysBone    = Fire06 SmolderingFire
      ParticleSysBone    = Fire07 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End

    ;NIGHT SNOW *****************************
    ConditionState       = NIGHT SNOW
      Model              = NBConYardI_NS
      Animation          = NBConYardI_NS.NBConYardI_NS
      AnimationMode      = LOOP    
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBConYardI_DNS
      Animation          = NBConYardI_DNS.NBConYardI_DNS
      AnimationMode      = LOOP    
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = NBConYardI_ENS
      Animation       = NBConYardI_ENS.NBConYardI_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Fire01 SmolderingFire
      ParticleSysBone = Fire02 SmolderingFire
      ParticleSysBone = Fire03 SmolderingFire
      ParticleSysBone = Fire04 SmolderingFire
      ParticleSysBone = Fire05 SmolderingFire
      ParticleSysBone = Fire06 SmolderingFire
      ParticleSysBone = Fire07 SmolderingFire
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
    End   
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBConYardI
      Animation          = NBConYardI.NBConYardI
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBConYardI_D
      Animation          = NBConYardI_D.NBConYardI_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBConYardI_E
      Animation          = NBConYardI_E.NBConYardI_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBConYardI_N
      Animation          = NBConYardI_N.NBConYardI_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBConYardI_DN
      Animation          = NBConYardI_DN.NBConYardI_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBConYardI_EN
      Animation          = NBConYardI_EN.NBConYardI_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBConYardI_S
      Animation          = NBConYardI_S.NBConYardI_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBConYardI_DS
      Animation          = NBConYardI_DS.NBConYardI_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBConYardI_ES
      Animation          = NBConYardI_ES.NBConYardI_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBConYardI_NS
      Animation          = NBConYardI_NS.NBConYardI_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBConYardI_DNS
      Animation          = NBConYardI_DNS.NBConYardI_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBConYardI_ENS
      Animation          = NBConYardI_ENS.NBConYardI_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
  
  ; ------------ Radar Extending -----------------
  Draw                = W3DModelDraw ModuleTag_02

    DefaultConditionState
      Model             = None
    End
    AliasConditionState = DAMAGED
    AliasConditionState = REALLYDAMAGED RUBBLE
       
    ConditionState      = RADAR_EXTENDING RADAR_UPGRADED 
      Model             = NBConYard_A2
      Animation         = NBConYard_A2.NBConYard_A2
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    End
    
    ConditionState      = RADAR_EXTENDING DAMAGED RADAR_UPGRADED 
      Model             = NBConYard_A2D
      Animation         = NBConYard_A2D.NBConYard_A2D
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    End
    
    ConditionState      = RADAR_EXTENDING REALLYDAMAGED RUBBLE RADAR_UPGRADED 
      Model             = NBConYard_A2E
      Animation         = NBConYard_A2E.NBConYard_A2E
      AnimationMode     = ONCE
      Flags             = START_FRAME_FIRST
    End
    
    ConditionState      = RADAR_UPGRADED
      Model             = NBConYard_A2
      Animation         = NBConYard_A2.NBConYard_A2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
    End
    
    ConditionState      = RADAR_UPGRADED DAMAGED
      Model             = NBConYard_A2D
      Animation         = NBConYard_A2D.NBConYard_A2D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
    End
    
    ConditionState      = RADAR_UPGRADED REALLYDAMAGED RUBBLE
      Model             = NBConYard_A2E
      Animation         = NBConYard_A2E.NBConYard_A2E
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST
    End
    
    ConditionState      = RADAR_UPGRADED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model             = NBConYard_A2
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
       
    ConditionState      = RADAR_UPGRADED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED 
      Model             = NBConYard_A2D
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End   
    
    ConditionState      = RADAR_UPGRADED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE 
      Model             = NBConYard_A2E
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End   
    
  End
  PlacementViewAngle = -135

  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBConYard_A4
      Animation       = NBConYard_A4.NBConYard_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBConYard_A4N
      Animation       = NBConYard_A4N.NBConYard_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBConYard_A4S
      Animation       = NBConYard_A4S.NBConYard_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBConYard_A4SN
      Animation       = NBConYard_A4SN.NBConYard_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
      ParticleSysBone = Pit SmolderingFire
      ParticleSysBone = Pit01 SmolderingFire
      ParticleSysBone = Pit SmolderingSmoke
      ParticleSysBone = Pit01 SmolderingSmoke
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_04
    AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = SmokeM01 BuildUpSmokeChina
      ParticleSysBone = SmokeS02 BuildUpSmokeChina
      ParticleSysBone = SparksM01 BuildUpSmokeChina
      ParticleSysBone = SparksM02 BuildUpSmokeChina
      ParticleSysBone = SparksS01 BuildUpSmokeChina
      ParticleSysBone = SparksS02 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT

      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = SmokeM01 BuildUpSmokeChina
      ParticleSysBone = SmokeS02 BuildUpSmokeChina
      ParticleSysBone = SparksM01 BuildUpSmokeChina
      ParticleSysBone = SparksM02 BuildUpSmokeChina
      ParticleSysBone = SparksS01 BuildUpSmokeChina
      ParticleSysBone = SparksS02 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = SmokeM01 BuildUpSnowSmoke
      ParticleSysBone = SmokeS02 BuildUpSnowSmoke
      ParticleSysBone = SparksM01 BuildUpSnowSmoke
      ParticleSysBone = SparksM02 BuildUpSnowSmoke
      ParticleSysBone = SparksS01 BuildUpSnowSmoke
      ParticleSysBone = SparksS02 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = SmokeM01 BuildUpNightSnowSmoke
      ParticleSysBone = SmokeS02 BuildUpNightSnowSmoke
      ParticleSysBone = SparksM01 BuildUpNightSnowSmoke
      ParticleSysBone = SparksM02 BuildUpNightSnowSmoke
      ParticleSysBone = SparksS01 BuildUpNightSnowSmoke
      ParticleSysBone = SparksS02 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBConYard_A6
      Animation       = NBConYard_A6.NBConYard_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBConYard_A6N
      Animation       = NBConYard_A6N.NBConYard_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBConYard_A6S
      Animation       = NBConYard_A6S.NBConYard_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBConYard_A6SN
      Animation       = NBConYard_A6SN.NBConYard_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_05
    AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    
    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5
      Animation       = NBConYard_A5.NBConYard_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5N
      Animation       = NBConYard_A5N.NBConYard_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5S
      Animation       = NBConYard_A5S.NBConYard_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBConYard_A5SN
      Animation       = NBConYard_A5SN.NBConYard_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBConYard_AB
      Animation       = NBConYard_AB.NBConYard_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBConYard_ABN
      Animation       = NBConYard_ABN.NBConYard_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBConYard_ABS
      Animation       = NBConYard_ABS.NBConYard_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBConYard_ABSN
      Animation       = NBConYard_ABSN.NBConYard_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBConYard_AB
      Animation       = NBConYard_AB.NBConYard_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBConYard_ABN
      Animation       = NBConYard_ABN.NBConYard_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBConYard_ABS
      Animation       = NBConYard_ABS.NBConYard_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBConYard_ABSN
      Animation       = NBConYard_ABSN.NBConYard_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
    
; ----------------- the factory door -------------------
  Draw                = W3DModelDraw ModuleTag_06
    DefaultConditionState
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    
    ConditionState    = DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    
    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
    AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED
    
    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_CLOSING
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
      
    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED
    
    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBConYard_A7
      Animation       = NBConYard_A7.NBConYard_A7
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
     
    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED
     
    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = NBConYard_A7D
      Animation       = NBConYard_A7D.NBConYard_A7D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBConYard_A7
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBConYard_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBConYard_A7D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
  End
  
  ; Officers club flag
  Draw = W3DModelDraw ModuleTag_OfficersClub
    OkToChangeModelColor = No

    ConditionState       = NONE
      Model              = None
    End
    AliasConditionState  = DAMAGED
    AliasConditionState  = REALLYDAMAGED
    AliasConditionState  = RUBBLE
    AliasConditionState  = REALLYDAMAGED RUBBLE
    ConditionState       = PREORDER
      Model              = OCFlagCHA
      Animation          = OCFlagCHA.OCFlagCHA
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
;    ConditionState       = PREORDER DAMAGED
;      Model              = OCFlagCHA_D
;      Animation          = OCFlagCHA_D.OCFlagCHA_D
;      AnimationMode      = LOOP
;      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
;    End
;    ConditionState       = PREORDER REALLYDAMAGED
;      Model              = OCFlagCHA_E
;      Animation          = OCFlagCHA_E.OCFlagCHA_E
;      AnimationMode      = LOOP
;      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
;    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:CommandCenter
  Side              = ChinaInfantryGeneral
  EditorSorting     = STRUCTURE
  BuildCost         = 2000
  BuildTime         = 45.0           ; in seconds
  EnergyProduction  = 0  ;Command center should be free
  CommandSet        = Infa_ChinaCommandCenterCommandSet
  VisionRange       = 300.0           ; Shroud clearing distance
  ShroudClearingRange = 300
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect       = CommandCenterChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE COMMANDCENTER SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY

  Body              = StructureBody ModuleTag_07
    MaxHealth       = 5000.0
    InitialHealth   = 5000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 5200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = PreorderCreate ModuleTag_PreorderCreate
  End

  Behavior = ProductionUpdate ModuleTag_08
    NumDoorAnimations            = 1
    DoorOpeningTime              = 3000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 3000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_09
    UnitCreatePoint   = X:-18.0  Y: 40.0   Z:0.0
    NaturalRallyPoint = X: 60.0  Y: 40.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RadarUpdate ModuleTag_10
    RadarExtendTime   = 4000     ;in mSeconds
  End

  Behavior             = DestroyDie ModuleTag_11
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_12
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_13
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior         = RadarUpgrade ModuleTag_14
    TriggeredBy   = Upgrade_ChinaRadar
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_15
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior           = OCLSpecialPower ModuleTag_16
    SpecialPowerTemplate = SuperweaponNapalmStrike
    OCL                  = SUPERWEAPON_NapalmStrike
  End

  Behavior           = OCLSpecialPower ModuleTag_17
    SpecialPowerTemplate = SuperweaponArtilleryBarrage
    UpgradeOCL           = SCIENCE_ArtilleryBarrage3 SUPERWEAPON_ArtilleryBarrage3
    UpgradeOCL           = SCIENCE_ArtilleryBarrage2 SUPERWEAPON_ArtilleryBarrage2
    OCL                  = SUPERWEAPON_ArtilleryBarrage1
    CreateLocation       = CREATE_AT_EDGE_FARTHEST_FROM_TARGET
  End

  Behavior           = OCLSpecialPower ModuleTag_18
    SpecialPowerTemplate = SuperweaponClusterMines
    OCL                  = SUPERWEAPON_ClusterMines
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = OCLSpecialPower ModuleTag_19
    SpecialPowerTemplate = SuperweaponEMPPulse
    OCL                  = SUPERWEAPON_EMPPulse
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End

  Behavior           = CashHackSpecialPower ModuleTag_20
    SpecialPowerTemplate = SuperweaponCashHack
    UpgradeMoneyAmount   = SCIENCE_CashHack3 4000
    UpgradeMoneyAmount   = SCIENCE_CashHack2 2000
    MoneyAmount          = 1000  ; amount of money to steal
  End
  Behavior           = OCLSpecialPower ModuleTag_21
    SpecialPowerTemplate = SuperweaponEmergencyRepair
    UpgradeOCL           = SCIENCE_EmergencyRepair3 SUPERWEAPON_RepairVehicles3
    UpgradeOCL           = SCIENCE_EmergencyRepair2 SUPERWEAPON_RepairVehicles2
    OCL                  = SUPERWEAPON_RepairVehicles1
    CreateLocation       = CREATE_AT_LOCATION
  End
  Behavior           = OCLSpecialPower ModuleTag_22;this has been removed from everywhere but the ChinaAirfield in CHI05
    SpecialPowerTemplate = Early_SuperweaponChinaCarpetBomb
    OCL                  = SUPERWEAPON_ChinaCarpetBomb
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
  End 

  Behavior = FlammableUpdate ModuleTag_23
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_24
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaCommandCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Behavior           = OCLSpecialPower ModuleTag_27
    SpecialPowerTemplate = Infa_SuperweaponInfantryParadrop
    UpgradeOCL           = Infa_SCIENCE_InfantryParadrop3 Infa_SUPERWEAPON_Paradrop3
    UpgradeOCL           = Infa_SCIENCE_InfantryParadrop2 Infa_SUPERWEAPON_Paradrop2
    OCL                  = Infa_SUPERWEAPON_Paradrop1
    CreateLocation       = CREATE_AT_EDGE_NEAR_SOURCE
    OCLAdjustPositionToPassable = Yes ;Like RA2, shift target to passable cell so we don't land in water and on cliffs.
  End 

  Behavior = GrantUpgradeCreate ModuleTag_28
    UpgradeToGrant           = Upgrade_Nationalism
    ExemptStatus      = UNDER_CONSTRUCTION
  End

  Behavior           = OCLSpecialPower ModuleTag_29
    SpecialPowerTemplate = Early_SuperweaponFrenzy
    UpgradeOCL           = Early_SCIENCE_Frenzy3 SUPERWEAPON_Frenzy3
    UpgradeOCL           = Early_SCIENCE_Frenzy2 SUPERWEAPON_Frenzy2
    OCL                  = SUPERWEAPON_Frenzy1
    CreateLocation       = CREATE_AT_LOCATION
  End


  Geometry            = BOX
  FactoryExitWidth    = 25
  GeometryMajorRadius = 60.0
  GeometryMinorRadius = 63.0
  GeometryHeight      = 36.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End



;------------------------------------------------------------------------------

Object Infa_ChinaAirfield

  ; *** ART Parameters ***
  SelectPortrait         = SNAirfield_L
  ButtonImage            = SNAirfield
  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ExtraPublicBone = Runway1Parking1 
    ExtraPublicBone = Runway1Parking2 
    ExtraPublicBone = Runway2Parking1 
    ExtraPublicBone = Runway2Parking2 
    ExtraPublicBone = Runway1Park1Han
    ExtraPublicBone = Runway1Park2Han
    ExtraPublicBone = Runway2Park1Han
    ExtraPublicBone = Runway2Park2Han 
    ExtraPublicBone = Runway1Prep1 
    ExtraPublicBone = Runway1Prep2 
    ExtraPublicBone = Runway2Prep1 
    ExtraPublicBone = Runway2Prep2 
    ExtraPublicBone = RunwayStart1 
    ExtraPublicBone = RunwayStart2 
    ExtraPublicBone = RunwayEnd1 
    ExtraPublicBone = RunwayEnd2

    ExtraPublicBone = HeliPark01

; ------------- DAY ------------------    

    DefaultConditionState
      Model         = NBAirfield
      Animation     = NBAirfield.NBAirfield
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model         = NBAirfield_D
      Animation     = NBAirfield_D.NBAirfield_D
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = NBAirfield_E
      Animation     = NBAirfield_E.NBAirfield_E
      AnimationMode = LOOP
    End
    
; ------------- SNOW ------------------        
    ConditionState  = SNOW
      Model         = NBAirfield_S
      Animation     = NBAirfield_S.NBAirfield_S
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model         = NBAirfield_DS
      Animation     = NBAirfield_DS.NBAirfield_DS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model         = NBAirfield_ES
      Animation     = NBAirfield_ES.NBAirfield_ES
      AnimationMode = LOOP
    End
    
; ------------- NIGHT ------------------       

    ConditionState = NIGHT
      Model         = NBAirfield_N
      Animation     = NBAirfield_N.NBAirfield_N
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT
      Model         = NBAirfield_DN
      Animation     = NBAirfield_DN.NBAirfield_DN
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model         = NBAirfield_EN
      Animation     = NBAirfield_EN.NBAirfield_EN
      AnimationMode = LOOP
    End
    
; ------------- NIGHT SNOW------------------       
    
    ConditionState = NIGHT SNOW
      Model         = NBAirfield_NS
      Animation     = NBAirfield_NS.NBAirfield_NS
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model         = NBAirfield_DNS
      Animation     = NBAirfield_DNS.NBAirfield_DNS
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model         = NBAirfield_ENS
      Animation     = NBAirfield_ENS.NBAirfield_ENS
      AnimationMode = LOOP
    End
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield
      Animation          = NBAirfield.NBAirfield
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_D
      Animation          = NBAirfield_D.NBAirfield_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_E
      Animation          = NBAirfield_E.NBAirfield_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBAirfield_N
      Animation          = NBAirfield_N.NBAirfield_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBAirfield_DN
      Animation          = NBAirfield_DN.NBAirfield_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBAirfield_EN
      Animation          = NBAirfield_EN.NBAirfield_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBAirfield_S
      Animation          = NBAirfield_S.NBAirfield_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBAirfield_DS
      Animation          = NBAirfield_DS.NBAirfield_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBAirfield_ES
      Animation          = NBAirfield_ES.NBAirfield_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBAirfield_NS
      Animation          = NBAirfield_NS.NBAirfield_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBAirfield_DNS
      Animation          = NBAirfield_DNS.NBAirfield_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       =  PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBAirfield_ENS
      Animation          = NBAirfield_ENS.NBAirfield_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
    
  End
  
  
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = None
    End
  End

  ; ----------------- door #1 -------------------
  Draw                = W3DModelDraw ModuleTag_03
    DefaultConditionState
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DOOR_1_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_OPENING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_1_OPENING
    
    ConditionState    = DOOR_1_CLOSING
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_1_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_1_CLOSING
    
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBAirfield_A9
      Animation       = NBAirfield_A9.NBAirfield_A9
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_1_WAITING_OPEN
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield_A9
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_A9
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_A9
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************

    
  End

  ; ----------------- door #2 -------------------
; this one has no door #2... (srj)
;  Draw                = W3DModelDraw
;    DefaultConditionState
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_FIRST
;    End
;    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
;      Model           = NBAirfield_A10
;      Flags           = START_FRAME_FIRST ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
;    End
;    ConditionState    = DOOR_2_OPENING
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = ONCE
;      Flags           = START_FRAME_FIRST
;    End   
;    ConditionState    = DOOR_2_CLOSING
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = ONCE_BACKWARDS
;      Flags           = START_FRAME_LAST
;    End   
;    ConditionState    = DOOR_2_WAITING_OPEN
;      Model           = NBAirfield_A10
;      Animation       = NBAirfield_A10.NBAirfield_A10
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_LAST
;    End   
;  End
  
  ; ----------------- door #3 -------------------
  Draw                = W3DModelDraw ModuleTag_04
    DefaultConditionState
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE 
    
    
    
    ConditionState    = DOOR_3_OPENING
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_3_OPENING
    AliasConditionState = SNOW DOOR_3_OPENING
    AliasConditionState = SNOW NIGHT DOOR_3_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_3_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_3_OPENING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_3_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_OPENING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_3_OPENING
    
    ConditionState    = DOOR_3_CLOSING
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_3_CLOSING
    AliasConditionState = SNOW DOOR_3_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_3_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_3_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_3_CLOSING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_3_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_CLOSING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_3_CLOSING
      
    ConditionState    = DOOR_3_WAITING_OPEN
      Model           = NBAirfield_A10
      Animation       = NBAirfield_A10.NBAirfield_A10
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_3_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_3_WAITING_OPEN

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield_A10
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_A10
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_A10
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************    

    
  End

  ; ----------------- door #4 -------------------
  Draw                = W3DModelDraw ModuleTag_05
    DefaultConditionState
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE 
    
    ConditionState    = DOOR_4_OPENING
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_4_OPENING
    AliasConditionState = SNOW DOOR_4_OPENING
    AliasConditionState = SNOW NIGHT DOOR_4_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_4_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_4_OPENING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_4_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_OPENING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_OPENING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_4_OPENING
    
    ConditionState    = DOOR_4_CLOSING
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_4_CLOSING
    AliasConditionState = SNOW DOOR_4_CLOSING
    AliasConditionState = SNOW NIGHT DOOR_4_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_4_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_4_CLOSING
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_4_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_4_CLOSING
    
    ConditionState    = DOOR_4_WAITING_OPEN
      Model           = NBAirfield_A8
      Animation       = NBAirfield_A8.NBAirfield_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End 
    AliasConditionState = NIGHT DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW NIGHT DAMAGED DOOR_4_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE DOOR_4_WAITING_OPEN
    

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBAirfield_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBAirfield_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBAirfield_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************      
  End

 ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A4
      Animation       = NBAirfield_A4.NBAirfield_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = NBAirfield_A4N
      Animation       = NBAirfield_A4N.NBAirfield_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = NBAirfield_A4S
      Animation       = NBAirfield_A4S.NBAirfield_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED 
      Model           = NBAirfield_A4SN
      Animation       = NBAirfield_A4SN.NBAirfield_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBAirfield_A4
      Animation       = NBAirfield_A4.NBAirfield_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBAirfield_A4N
      Animation       = NBAirfield_A4N.NBAirfield_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBAirfield_A4S
      Animation       = NBAirfield_A4S.NBAirfield_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBAirfield_A4SN
      Animation       = NBAirfield_A4SN.NBAirfield_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBAirfield_A4
      Animation       = NBAirfield_A4.NBAirfield_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBAirfield_A4N
      Animation       = NBAirfield_A4N.NBAirfield_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBAirfield_A4S
      Animation       = NBAirfield_A4S.NBAirfield_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBAirfield_A4SN
      Animation       = NBAirfield_A4SN.NBAirfield_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6
      Animation       = NBAirfield_A6.NBAirfield_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6N
      Animation       = NBAirfield_A6N.NBAirfield_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6S
      Animation       = NBAirfield_A6S.NBAirfield_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBAirfield_A6SN
      Animation       = NBAirfield_A6SN.NBAirfield_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBAirfield_A6
      Animation       = NBAirfield_A6.NBAirfield_A6

      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBAirfield_A6N
      Animation       = NBAirfield_A6N.NBAirfield_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBAirfield_A6S
      Animation       = NBAirfield_A6S.NBAirfield_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBAirfield_A6SN
      Animation       = NBAirfield_A6SN.NBAirfield_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBAirfield_A6
      Animation       = NBAirfield_A6.NBAirfield_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBAirfield_A6N
      Animation       = NBAirfield_A6N.NBAirfield_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBAirfield_A6S
      Animation       = NBAirfield_A6S.NBAirfield_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBAirfield_A6SN
      Animation       = NBAirfield_A6SN.NBAirfield_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End


  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_08
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5
      Animation       = NBAirfield_A5.NBAirfield_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5N
      Animation       = NBAirfield_A5N.NBAirfield_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End

    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5S
      Animation       = NBAirfield_A5S.NBAirfield_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End

    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBAirfield_A5SN
      Animation       = NBAirfield_A5SN.NBAirfield_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBAirfield_AB
      Animation       = NBAirfield_AB.NBAirfield_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBAirfield_ABN
      Animation       = NBAirfield_ABN.NBAirfield_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBAirfield_ABS
      Animation       = NBAirfield_ABS.NBAirfield_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBAirfield_ABSN
      Animation       = NBAirfield_ABSN.NBAirfield_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBAirfield_AB
      Animation       = NBAirfield_AB.NBAirfield_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End

    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBAirfield_ABN
      Animation       = NBAirfield_ABN.NBAirfield_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBAirfield_ABS
      Animation       = NBAirfield_ABS.NBAirfield_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBAirfield_ABSN
      Animation       = NBAirfield_ABSN.NBAirfield_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Airfield
  Side             = ChinaInfantryGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Infa_ChinaSupplyCenter
  End
  BuildCost        = 1000
  BuildTime        = 30.0           ; in seconds
  EnergyProduction = -1
  CommandSet       = Infa_ChinaAirfieldCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 150 150 150 150  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = AirfieldChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE FS_AIRFIELD SCORE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY FS_FACTORY AUTO_RALLYPOINT
  Body            = StructureBody ModuleTag_09
    MaxHealth       = 1500.0
    InitialHealth   = 1500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = ParkingPlaceBehavior ModuleTag_10
    HealAmountPerSecond     = 10
    NumRows                 = 2
    NumCols                 = 2
    HasRunways              = Yes
    ApproachHeight          = 50
    ParkInHangars           = Yes
  End

  Behavior = ProductionUpdate ModuleTag_11
    NumDoorAnimations            = 4
    DoorOpeningTime              = 2000  ;in mSeconds
    DoorWaitOpenTime             = 3000  ;in mSeconds
    DoorCloseTime                = 2000  ;in mSeconds
    ConstructionCompleteDuration = 1000  ;in mSeconds
  End

  Behavior = DestroyDie ModuleTag_12
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_ABPowerPlantExplode
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_15
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_17
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaAirfieldCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 83.0
  GeometryMinorRadius = 76.0
  GeometryHeight      = 25.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End











;------------------------------------------------------------------------------
;China Neutron Missile, NukeSilo, Nuke Silo
Object Infa_ChinaNuclearMissileLauncher

  ; *** ART Parameters ***
  SelectPortrait         = SNNukeMisl_L
  ButtonImage            = SNNukeMisl
  SelectPortrait = SNNukeMisl_L
  ButtonImage            = SNNukeMisl
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    ConditionState      = NONE
      Model             = NBNMissle
    End
    ConditionState      = SOLD
      Model             = NONE
    End  
    ConditionState      = SOLD SNOW
      Model             = NONE

    End   
    ConditionState      = SOLD NIGHT
      Model             = NONE
    End    
    ConditionState      = SOLD NIGHT SNOW
      Model             = NONE
    End     
    
    
    ConditionState      = DAMAGED
      Model             = NBNMissle_D
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE
      Model             = NBNMissle_E
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End 
    ConditionState      = AWAITING_CONSTRUCTION
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model             = NBNMissle
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model             = NBNMissle_D
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED RUBBLE
      Model             = NBNMissle_E
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = DOOR_1_OPENING
      Model             = NBNMissle_A2
      Animation         = NBNMissle_A2.NBNMissle_A2
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN
      Model             = NBNMissle_A2
      Animation         = NBNMissle_A2.NBNMissle_A2
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE
      Model             = NBNMissle_A3
      Animation         = NBNMissle_A3.NBNMissle_A3
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING
      Model             = NBNMissle_A3
      Animation         = NBNMissle_A3.NBNMissle_A3
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED 
      Model             = NBNMissle_A2D
      Animation         = NBNMissle_A2D.NBNMissle_A2D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire

      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED 
      Model             = NBNMissle_A2D
      Animation         = NBNMissle_A2D.NBNMissle_A2D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED 
      Model             = NBNMissle_A3D
      Animation         = NBNMissle_A3D.NBNMissle_A3D
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED 
      Model             = NBNMissle_A3D
      Animation         = NBNMissle_A3D.NBNMissle_A3D
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A2E
      Animation         = NBNMissle_A2E.NBNMissle_A2E
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A2E
      Animation         = NBNMissle_A2E.NBNMissle_A2E
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A3E
      Animation         = NBNMissle_A3E.NBNMissle_A3E
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE 
      Model             = NBNMissle_A3E
      Animation         = NBNMissle_A3E.NBNMissle_A3E
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   

    ; night
    ConditionState      = NIGHT
      Model             = NBNMissle_N
    End
    ConditionState      = DAMAGED NIGHT
      Model             = NBNMissle_DN
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_EN
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End
    ConditionState      = AWAITING_CONSTRUCTION NIGHT
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model             = NBNMissle_N
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model             = NBNMissle_DN
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model             = NBNMissle_EN
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = DOOR_1_OPENING NIGHT
      Model             = NBNMissle_A2N
      Animation         = NBNMissle_A2N.NBNMissle_A2N
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN NIGHT
      Model             = NBNMissle_A2N
      Animation         = NBNMissle_A2N.NBNMissle_A2N
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE NIGHT
      Model             = NBNMissle_A3N
      Animation         = NBNMissle_A3N.NBNMissle_A3N
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING NIGHT
      Model             = NBNMissle_A3N
      Animation         = NBNMissle_A3N.NBNMissle_A3N
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED NIGHT
      Model             = NBNMissle_A2DN
      Animation         = NBNMissle_A2DN.NBNMissle_A2DN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED NIGHT
      Model             = NBNMissle_A2DN
      Animation         = NBNMissle_A2DN.NBNMissle_A2DN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED NIGHT
      Model             = NBNMissle_A3DN
      Animation         = NBNMissle_A3DN.NBNMissle_A3DN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED NIGHT
      Model             = NBNMissle_A3DN
      Animation         = NBNMissle_A3DN.NBNMissle_A3DN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A2EN
      Animation         = NBNMissle_A2EN.NBNMissle_A2EN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A2EN
      Animation         = NBNMissle_A2EN.NBNMissle_A2EN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A3EN
      Animation         = NBNMissle_A3EN.NBNMissle_A3EN
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE NIGHT
      Model             = NBNMissle_A3EN
      Animation         = NBNMissle_A3EN.NBNMissle_A3EN
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    
    ;-------------- SNOW! --------------------
    
        ConditionState      = SNOW
      Model             = NBNMissle_S
    End
    
    ConditionState      = DAMAGED SNOW
      Model             = NBNMissle_DS
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_ES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End 
    ConditionState      = AWAITING_CONSTRUCTION SNOW
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model             = NBNMissle_S
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model             = NBNMissle_DS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model             = NBNMissle_ES
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END   
    ConditionState      = DOOR_1_OPENING SNOW
      Model             = NBNMissle_A2S
      Animation         = NBNMissle_A2S.NBNMissle_A2S
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN SNOW
      Model             = NBNMissle_A2S
      Animation         = NBNMissle_A2S.NBNMissle_A2S
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE SNOW
      Model             = NBNMissle_A3S
      Animation         = NBNMissle_A3S.NBNMissle_A3S
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING SNOW
      Model             = NBNMissle_A3S
      Animation         = NBNMissle_A3S.NBNMissle_A3S
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED SNOW
      Model             = NBNMissle_A2DS
      Animation         = NBNMissle_A2DS.NBNMissle_A2DS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED SNOW
      Model             = NBNMissle_A2DS
      Animation         = NBNMissle_A2DS.NBNMissle_A2DS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED SNOW
      Model             = NBNMissle_A3DS
      Animation         = NBNMissle_A3DS.NBNMissle_A3DS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED SNOW
      Model             = NBNMissle_A3DS
      Animation         = NBNMissle_A3DS.NBNMissle_A3DS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A2ES
      Animation         = NBNMissle_A2ES.NBNMissle_A2ES
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A2ES
      Animation         = NBNMissle_A2ES.NBNMissle_A2ES
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A3ES
      Animation         = NBNMissle_A3ES.NBNMissle_A3ES
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE SNOW
      Model             = NBNMissle_A3ES
      Animation         = NBNMissle_A3ES.NBNMissle_A3ES
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   

    ; night
    ConditionState      = NIGHT SNOW
      Model             = NBNMissle_NS
    End
    ConditionState      = DAMAGED NIGHT SNOW
      Model             = NBNMissle_DNS
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
    End
     ConditionState     = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_ENS
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End
    ConditionState      = AWAITING_CONSTRUCTION NIGHT SNOW
      Model             = None
    End
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model             = NBNMissle_NS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model             = NBNMissle_DNS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model             = NBNMissle_ENS
      Flags             = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    END       
    ConditionState      = DOOR_1_OPENING NIGHT SNOW
      Model             = NBNMissle_A2NS
      Animation         = NBNMissle_A2NS.NBNMissle_A2NS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
    End   
    ConditionState      = DOOR_1_WAITING_OPEN NIGHT SNOW
      Model             = NBNMissle_A2NS
      Animation         = NBNMissle_A2NS.NBNMissle_A2NS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE NIGHT SNOW
      Model             = NBNMissle_A3NS
      Animation         = NBNMissle_A3NS.NBNMissle_A3NS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
    End   
    ConditionState      = DOOR_1_CLOSING NIGHT SNOW
      Model             = NBNMissle_A3NS
      Animation         = NBNMissle_A3NS.NBNMissle_A3NS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
    End   
    ConditionState      = DOOR_1_OPENING DAMAGED NIGHT SNOW
      Model             = NBNMissle_A2DNS
      Animation         = NBNMissle_A2DNS.NBNMissle_A2DNS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN DAMAGED NIGHT SNOW
      Model             = NBNMissle_A2DNS
      Animation         = NBNMissle_A2DNS.NBNMissle_A2DNS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE DAMAGED NIGHT SNOW
      Model             = NBNMissle_A3DNS
      Animation         = NBNMissle_A3DNS.NBNMissle_A3DNS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING DAMAGED NIGHT SNOW
      Model             = NBNMissle_A3DNS
      Animation         = NBNMissle_A3DNS.NBNMissle_A3DNS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_OPENING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A2ENS
      Animation         = NBNMissle_A2ENS.NBNMissle_A2ENS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A2ENS
      Animation         = NBNMissle_A2ENS.NBNMissle_A2ENS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_LAST PRISTINE_BONE_POS_IN_FINAL_FRAME
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
      ParticleSysBone   = Steam01 BigMissileSteam
      ParticleSysBone   = Steam02 BigMissileSteam
    End   
    ConditionState      = DOOR_1_WAITING_TO_CLOSE REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A3ENS
      Animation         = NBNMissle_A3ENS.NBNMissle_A3ENS
      AnimationMode     = MANUAL
      Flags             = START_FRAME_FIRST
      WeaponLaunchBone  = PRIMARY RockPos
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End   
    ConditionState      = DOOR_1_CLOSING REALLYDAMAGED RUBBLE NIGHT SNOW
      Model             = NBNMissle_A3ENS
      Animation         = NBNMissle_A3ENS.NBNMissle_A3ENSS
      AnimationMode     = ONCE
      Flags             = MAINTAIN_FRAME_ACROSS_STATES2
      ParticleSysBone   = Smoke01 SmolderingSmoke
      ParticleSysBone   = Smoke02 SmolderingSmoke
      ParticleSysBone   = Smoke03 SmolderingSmoke
      ParticleSysBone   = Smoke04 SmolderingSmoke
      ParticleSysBone   = Smoke05 SmolderingSmoke
      ParticleSysBone   = Smoke06 SmolderingSmoke
      ParticleSysBone   = Smoke01 SmolderingFire
      ParticleSysBone   = Smoke02 SmolderingFire
      ParticleSysBone   = Smoke03 SmolderingFire
      ParticleSysBone   = Smoke04 SmolderingFire
      ParticleSysBone   = Smoke05 SmolderingFire
      ParticleSysBone   = Smoke06 SmolderingFire
    End     
  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4
      Animation       = NBNMissle_A4.NBNMissle_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4N
      Animation       = NBNMissle_A4N.NBNMissle_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4S
      Animation       = NBNMissle_A4S.NBNMissle_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_A4SN
      Animation       = NBNMissle_A4SN.NBNMissle_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBNMissle_A4
      Animation       = NBNMissle_A4.NBNMissle_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBNMissle_A4N
      Animation       = NBNMissle_A4N.NBNMissle_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBNMissle_A4S
      Animation       = NBNMissle_A4S.NBNMissle_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBNMissle_A4SN
      Animation       = NBNMissle_A4SN.NBNMissle_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBNMissle_A4
      Animation       = NBNMissle_A4.NBNMissle_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBNMissle_A4N
      Animation       = NBNMissle_A4N.NBNMissle_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBNMissle_A4S
      Animation       = NBNMissle_A4S.NBNMissle_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBNMissle_A4SN
      Animation       = NBNMissle_A4SN.NBNMissle_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6
      Animation       = NBNMissle_A6.NBNMissle_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6N
      Animation       = NBNMissle_A6N.NBNMissle_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6S
      Animation       = NBNMissle_A6S.NBNMissle_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBNMissle_A6SN
      Animation       = NBNMissle_A6SN.NBNMissle_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBNMissle_A6
      Animation       = NBNMissle_A6.NBNMissle_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBNMissle_A6N
      Animation       = NBNMissle_A6N.NBNMissle_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBNMissle_A6S
      Animation       = NBNMissle_A6S.NBNMissle_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBNMissle_A6SN
      Animation       = NBNMissle_A6SN.NBNMissle_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End 
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBNMissle_A6
      Animation       = NBNMissle_A6.NBNMissle_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBNMissle_A6N
      Animation       = NBNMissle_A6N.NBNMissle_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBNMissle_A6S
      Animation       = NBNMissle_A6S.NBNMissle_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBNMissle_A6SN
      Animation       = NBNMissle_A6SN.NBNMissle_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5
      Animation     = NBNMissle_A5.NBNMissle_A5
      AnimationMode = LOOP
      TransitionKey = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5N
      Animation     = NBNMissle_A5N.NBNMissle_A5N
      AnimationMode = LOOP
      TransitionKey = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5S
      Animation     = NBNMissle_A5S.NBNMissle_A5S
      AnimationMode = LOOP
      TransitionKey = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model         = NBNMissle_A5SN
      Animation     = NBNMissle_A5SN.NBNMissle_A5SN
      AnimationMode = LOOP
      TransitionKey = UP_SNOWNIGHT
    End
    TransitionState = DOWN_DEFAULT UP_DAY
      Model         = NBNMissle_AB
      Animation     = NBNMissle_AB.NBNMissle_AB
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End

    TransitionState = DOWN_DEFAULT UP_NIGHT
      Model         = NBNMissle_ABN
      Animation     = NBNMissle_ABN.NBNMissle_ABN
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOW
      Model         = NBNMissle_ABS
      Animation     = NBNMissle_ABS.NBNMissle_ABS
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End
    TransitionState = DOWN_DEFAULT UP_SNOWNIGHT
      Model         = NBNMissle_ABSN
      Animation     = NBNMissle_ABSN.NBNMissle_ABSN
      AnimationMode = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags         = START_FRAME_FIRST
    End
    TransitionState = UP_DAY DOWN_DEFAULT
      Model         = NBNMissle_AB
      Animation     = NBNMissle_AB.NBNMissle_AB
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End
    TransitionState = UP_NIGHT DOWN_DEFAULT
      Model         = NBNMissle_ABN
      Animation     = NBNMissle_ABN.NBNMissle_ABN
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End
    TransitionState = UP_SNOW DOWN_DEFAULT
      Model         = NBNMissle_ABS
      Animation     = NBNMissle_ABS.NBNMissle_ABS
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End
    TransitionState = UP_SNOWNIGHT DOWN_DEFAULT
      Model         = NBNMissle_ABSN
      Animation     = NBNMissle_ABSN.NBNMissle_ABSN
      AnimationMode = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags         = START_FRAME_LAST
    End 
  End

  ; Blinking lights
  Draw = W3DModelDraw ModuleTag_05
    OkToChangeModelColor = Yes
    ; day
    ConditionState    = NONE
      Model           = NBNMissle_AC
      Animation       = NONE
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBNMissle_AC
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState    = AWAITING_CONSTRUCTION
      Model           = NONE
    End
    ConditionState    = DOOR_1_OPENING
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End   
    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_LAST
    End
    ConditionState    = DOOR_1_WAITING_TO_CLOSE
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
      ;WeaponLaunchBone = PRIMARY RockPos
    End   
    ConditionState    = DOOR_1_CLOSING
      Model           = NBNMissle_AC
      Animation       = NBNMissle_AC.NBNMissle_AC
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:NuclearMissile
  Side = ChinaInfantryGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Infa_ChinaPropagandaCenter
  End
  BuildCost        = 5000
  BuildTime        = 60.0            ; in seconds
  EnergyProduction = -10
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ShroudRevealToAllRange = 60  ; Reveals shroud to all players at a specific amount which can be different. 
                               ; Using same value? Then use KINDOF_REVEAL_TO_ALL instead!
  CommandSet       = Infa_ChinaNuclearMissileCommandSet
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 400 400 400 400  ; Experience point value at each level
  MaxSimultaneousOfType = DeterminedBySuperweaponRestriction ; Normally unlimited, but can be selected by players in multiplayer games
  MaxSimultaneousLinkKey = Superweapon  ; Count all superweapons **AND THE GLA SCUD STORM REBUILD HOLE** as one "type" for MaxSimultaneousOfType

  ; *** AUDIO Parameters ***
  VoiceSelect = NuclearMissileSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_TECHNOLOGY POWERED MP_COUNT_FOR_VICTORY FS_SUPERWEAPON
  Body            = StructureBody ModuleTag_06
    MaxHealth       = 4000.0
    InitialHealth   = 4000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 4200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior    = OCLSpecialPower ModuleTag_07
    SpecialPowerTemplate = SuperweaponNeutronMissile
    OCL                  = SUPERWEAPON_NeutronMissile
  End
  Behavior = SpecialPowerCreate ModuleTag_08
    ;nothing
  End
  Behavior = MissileLauncherBuildingUpdate ModuleTag_09
    SpecialPowerTemplate = SuperweaponNeutronMissile
    DoorOpenTime         = 8000
    DoorWaitOpenTime     = 2000
    DoorCloseTime        = 8000

    ; FXLists to play at transitions:
    DoorOpeningFX        = ChinaNuclearMissileLauncherDoorOpen
    ;DoorOpenFX           = FX_ABPowerPlantExplode
    DoorWaitingToCloseFX = ChinaNuclearMissileLauncherLaunch
    ;DoorClosingFX        = FX_ABPowerPlantExplode
    ;DoorClosedFX         = FX_ABPowerPlantExplode

    ; looping sound to play while open:
    DoorOpenIdleAudio = BuildingNeutronMissileHiss
  End

  Behavior = ProductionUpdate ModuleTag_10
    DisabledTypesToProcess = DISABLED_HELD DISABLED_UNDERPOWERED
  End

  Behavior = DestroyDie ModuleTag_11
    ;Nothing
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_12
    DeathWeapon = ChinaPowerPlantDeathWeapon
    StartsActive  = Yes
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_13
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End
  
  Behavior             = CreateObjectDie ModuleTag_20
    CreationList  = OCL_LargeStructureDebris
  End
  
  Behavior        = FXListDie ModuleTag_21
    ExemptStatus  = UNDER_CONSTRUCTION
    DeathFX       = FX_NukeGLA
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaNuclearMissileCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End
  
  Geometry            = BOX
  GeometryMajorRadius = 45.0
  GeometryMinorRadius = 55.0
  GeometryHeight      = 64.0
  GeometryIsSmall     = No
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------

Object Infa_ChinaSpeakerTower

  ; *** ART Parameters ***
  SelectPortrait         = SNPropSpeaker_L
  ButtonImage            = SNPropSpeaker
  UpgradeCameo1          = Upgrade_ChinaSubliminalMessaging

  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ; day
    ConditionState = NONE
      Model         = NBPTower
      Animation     = NBPTower.NBPTower
      AnimationMode = LOOP
    End
    ConditionState = DAMAGED
      Model         = NBPTower_D
      Animation     = NBPTower_D.NBPTower_D
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model         = NBPTower_E
      Animation     = NBPTower_E.NBPTower_E
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
    
    ; day Snow
    ConditionState  =  SNOW
      Model         = NBPTower_S
      Animation     = NBPTower_S.NBPTower_S
      AnimationMode = LOOP
    End
    ConditionState  = DAMAGED SNOW
      Model         = NBPTower_DS
      Animation     = NBPTower_DS.NBPTower_DS
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
    End
    ConditionState  = REALLYDAMAGED RUBBLE SNOW
      Model         = NBPTower_ES
      Animation     = NBPTower_ES.NBPTower_ES
      AnimationMode = LOOP
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End

    ; night
    ConditionState = NIGHT
      Model         = NBPTower_N
      Animation     = NBPTower_N.NBPTower_N
      AnimationMode = LOOP
    End 
    ConditionState = NIGHT DAMAGED
      Model         = NBPTower_DN
      Animation     = NBPTower_DN.NBPTower_DN
      AnimationMode = LOOP
    End
    ConditionState = NIGHT REALLYDAMAGED RUBBLE
      Model         = NBPTower_EN
      Animation     = NBPTower_EN.NBPTower_EN
      AnimationMode = LOOP
    End

    
    ;Snow Night
    
    ConditionState = NIGHT SNOW
      Model         = NBPTower_NS
      Animation     = NBPTower_NS.NBPTower_NS
      AnimationMode = LOOP
    End 
    
    ConditionState = NIGHT SNOW DAMAGED
      Model         = NBPTower_DNS
      Animation     = NBPTower_DNS.NBPTower_DNS
      AnimationMode = LOOP
    End 
    
    ConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
      Model         = NBPTower_ENS
      Animation     = NBPTower_ENS.NBPTower_ENS
      AnimationMode = LOOP
    End 
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBPTower
      Animation          = NBPTower.NBPTower
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBPTower_D
      Animation          = NBPTower_D.NBPTower_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBPTower_E
      Animation          = NBPTower_E.NBPTower_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBPTower_N
      Animation          = NBPTower_N.NBPTower_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBPTower_DN
      Animation          = NBPTower_DN.NBPTower_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBPTower_EN
      Animation          = NBPTower_EN.NBPTower_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBPTower_S
      Animation          = NBPTower_S.NBPTower_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBPTower_DS
      Animation          = NBPTower_DS.NBPTower_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBPTower_ES
      Animation          = NBPTower_ES.NBPTower_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBPTower_NS
      Animation          = NBPTower_NS.NBPTower_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBPTower_DNS
      Animation          = NBPTower_DNS.NBPTower_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBPTower_ENS
      Animation          = NBPTower_ENS.NBPTower_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************   

    
  End   
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4
      Animation       = NBPTower_A4.NBPTower_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4N
      Animation       = NBPTower_A4N.NBPTower_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4S
      Animation       = NBPTower_A4S.NBPTower_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A4SN
      Animation       = NBPTower_A4SN.NBPTower_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPTower_A4
      Animation       = NBPTower_A4.NBPTower_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPTower_A4N
      Animation       = NBPTower_A4N.NBPTower_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPTower_A4S
      Animation       = NBPTower_A4S.NBPTower_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPTower_A4SN
      Animation       = NBPTower_A4SN.NBPTower_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPTower_A4
      Animation       = NBPTower_A4.NBPTower_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPTower_A4N
      Animation       = NBPTower_A4N.NBPTower_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPTower_A4S
      Animation       = NBPTower_A4S.NBPTower_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPTower_A4SN
      Animation       = NBPTower_A4SN.NBPTower_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6
      Animation       = NBPTower_A6.NBPTower_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6N
      Animation       = NBPTower_A6N.NBPTower_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6S
      Animation       = NBPTower_A6S.NBPTower_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPTower_A6SN
      Animation       = NBPTower_A6SN.NBPTower_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBPTower_A6
      Animation       = NBPTower_A6.NBPTower_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBPTower_A6N
      Animation       = NBPTower_A6N.NBPTower_A6N
      AnimationMode   = ONCE

      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBPTower_A6S
      Animation       = NBPTower_A6S.NBPTower_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBPTower_A6SN
      Animation       = NBPTower_A6SN.NBPTower_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPTower_A6
      Animation       = NBPTower_A6.NBPTower_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPTower_A6N
      Animation       = NBPTower_A6N.NBPTower_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPTower_A6S
      Animation       = NBPTower_A6S.NBPTower_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPTower_A6SN
      Animation       = NBPTower_A6SN.NBPTower_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState    = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5
      Animation       = NBPTower_A5.NBPTower_A5
      AnimationMode   = LOOP
      TransitionKey   = UP_DAY
    End

    ConditionState    = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5N
      Animation       = NBPTower_A5N.NBPTower_A5N
      AnimationMode   = LOOP
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5S
      Animation       = NBPTower_A5S.NBPTower_A5S
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPTower_A5SN
      Animation       = NBPTower_A5SN.NBPTower_A5SN
      AnimationMode   = LOOP
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPTower_AB
      Animation       = NBPTower_AB.NBPTower_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPTower_ABN
      Animation       = NBPTower_ABN.NBPTower_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPTower_ABS
      Animation       = NBPTower_ABS.NBPTower_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPTower_ABSN
      Animation       = NBPTower_ABSN.NBPTower_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPTower_AB
      Animation       = NBPTower_AB.NBPTower_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPTower_ABN
      Animation       = NBPTower_ABN.NBPTower_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPTower_ABS
      Animation       = NBPTower_ABS.NBPTower_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPTower_ABSN
      Animation       = NBPTower_ABSN.NBPTower_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle     = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:SpeakerTower
  Side                = ChinaInfantryGeneral
  EditorSorting       = STRUCTURE
  BuildCost           = 500
  BuildTime           = 10.0           ; in seconds
  EnergyProduction    = -1
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  Prerequisites
    Object            = Infa_ChinaPropagandaCenter
  End
  CommandSet          = ChinaSpeakerTowerCommandSet
  ExperienceValue     = 50 50 50 50  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect     = SpeakerTowerSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE FS_BASE_DEFENSE POWERED IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY

  Body            = StructureBody ModuleTag_05
    MaxHealth     = 300.0
    InitialHealth = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 500
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior        = PropagandaTowerBehavior ModuleTag_06
    Radius                = 150.0
    DelayBetweenUpdates   = 2000 ; in milliseconds
    HealPercentEachSecond = 2%   ; get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 4%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End
  Behavior        = DestroyDie ModuleTag_07
    ;<NO DATA>
  End
  Behavior        = CreateObjectDie ModuleTag_08
    CreationList  = OCL_ABPowerPlantExplode
  End
  Behavior        = FXListDie ModuleTag_09
    DeathFX       = FX_StructureTinyDeath
  End
  Behavior        = ProductionUpdate ModuleTag_10
    ;<NO DATA> But is required if we have any Object-level Upgrades!
  End

  Behavior                = GenerateMinefieldBehavior ModuleTag_11
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior             = FlammableUpdate ModuleTag_13
    AflameDuration     = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ;-------------DESIGNED FOR TINY SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionTinyExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionTinyShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = ChinaSpeakerTowerCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry             = BOX
  GeometryMajorRadius  = 6.0
  GeometryMinorRadius  = 6.0
  GeometryHeight       = 51.0
  GeometryIsSmall      = No
  Shadow               = SHADOW_VOLUME
  BuildCompletion      = PLACED_BY_PLAYER

End

















;------------------------------------------------------------------------------
;China Nuclear Reactor
Object Infa_ChinaPowerPlant

  ; *** ART Parameters ***
  SelectPortrait         = SNReactor_L
  ButtonImage            = SNReactor
  ;day
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState    = NONE
      Model           = NBPwrPlant
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = DAMAGED
      Model           = NBPwrPlant_D
      ParticleSysBone = Smoke01 SteamLarge
      ParticleSysBone = Smoke02 SteamMedium
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 FireFactionLarge
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBPwrPlant_E
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksMedium
      ParticleSysBone = Spark03 SparksSmall
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; day overcharge
    ConditionState    = POWER_PLANT_UPGRADED
      Model           = NBPwrPlant
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = DAMAGED POWER_PLANT_UPGRADED
      Model           = NBPwrPlant_D
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED
      Model           = NBPwrPlant_E
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End
    
    
    ; Snow-Day
    
    ConditionState    = SNOW
      Model           = NBPwrPlant_S
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = DAMAGED SNOW
      Model           = NBPwrPlant_DS
      ParticleSysBone = Smoke01 SteamLarge
      ParticleSysBone = Smoke02 SteamMedium
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 FireFactionLarge
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE SNOW
      Model           = NBPwrPlant_ES
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksMedium
      ParticleSysBone = Spark03 SparksSmall
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; day overcharge
    ConditionState    = POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPlant_S
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = DAMAGED POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPlant_DS
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPlant_ES
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End
    

  ;night snow
    ConditionState    = NIGHT SNOW
      Model           = NBPwrPlant_NS
      Animation       = NBPwrPlant_NS.NBPwrPlant_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = NIGHT DAMAGED SNOW
      Model           = NBPwrPlant_DNS
      Animation       = NBPwrPlant_DNS.NBPwrPlant_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = NBPwrPlant_ENS
      Animation       = NBPwrPlant_ENS.NBPwrPlant_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks
      ParticleSysBone = Spark03 LiveWireSparks
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; night overcharge
    ConditionState    = NIGHT POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPlant_NS
      Animation       = NBPwrPlant_NS.NBPwrPlant_NS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = NIGHT DAMAGED POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPlant_DNS
      Animation       = NBPwrPlant_DNS.NBPwrPlant_DNS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT POWER_PLANT_UPGRADED SNOW
      Model           = NBPwrPlant_ENS
      Animation       = NBPwrPlant_ENS.NBPwrPlant_ENS
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End 
    
    
      ;night
    ConditionState    = NIGHT
      Model           = NBPwrPlant_N
      Animation       = NBPwrPlant_N.NBPwrPlant_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
    End
    ConditionState    = NIGHT DAMAGED
      Model           = NBPwrPlant_DN
      Animation       = NBPwrPlant_DN.NBPwrPlant_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = NBPwrPlant_EN
      Animation       = NBPwrPlant_EN.NBPwrPlant_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 LiveWireSparks
      ParticleSysBone = Spark02 LiveWireSparks
      ParticleSysBone = Spark03 LiveWireSparks
      ParticleSysBone = Spark04 LiveWireSparks
    End

    ; night overcharge
    ConditionState    = NIGHT POWER_PLANT_UPGRADED
      Model           = NBPwrPlant_N
      Animation       = NBPwrPlant_N.NBPwrPlant_N
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksSmall
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = NIGHT DAMAGED POWER_PLANT_UPGRADED
      Model           = NBPwrPlant_DN
      Animation       = NBPwrPlant_DN.NBPwrPlant_DN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksMedium
      ParticleSysBone = Spark04 SparksMedium
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksSmall
      ParticleSysBone = Spark07 SparksSmall
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT POWER_PLANT_UPGRADED
      Model           = NBPwrPlant_EN
      Animation       = NBPwrPlant_EN.NBPwrPlant_EN
      AnimationMode   = LOOP
      ParticleSysBone = Smoke01 SteamVent
      ParticleSysBone = Smoke02 SteamVent
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Spark01 SparksLarge
      ParticleSysBone = Spark02 SparksLarge
      ParticleSysBone = Spark03 SparksLarge
      ParticleSysBone = Spark04 SparksLarge
      ParticleSysBone = Spark05 SparksMedium
      ParticleSysBone = Spark06 SparksMedium
      ParticleSysBone = Spark07 SparksSmall
    End 
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBPwrPlant
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBPwrPlant_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBPwrPlant_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBPwrPlant_N
      Animation          = NBPwrPlant_N.NBPwrPlant_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBPwrPlant_DN
      Animation          = NBPwrPlant_DN.NBPwrPlant_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBPwrPlant_EN
      Animation          = NBPwrPlant_EN.NBPwrPlant_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBPwrPlant_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBPwrPlant_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBPwrPlant_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBPwrPlant_NS
      Animation          = NBPwrPlant_NS.NBPwrPlant_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBPwrPlant_DNS
      Animation          = NBPwrPlant_DNS.NBPwrPlant_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBPwrPlant_ENS
      Animation          = NBPwrPlant_ENS.NBPwrPlant_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD  POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED POWER_PLANT_UPGRADED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED POWER_PLANT_UPGRADED
    ;**************************************************************************************************************************

  End
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4
      Animation       = NBPwrPlant_A4.NBPwrPlant_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4N
      Animation       = NBPwrPlant_A4N.NBPwrPlant_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4S
      Animation       = NBPwrPlant_A4S.NBPwrPlant_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A4SN
      Animation       = NBPwrPlant_A4SN.NBPwrPlant_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPwrPlant_A4
      Animation       = NBPwrPlant_A4.NBPwrPlant_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPwrPlant_A4N
      Animation       = NBPwrPlant_A4N.NBPwrPlant_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPwrPlant_A4S
      Animation       = NBPwrPlant_A4S.NBPwrPlant_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPwrPlant_A4SN
      Animation       = NBPwrPlant_A4SN.NBPwrPlant_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPwrPlant_A4
      Animation       = NBPwrPlant_A4.NBPwrPlant_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A4N

      Animation       = NBPwrPlant_A4N.NBPwrPlant_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPwrPlant_A4S
      Animation       = NBPwrPlant_A4S.NBPwrPlant_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A4SN
      Animation       = NBPwrPlant_A4SN.NBPwrPlant_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6
      Animation       = NBPwrPlant_A6.NBPwrPlant_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6N
      Animation       = NBPwrPlant_A6N.NBPwrPlant_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6S
      Animation       = NBPwrPlant_A6S.NBPwrPlant_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPwrPlant_A6SN
      Animation       = NBPwrPlant_A6SN.NBPwrPlant_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBPwrPlant_A6
      Animation       = NBPwrPlant_A6.NBPwrPlant_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBPwrPlant_A6N
      Animation       = NBPwrPlant_A6N.NBPwrPlant_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBPwrPlant_A6S
      Animation       = NBPwrPlant_A6S.NBPwrPlant_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBPwrPlant_A6SN
      Animation       = NBPwrPlant_A6SN.NBPwrPlant_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPwrPlant_A6
      Animation       = NBPwrPlant_A6.NBPwrPlant_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A6N
      Animation       = NBPwrPlant_A6N.NBPwrPlant_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPwrPlant_A6S
      Animation       = NBPwrPlant_A6S.NBPwrPlant_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPwrPlant_A6SN
      Animation       = NBPwrPlant_A6SN.NBPwrPlant_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5
      Animation       = NBPwrPlant_A5.NBPwrPlant_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5N
      Animation       = NBPwrPlant_A5N.NBPwrPlant_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5S
      Animation       = NBPwrPlant_A5S.NBPwrPlant_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPwrPlant_A5SN
      Animation       = NBPwrPlant_A5SN.NBPwrPlant_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBPwrPlant_AB
      Animation       = NBPwrPlant_AB.NBPwrPlant_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBPwrPlant_ABN
      Animation       = NBPwrPlant_ABN.NBPwrPlant_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBPwrPlant_ABS
      Animation       = NBPwrPlant_ABS.NBPwrPlant_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBPwrPlant_ABSN
      Animation       = NBPwrPlant_ABSN.NBPwrPlant_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBPwrPlant_AB
      Animation       = NBPwrPlant_AB.NBPwrPlant_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBPwrPlant_ABN
      Animation       = NBPwrPlant_ABN.NBPwrPlant_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBPwrPlant_ABS
      Animation       = NBPwrPlant_ABS.NBPwrPlant_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBPwrPlant_ABSN
      Animation       = NBPwrPlant_ABSN.NBPwrPlant_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:NuclearReactor
  Side                = ChinaInfantryGeneral
  EditorSorting       = STRUCTURE

  BuildCost           = 1000
  BuildTime           = 10.0           ; in seconds
  EnergyProduction    = 10
  EnergyBonus         = 5              ; for the overcharge bonus
  VisionRange         = 200.0          ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = Infa_ChinaPowerPlantCommandSet
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level
 
  ; *** AUDIO Parameters ***
  VoiceSelect         = NuclearReactorSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_POWER MP_COUNT_FOR_VICTORY

  Body                = StructureBody ModuleTag_05
    MaxHealth         = 1500.0
    InitialHealth     = 1500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior            = OverchargeBehavior ModuleTag_06
    HealthPercentToDrainPerSecond    = 3% ;% of max health to drain per second
    NotAllowedWhenHealthBelowPercent = 0% ;When currHealth below this, it turns off automatically
  End
  
  Behavior                 = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior                 = CreateObjectDie ModuleTag_08
    CreationList      = OCL_SmallStructureDebris
  End

  Behavior = FireWeaponWhenDeadBehavior ModuleTag_09
    DeathWeapon = ChinaPowerPlantDeathWeapon
    StartsActive  = Yes
  End

  Behavior = ProductionUpdate ModuleTag_10
    ; nothing, but is required if we have any Object-level Upgrades!
  End
  Behavior = PowerPlantUpdate ModuleTag_11
    RodsExtendTime = 1
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_12
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior             = FXListDie ModuleTag_16
    DeathFX       = FX_BuildingDie
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = ChinaPowerPlantCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 27.0
  GeometryMinorRadius = 34.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End















;------------------------------------------------------------------------------
Object Infa_ChinaSupplyCenter

  ; *** ART Parameters ***
  SelectPortrait         = SNSupplyCenter_L
  ButtonImage            = SNSupplyCenter
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ;day
    ConditionState = NONE
      Model = NBSupCent
      ;Animation       = NBSupCent.NBSupCent
      ;AnimationMode   = LOOP
    End
    ConditionState = DAMAGED
      Model = NBSupCent_D
      ;Animation       = NBSupCent_D.NBSupCent_D
      ;AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE
      Model = NBSupCent_E
      ;Animation       = NBSupCent_E.NBSupCent_E
      ;AnimationMode   = LOOP
    End
    
    
    ConditionState = SNOW
      Model = NBSupCent_S
      ;Animation       = NBSupCent.NBSupCent
      ;AnimationMode   = LOOP
    End
    ConditionState = DAMAGED SNOW
      Model = NBSupCent_DS
      ;Animation       = NBSupCent_D.NBSupCent_D
      ;AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = NBSupCent_ES
      ;Animation       = NBSupCent_E.NBSupCent_E
      ;AnimationMode   = LOOP
    End
    
    
    ConditionState = SNOW NIGHT
      Model = NBSupCent_NS
      ;Animation       = NBSupCent.NBSupCent
      ;AnimationMode   = LOOP
    End
    ConditionState = DAMAGED SNOW NIGHT
      Model = NBSupCent_DNS
      ;Animation       = NBSupCent_D.NBSupCent_D
      ;AnimationMode   = LOOP
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW NIGHT
      Model = NBSupCent_ENS
      ;Animation       = NBSupCent_E.NBSupCent_E
      ;AnimationMode   = LOOP
    End
    

    ConditionState = NIGHT
      Model           = NBSupCent_N
      ;Animation       = NBSupCent_N.NBSupCent_N
      ;AnimationMode   = LOOP
    End  
    ConditionState = NIGHT DAMAGED
      Model           = NBSupCent_DN

      ;Animation       = NBSupCent_N.NBSupCent_N
      ;AnimationMode   = LOOP
    End  
    ConditionState = NIGHT REALLYDAMAGED RUBBLE
      Model           = NBSupCent_EN
      ;Animation       = NBSupCent_N.NBSupCent_N
      ;AnimationMode   = LOOP
    End  
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBSupCent
      ;Animation          = NBSupCent.NBSupCent
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBSupCent_D
      ;Animation          = NBSupCent_D.NBSupCent_D
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBSupCent_E
      ;Animation          = NBSupCent_E.NBSupCent_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBSupCent_N
      ;Animation          = NBSupCent_N.NBSupCent_N
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBSupCent_DN
      ;Animation          = NBSupCent_DN.NBSupCent_DN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBSupCent_EN
      ;Animation          = NBSupCent_EN.NBSupCent_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBSupCent_S
      ;Animation          = NBSupCent_S.NBSupCent_S
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBSupCent_DS
      ;Animation          = NBSupCent_DS.NBSupCent_DS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBSupCent_ES
      ;Animation          = NBSupCent_ES.NBSupCent_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBSupCent_NS
      ;Animation          = NBSupCent_NS.NBSupCent_NS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBSupCent_DNS
      ;Animation          = NBSupCent_DNS.NBSupCent_DNS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBSupCent_ENS
      ;Animation          = NBSupCent_ENS.NBSupCent_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End    
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5
      Animation       = NBSupCent_A5.NBSupCent_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5N
      Animation       = NBSupCent_A5N.NBSupCent_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5S
      Animation       = NBSupCent_A5S.NBSupCent_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5SN
      Animation       = NBSupCent_A5SN.NBSupCent_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:SupplyCenter
  Side             = ChinaInfantryGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Infa_ChinaPowerPlant 
  End
  BuildCost        = 1500
  RefundValue      = 450 ; With nothing (or zero) listed, we sell for half price. 
  BuildTime        = 10.0           ; in seconds
  EnergyProduction = -1
  CommandSet       = Infa_ChinaSupplyCenterCommandSet
  VisionRange     = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = SupplyCenterChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority       = STRUCTURE
  KindOf              = PRELOAD STRUCTURE SELECTABLE IMMOBILE CASH_GENERATOR SCORE CAPTURABLE AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY CANNOT_BUILD_NEAR_SUPPLIES FS_SUPPLY_CENTER
  Body                = StructureBody ModuleTag_05
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior = SupplyCenterCreate ModuleTag_06
    ;nothing
  End
  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior                 = CreateObjectDie ModuleTag_08
    CreationList      = OCL_SmallStructureDebris
  End
  Behavior                 = FXListDie ModuleTag_09
    DeathFX           = FX_StructureSmallDeath
  End
  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  Behavior = SupplyCenterProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  0.0   Z:0.0
    NaturalRallyPoint = X: 52.0  Y:  0.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End

  Behavior            = SpawnBehavior ModuleTag_12
    SpawnNumber       = 1
    SpawnReplaceDelay = 9999
    SpawnTemplateName = Infa_ChinaVehicleSupplyTruck
    OneShot           = Yes
    CanReclaimOrphans = No
    SlavesHaveFreeWill = Yes
  End

  Behavior = SupplyCenterDockUpdate ModuleTag_13
    AllowsPassthrough = No ;You can't drive through this guy while docking.  Use this when the dock points are all outside
    NumberApproachPositions = -1 ; This is a Boneless dock, so this means infinite can approach
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_14
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_17
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaSupplyCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 52.0
  GeometryMinorRadius = 47.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End







;------------------------------------------------------------------------------
Object Infa_ChinaBarracks

  ; *** ART Parameters ***
  SelectPortrait         = SNBarracks_L
  ButtonImage            = SNBarracks
  Draw = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
 
 
; day
    ConditionState = NONE
      Model = NBBarracks
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks.NBBarracks
      AnimationMode = LOOP
    End
  
    ConditionState = DAMAGED
      Model = NBBarracks_D
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_D.NBBarracks_D
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE
      Model = NBBarracks_E
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_E.NBBarracks_E
      AnimationMode = LOOP
    End
    
; day SNOW

    ConditionState = SNOW
      Model = NBBarracks_S
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_S.NBBarracks_S
      AnimationMode = LOOP
    End
  
    ConditionState = DAMAGED SNOW
      Model = NBBarracks_DS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_DS.NBBarracks_DS
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model = NBBarracks_ES
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_ES.NBBarracks_ES
      AnimationMode = LOOP
    End

  
; night
    ConditionState = NIGHT
      Model         = NBBarracks_N
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_N.NBBarracks_N
      AnimationMode = LOOP
    End  
    
    ConditionState = DAMAGED NIGHT
      Model = NBBarracks_DN
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_DN.NBBarracks_DN
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT
      Model = NBBarracks_EN
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_EN.NBBarracks_EN
      AnimationMode = LOOP
    End
    
; night snow   
    ConditionState = NIGHT SNOW
      Model         = NBBarracks_NS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_NS.NBBarracks_NS
      AnimationMode = LOOP
    End  
    
    ConditionState = DAMAGED NIGHT SNOW
      Model = NBBarracks_DNS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_DNS.NBBarracks_DNS
      AnimationMode = LOOP
    End
    
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model = NBBarracks_ENS
      ParticleSysBone= Fire01 SmolderingFire
      Animation     = NBBarracks_ENS.NBBarracks_ENS
      AnimationMode = LOOP
    End
    
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBBarracks
      Animation          = NBBarracks.NBBarracks
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBBarracks_D
      Animation          = NBBarracks_D.NBBarracks_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBBarracks_E
      Animation          = NBBarracks_E.NBBarracks_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBBarracks_N
      Animation          = NBBarracks_N.NBBarracks_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBBarracks_DN
      Animation          = NBBarracks_DN.NBBarracks_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBBarracks_EN
      Animation          = NBBarracks_EN.NBBarracks_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBBarracks_S
      Animation          = NBBarracks_S.NBBarracks_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBBarracks_DS
      Animation          = NBBarracks_DS.NBBarracks_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBBarracks_ES
      Animation          = NBBarracks_ES.NBBarracks_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBBarracks_NS
      Animation          = NBBarracks_NS.NBBarracks_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBBarracks_DNS
      Animation          = NBBarracks_DNS.NBBarracks_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBBarracks_ENS
      Animation          = NBBarracks_ENS.NBBarracks_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************  
  End  
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4
      Animation       = NBBarracks_A4.NBBarracks_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4N
      Animation       = NBBarracks_A4N.NBBarracks_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4S
      Animation       = NBBarracks_A4S.NBBarracks_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A4SN
      Animation       = NBBarracks_A4SN.NBBarracks_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBBarracks_A4
      Animation       = NBBarracks_A4.NBBarracks_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBBarracks_A4N
      Animation       = NBBarracks_A4N.NBBarracks_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBBarracks_A4S
      Animation       = NBBarracks_A4S.NBBarracks_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBBarracks_A4SN
      Animation       = NBBarracks_A4SN.NBBarracks_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBBarracks_A4
      Animation       = NBBarracks_A4.NBBarracks_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBBarracks_A4N
      Animation       = NBBarracks_A4N.NBBarracks_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBBarracks_A4S
      Animation       = NBBarracks_A4S.NBBarracks_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBBarracks_A4SN
      Animation       = NBBarracks_A4SN.NBBarracks_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
     Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6
      Animation       = NBBarracks_A6.NBBarracks_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6N
      Animation       = NBBarracks_A6N.NBBarracks_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6S
      Animation       = NBBarracks_A6S.NBBarracks_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBBarracks_A6SN
      Animation       = NBBarracks_A6SN.NBBarracks_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBBarracks_A6
      Animation       = NBBarracks_A6.NBBarracks_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBBarracks_A6N
      Animation       = NBBarracks_A6N.NBBarracks_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBBarracks_A6S
      Animation       = NBBarracks_A6S.NBBarracks_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBBarracks_A6SN
      Animation       = NBBarracks_A6SN.NBBarracks_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBBarracks_A6
      Animation       = NBBarracks_A6.NBBarracks_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBBarracks_A6N
      Animation       = NBBarracks_A6N.NBBarracks_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBBarracks_A6S
      Animation       = NBBarracks_A6S.NBBarracks_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBBarracks_A6SN
      Animation       = NBBarracks_A6SN.NBBarracks_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5
      Animation       = NBBarracks_A5.NBBarracks_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5N
      Animation       = NBBarracks_A5N.NBBarracks_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5S
      Animation       = NBBarracks_A5S.NBBarracks_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBarracks_A5SN
      Animation       = NBBarracks_A5SN.NBBarracks_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBBarracks_AB
      Animation       = NBBarracks_AB.NBBarracks_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBBarracks_ABN
      Animation       = NBBarracks_ABN.NBBarracks_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBBarracks_ABS
      Animation       = NBBarracks_ABS.NBBarracks_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBBarracks_ABSN
      Animation       = NBBarracks_ABSN.NBBarracks_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBBarracks_AB
      Animation       = NBBarracks_AB.NBBarracks_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBBarracks_ABN
      Animation       = NBBarracks_ABN.NBBarracks_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBBarracks_ABS
      Animation       = NBBarracks_ABS.NBBarracks_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBBarracks_ABSN
      Animation       = NBBarracks_ABSN.NBBarracks_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:Barracks
  Side             = ChinaInfantryGeneral
  EditorSorting    = STRUCTURE
  BuildCost        = 500
  BuildTime        = 10.0           ; in seconds
  EnergyProduction = 0
  CommandSet       = Infa_ChinaBarracksCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 100 100 100 100  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = BarracksChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE HEAL_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_BARRACKS
  Body            = StructureBody ModuleTag_05
    MaxHealth     = 1200.0
    InitialHealth = 1200.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1400
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = HealContain ModuleTag_06
    ContainMax          = 10 ;way bigger than the # of objects we can have  
    TimeForFullHeal     = 2000   ;(in milliseconds)
    AllowInsideKindOf   = INFANTRY
    AllowAlliesInside   = Yes
    AllowNeutralInside  = No
    AllowEnemiesInside  = No
  End

  Behavior = DestroyDie ModuleTag_07
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_08
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureSmallDeath
  End 

  Behavior = ProductionUpdate ModuleTag_10
    QuantityModifier = Infa_ChinaInfantryMiniGunner   1
  End
  Behavior = QueueProductionExitUpdate ModuleTag_11
    UnitCreatePoint   = X:  0.0  Y:  -25.0   Z:0.0
    NaturalRallyPoint = X: 36.0  Y:  -25.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
    ExitDelay = 300 ; Mainly for the multiple produced Red Guard.  Make them come out one at a time.
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_12
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = FlammableUpdate ModuleTag_14
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaBarracksCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Behavior = GrantUpgradeCreate ModuleTag_27
    UpgradeToGrant           = Upgrade_Nationalism
    ExemptStatus      = UNDER_CONSTRUCTION
  End

  Geometry            = BOX
  GeometryMajorRadius = 36.0
  GeometryMinorRadius = 44.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End







;------------------------------------------------------------------------------
Object Infa_ChinaWarFactory

  ; *** ART Parameters ***
  SelectPortrait         = SNWarFact_L
  ButtonImage            = SNWarFact

  ; ------------ the main factory itself -----------------
  Draw                = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ; day
    DefaultConditionState
      Model           = NBWarFact  
    End
    ConditionState    = DAMAGED
      Model           = NBWarFact_D
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBWarFact_E
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
    
    ConditionState    = SNOW
      Model           = NBWarFact_S  
    End
    ConditionState = DAMAGED SNOW
      Model           = NBWarFact_DS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState = REALLYDAMAGED RUBBLE SNOW
      Model           = NBWarFact_ES
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
    

    ; night **********************************************
    ConditionState  = NIGHT
      Model           = NBWarFact_N     
    End
    ConditionState    = DAMAGED NIGHT
      Model           = NBWarFact_DN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState    = REALLYDAMAGED RUBBLE NIGHT
      Model           = NBWarFact_EN
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
        
    ; night   SNOW
      ConditionState = NIGHT SNOW
      Model           = NBWarFact_NS   
    End
    ConditionState = DAMAGED NIGHT SNOW
      Model           = NBWarFact_DNS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
    End
    ConditionState = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model           = NBWarFact_ENS
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Smoke03 SmolderingSmoke
      ParticleSysBone = Smoke04 SmolderingSmoke
      ParticleSysBone = Smoke05 SmolderingSmoke
      ParticleSysBone = Smoke06 SmolderingSmoke
      ParticleSysBone = Smoke07 SmolderingSmoke
      ParticleSysBone = Fire01  SmolderingFire
      ParticleSysBone = Fire01  SmolderingFlameCore
      ParticleSysBone = Fire02  SmolderingFire
      ParticleSysBone = Fire02  SmolderingFlameCore
      ParticleSysBone = Fire03  SmolderingFire
      ParticleSysBone = Fire03  SmolderingFlameCore
    End
    
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact
      ;Animation          = NBWarFact.NBWarFact
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBWarFact_D
      ;Animation          = NBWarFact_D.NBWarFact_D
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBWarFact_E
      ;Animation          = NBWarFact_E.NBWarFact_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBWarFact_N
      ;Animation          = NBWarFact_N.NBWarFact_N
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBWarFact_DN
      ;Animation          = NBWarFact_DN.NBWarFact_DN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBWarFact_EN
      ;Animation          = NBWarFact_EN.NBWarFact_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBWarFact_S
      ;Animation          = NBWarFact_S.NBWarFact_S
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBWarFact_DS
      ;Animation          = NBWarFact_DS.NBWarFact_DS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBWarFact_ES
      ;Animation          = NBWarFact_ES.NBWarFact_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBWarFact_NS
      ;Animation          = NBWarFact_NS.NBWarFact_NS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBWarFact_DNS
      ;Animation          = NBWarFact_DNS.NBWarFact_DNS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBWarFact_ENS
      ;Animation          = NBWarFact_ENS.NBWarFact_ENS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************


  End
  
  ; ------------------ the construction crane ------------
  Draw                   = W3DModelDraw ModuleTag_02
    OkToChangeModelColor = Yes
    ConditionState       = None
      Model              = NBWarFact_A1
      Animation          = NBWarFact_A1.NBWarFact_A1
      AnimationMode      = LOOP
      WaitForStateToFinishIfPossible = TransitionFinishBeforeSwitch
    End
    ConditionState       = DAMAGED
      Model              = NBWarFact_A1D
      Animation          = NBWarFact_A1D.NBWarFact_A1D
      AnimationMode      = LOOP
      WaitForStateToFinishIfPossible = TransitionFinishBeforeSwitch
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBWarFact_A1E
      Animation          = NBWarFact_A1E.NBWarFact_A1E
      AnimationMode      = LOOP
      WaitForStateToFinishIfPossible = TransitionFinishBeforeSwitch
    End
    ConditionState       = ACTIVELY_CONSTRUCTING
      Model              = NBWarFact_A2
      Animation          = NBWarFact_A2.NBWarFact_A2
      AnimationMode      = ONCE
      TransitionKey      = TransitionFinishBeforeSwitch
    End
    ConditionState       = ACTIVELY_CONSTRUCTING DAMAGED
      Model              = NBWarFact_A2D
      Animation          = NBWarFact_A2D.NBWarFact_A2D
      AnimationMode      = ONCE
      TransitionKey      = TransitionFinishBeforeSwitch
    End
    ConditionState       = ACTIVELY_CONSTRUCTING REALLYDAMAGED RUBBLE
      Model              = NBWarFact_A2E
      Animation          = NBWarFact_A2E.NBWarFact_A2E
      AnimationMode      = ONCE
      TransitionKey      = TransitionFinishBeforeSwitch
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact_A1
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = SOLD DAMAGED REALLYDAMAGED RUBBLE
      Model              = NONE
    End
  End


  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone =  Fire01 SmolderingFire
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone =  Fire02 SmolderingFire
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBWarFact_A4
      Animation       = NBWarFact_A4.NBWarFact_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBWarFact_A4N
      Animation       = NBWarFact_A4N.NBWarFact_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBWarFact_A4S
      Animation       = NBWarFact_A4S.NBWarFact_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBWarFact_A4SN
      Animation       = NBWarFact_A4SN.NBWarFact_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                 = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = NIGHT
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = SNOW
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = SNOW NIGHT
      Model            = None
      TransitionKey    = DOWN_DEFAULT
    End
    ConditionState     = PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_DAY
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState     = NIGHT PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_NIGHT
      ParticleSysBone  = Dust01 BuildingDustChina
      ParticleSysBone  = Smoke01 BuildUpSmokeChina
      ParticleSysBone  = Smoke02 BuildUpSmokeChina
      ParticleSysBone  = Smoke03 BuildUpSmokeChina
      ParticleSysBone  = Smoke04 BuildUpSmokeChina
      ParticleSysBone  = Smoke05 BuildUpSmokeChina
    End
    ConditionState     = SNOW PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_SNOW
      ParticleSysBone  = Dust01 BuildingSnowDust
      ParticleSysBone  = Smoke01 BuildUpSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpSnowSmoke
    End
    ConditionState     = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = MANUAL
      Flags            = START_FRAME_LAST
      TransitionKey    = UP_SNOWNIGHT
      ParticleSysBone  = Dust01 BuildingNightSnowDust
      ParticleSysBone  = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone  = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState    = DOWN_DEFAULT UP_DAY
     Model             = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_NIGHT
     Model             = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_SNOW
     Model             = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = DOWN_DEFAULT UP_SNOWNIGHT
     Model             = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags            = START_FRAME_FIRST
    End
    TransitionState    = UP_DAY DOWN_DEFAULT
      Model            = NBWarFact_A6
      Animation        = NBWarFact_A6.NBWarFact_A6
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_NIGHT DOWN_DEFAULT
      Model            = NBWarFact_A6N
      Animation        = NBWarFact_A6N.NBWarFact_A6N
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_SNOW DOWN_DEFAULT
      Model            = NBWarFact_A6S
      Animation        = NBWarFact_A6S.NBWarFact_A6S
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
    TransitionState    = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBWarFact_A6SN
      Animation        = NBWarFact_A6SN.NBWarFact_A6SN
      AnimationMode    = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags            = START_FRAME_LAST
    End
  End

  ; ------------------ the construction conveyor belt ------------
  Draw = W3DModelDraw ModuleTag_05
    OkToChangeModelColor = Yes
    DefaultConditionState
      Model           = NBWarFact_A7
      Animation       = NBWarFact_A7.NBWarFact_A7
      AnimationMode   = LOOP
    ;  Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT
    AliasConditionState = SNOW
    AliasConditionState = SNOW NIGHT
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = SNOW NIGHT DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE
    
    ConditionState    = ACTIVELY_CONSTRUCTING
      Model           = NBWarFact_A7
      Animation       = NBWarFact_A7.NBWarFact_A7
      AnimationMode   = LOOP
    ;  Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT ACTIVELY_CONSTRUCTING
    AliasConditionState = NIGHT DAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW DAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT DAMAGED ACTIVELY_CONSTRUCTING
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE ACTIVELY_CONSTRUCTING
    AliasConditionState = SNOW NIGHT REALLYDAMAGED RUBBLE ACTIVELY_CONSTRUCTING

    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact_A7
      Animation          = NBWarFact_A7.NBWarFact_A7
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
  End

  ; ----------------- the factory door -------------------
  Draw = W3DModelDraw ModuleTag_06
    DefaultConditionState
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW

    ConditionState    = DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED

    ConditionState    = REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW REALLYDAMAGED RUBBLE
    
    ConditionState    = DOOR_1_OPENING
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End  
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
     

    ConditionState    = DOOR_1_OPENING DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
   End   
   AliasConditionState = NIGHT DOOR_1_OPENING DAMAGED
   AliasConditionState = SNOW DOOR_1_OPENING DAMAGED
   AliasConditionState = NIGHT SNOW DOOR_1_OPENING DAMAGED

    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_CLOSING
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    

    ConditionState    = DOOR_1_CLOSING DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING DAMAGED
    AliasConditionState = SNOW DOOR_1_CLOSING DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING DAMAGED

    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING REALLYDAMAGED RUBBLE

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBWarFact_A8
      Animation       = NBWarFact_A8.NBWarFact_A8
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End  
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
     

    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
      Model           = NBWarFact_A8D
      Animation       = NBWarFact_A8D.NBWarFact_A8D
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN DAMAGED
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN DAMAGED

    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
      Model           = NBWarFact_A8E
      Animation       = NBWarFact_A8E.NBWarFact_A8E
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
    
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBWarFact_A8
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBWarFact_A8D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
    
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBWarFact_A8E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED

    
    
    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
    
    
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5
      Animation       = NBWarFact_A5.NBWarFact_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5N
      Animation       = NBWarFact_A5N.NBWarFact_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End

    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5S
      Animation       = NBWarFact_A5S.NBWarFact_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBWarFact_A5SN
      Animation       = NBWarFact_A5SN.NBWarFact_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBWarFact_AB
      Animation       = NBWarFact_AB.NBWarFact_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBWarFact_ABN
      Animation       = NBWarFact_ABN.NBWarFact_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBWarFact_ABS
      Animation       = NBWarFact_ABS.NBWarFact_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBWarFact_ABSN
      Animation       = NBWarFact_ABSN.NBWarFact_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBWarFact_AB
      Animation       = NBWarFact_AB.NBWarFact_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBWarFact_ABN
      Animation       = NBWarFact_ABN.NBWarFact_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBWarFact_ABS
      Animation       = NBWarFact_ABS.NBWarFact_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBWarFact_ABSN
      Animation       = NBWarFact_ABSN.NBWarFact_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -135

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:WarFactory
  Side             = ChinaInfantryGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object = Infa_ChinaSupplyCenter
  End
  BuildCost        = 2000
  BuildTime        = 15.0           ; in seconds
  EnergyProduction = -1
  CommandSet       = Infa_ChinaWarFactoryCommandSet
  VisionRange      = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmor
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  ; *** AUDIO Parameters ***
  VoiceSelect = WarFactoryChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority   = STRUCTURE
  KindOf          = PRELOAD STRUCTURE SELECTABLE IMMOBILE REPAIR_PAD SCORE CAPTURABLE FS_FACTORY AUTO_RALLYPOINT MP_COUNT_FOR_VICTORY FS_WARFACTORY
  Body            = StructureBody ModuleTag_08
    MaxHealth       = 2000.0
    InitialHealth   = 2000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = DestroyDie ModuleTag_09
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_10
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_11
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior = ProductionUpdate ModuleTag_12
    NumDoorAnimations            = 1
    DoorOpeningTime              = 4000  ;in mSeconds
    DoorWaitOpenTime             = 2000  ;in mSeconds
    DoorCloseTime                = 5000  ;in mSeconds
    ConstructionCompleteDuration = 1500  ;in mSeconds
  End
  Behavior = DefaultProductionExitUpdate ModuleTag_13
    UnitCreatePoint   = X:  0.0  Y:-27.0   Z:0.0
    NaturalRallyPoint = X: 57.0  Y:-27.0   Z:0.0;NaturalRallyPointX must always match GeometryMajorRadius! -ML
  End
  Behavior = RepairDockUpdate ModuleTag_14
    TimeForFullHeal   = 5000   ;(in milliseconds)     
    NumberApproachPositions = 5
  End

  Behavior = FlammableUpdate ModuleTag_16
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_22
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = TransitionDamageFX ModuleTag_23
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaWarFactoryCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End
  
  Behavior = GrantUpgradeCreate ModuleTag_27
    UpgradeToGrant           = Upgrade_Nationalism
    ExemptStatus      = UNDER_CONSTRUCTION
  End

  Geometry            = BOX
  GeometryMajorRadius = 57.0
  GeometryMinorRadius = 61.0
  GeometryHeight      = 30.0
  GeometryIsSmall     = No
  FactoryExitWidth    = 25 
  Shadow          = SHADOW_VOLUME
  BuildCompletion = PLACED_BY_PLAYER

End






;------------------------------------------------------------------------------
Object Infa_ChinaPropagandaCenter

  ; *** ART Parameters ***
  SelectPortrait         = SNPropCentr_L
  ButtonImage            = SNPropCentr
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ;day
    ConditionState       = NONE
      Model              = NBPCenter
      Animation          = NBPCenter.NBPCenter
      AnimationMode      = LOOP
    End
    ConditionState       = DAMAGED
      Model              = NBPCenter_D
      Animation          = NBPCenter_D.NBPCenter_D
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBPCenter_E
      Animation          = NBPCenter_E.NBPCenter_E
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;     ParticleSysBone    = Spark01 
    End 

    ;night
    ConditionState       = NIGHT
      Model              = NBPCenter_N
      Animation          = NBPCenter_N.NBPCenter_N
      AnimationMode      = LOOP
    End
    ;damaged
    ConditionState       = DAMAGED NIGHT
      Model              = NBPCenter_DN
      Animation          = NBPCenter_DN.NBPCenter_DN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ;reallydamaged
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = NBPCenter_EN
      Animation          = NBPCenter_EN.NBPCenter_EN
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;      ParticleSysBone    = Spark01 
    End 

    ConditionState       = SNOW
      Model              = NBPCenter_S
      Animation          = NBPCenter_S.NBPCenter_S
      AnimationMode      = LOOP
    End
        ;damaged
    ConditionState       = DAMAGED SNOW
      Model              = NBPCenter_DS
      Animation          = NBPCenter_DS.NBPCenter_DS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ;reallydamaged
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = NBPCenter_ES
      Animation          = NBPCenter_ES.NBPCenter_ES
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;      ParticleSysBone    = Spark01 
    End 

    ;night
    ConditionState       = NIGHT SNOW
      Model              = NBPCenter_NS
      Animation          = NBPCenter_NS.NBPCenter_NS
      AnimationMode      = LOOP
    End
    ;damaged
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBPCenter_DNS
      Animation          = NBPCenter_DNS.NBPCenter_DNS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
    End
    ;reallydamaged
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = NBPCenter_ENS
      Animation          = NBPCenter_ENS.NBPCenter_ENS
      AnimationMode      = LOOP
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
;      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmolderingSmoke
      ParticleSysBone    = Smoke06 SmolderingSmoke
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 SmolderingFire
;      ParticleSysBone    = Spark01 
    End 
    
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBPCenter
      Animation          = NBPCenter.NBPCenter
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBPCenter_D
      Animation          = NBPCenter_D.NBPCenter_D
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBPCenter_E
      Animation          = NBPCenter_E.NBPCenter_E
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBPCenter_N
      Animation          = NBPCenter_N.NBPCenter_N
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBPCenter_DN
      Animation          = NBPCenter_DN.NBPCenter_DN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBPCenter_EN
      Animation          = NBPCenter_EN.NBPCenter_EN
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBPCenter_S
      Animation          = NBPCenter_S.NBPCenter_S
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBPCenter_DS
      Animation          = NBPCenter_DS.NBPCenter_DS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBPCenter_ES
      Animation          = NBPCenter_ES.NBPCenter_ES
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBPCenter_NS
      Animation          = NBPCenter_NS.NBPCenter_NS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBPCenter_DNS
      Animation          = NBPCenter_DNS.NBPCenter_DNS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBPCenter_ENS
      Animation          = NBPCenter_ENS.NBPCenter_ENS
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************




  End  
 
  ; ----------------- the factory door -------------------
  Draw                = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
    End
    AliasConditionState = NIGHT 
    AliasConditionState = SNOW
    AliasConditionState = NIGHT SNOW
    AliasConditionState = NIGHT DAMAGED
    AliasConditionState = SNOW DAMAGED
    AliasConditionState = NIGHT SNOW DAMAGED
    AliasConditionState = NIGHT REALLYDAMAGED
    AliasConditionState = SNOW REALLYDAMAGED
    AliasConditionState = NIGHT SNOW REALLYDAMAGED


    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED RUBBLE
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A1
      Flags           = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    AliasConditionState = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT SNOW DAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT REALLYDAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = SNOW REALLYDAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = NIGHT SNOW REALLYDAMAGED AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
    
;    ConditionState    = DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_FIRST
;    End
;    ConditionState    = REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_FIRST
;    End

    ConditionState    = DOOR_1_OPENING
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = ONCE
      Flags           = START_FRAME_FIRST
    End   
    AliasConditionState = NIGHT DOOR_1_OPENING
    AliasConditionState = SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DOOR_1_OPENING
    AliasConditionState = NIGHT DAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT REALLYDAMAGED DOOR_1_OPENING
    AliasConditionState = SNOW REALLYDAMAGED DOOR_1_OPENING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED DOOR_1_OPENING
    
    
;    ConditionState    = DOOR_1_OPENING DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = ONCE
;      Flags           = START_FRAME_FIRST
;    End   
;    ConditionState    = DOOR_1_OPENING REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = ONCE
;      Flags           = START_FRAME_FIRST
;    End

    ConditionState    = DOOR_1_CLOSING
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = ONCE_BACKWARDS
      Flags           = START_FRAME_LAST
    End   
    AliasConditionState = NIGHT DOOR_1_CLOSING
    AliasConditionState = SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DOOR_1_CLOSING
    AliasConditionState = NIGHT DAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT REALLYDAMAGED DOOR_1_CLOSING
    AliasConditionState = SNOW REALLYDAMAGED DOOR_1_CLOSING
    AliasConditionState = NIGHT SNOW REALLYDAMAGED DOOR_1_CLOSING
    
;    ConditionState    = DOOR_1_CLOSING DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = ONCE_BACKWARDS
;      Flags           = START_FRAME_LAST
;    End   
;    ConditionState    = DOOR_1_CLOSING REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = ONCE_BACKWARDS
;      Flags           = START_FRAME_LAST
;    End   

    ConditionState    = DOOR_1_WAITING_OPEN
      Model           = NBPCenter_A1
      Animation       = NBPCenter_A1.NBPCenter_A1
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
    End
    AliasConditionState = NIGHT DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW DAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT REALLYDAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = SNOW REALLYDAMAGED DOOR_1_WAITING_OPEN
    AliasConditionState = NIGHT SNOW REALLYDAMAGED DOOR_1_WAITING_OPEN
       
;    ConditionState    = DOOR_1_WAITING_OPEN DAMAGED
;      Model           = NBPCenter_A1D
;      Animation       = NBPCenter_A1D.NBPCenter_A1D
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_LAST
;    End   
;    ConditionState    = DOOR_1_WAITING_OPEN REALLYDAMAGED RUBBLE
;      Model           = NBPCenter_A1E
;      Animation       = NBPCenter_A1E.NBPCenter_A1E
;      AnimationMode   = MANUAL
;      Flags           = START_FRAME_LAST
;    End   
  End

  ; -------- spreading propaganda flashing lights ----------
  Draw = W3DModelDraw ModuleTag_03
    DefaultConditionState
      Model           = None
    End
    ConditionState    = SOLD
      Model           = NONE
    End    
    ConditionState    = SOLD SNOW
       Model          = NONE
    End   
    ConditionState    = SOLD NIGHT
       Model          = NONE
    End    
    ConditionState    = SOLD NIGHT SNOW
       Model          = NONE
    End   
    ConditionState    = CONSTRUCTION_COMPLETE
      Model           = NBPCenter_A2
      Animation       = NBPCenter_A2.NBPCenter_A2
      AnimationMode   = LOOP
      Flags           = START_FRAME_FIRST
    End  
  End
     
  ; ------------ construction-zone fence -----------------
  Draw                = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4
      Animation       = NBPCenter_A4.NBPCenter_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4N
      Animation       = NBPCenter_A4N.NBPCenter_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4S
      Animation       = NBPCenter_A4S.NBPCenter_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A4SN
      Animation       = NBPCenter_A4SN.NBPCenter_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBPCenter_A4
      Animation       = NBPCenter_A4.NBPCenter_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBPCenter_A4N
      Animation       = NBPCenter_A4N.NBPCenter_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBPCenter_A4S
      Animation       = NBPCenter_A4S.NBPCenter_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBPCenter_A4SN
      Animation       = NBPCenter_A4SN.NBPCenter_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPCenter_A4
      Animation       = NBPCenter_A4.NBPCenter_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPCenter_A4N
      Animation       = NBPCenter_A4N.NBPCenter_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPCenter_A4S
      Animation       = NBPCenter_A4S.NBPCenter_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPCenter_A4SN
      Animation       = NBPCenter_A4SN.NBPCenter_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw                = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6
      Animation       = NBPCenter_A6.NBPCenter_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6N
      Animation       = NBPCenter_A6N.NBPCenter_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6S
      Animation       = NBPCenter_A6S.NBPCenter_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBPCenter_A6SN
      Animation       = NBPCenter_A6SN.NBPCenter_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBPCenter_A6
      Animation       = NBPCenter_A6.NBPCenter_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBPCenter_A6N
      Animation       = NBPCenter_A6N.NBPCenter_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBPCenter_A6S
      Animation       = NBPCenter_A6S.NBPCenter_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBPCenter_A6SN
      Animation       = NBPCenter_A6SN.NBPCenter_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End 
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBPCenter_A6
      Animation       = NBPCenter_A6.NBPCenter_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBPCenter_A6N
      Animation       = NBPCenter_A6N.NBPCenter_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBPCenter_A6S
      Animation       = NBPCenter_A6S.NBPCenter_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBPCenter_A6SN
      Animation       = NBPCenter_A6SN.NBPCenter_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5
      Animation       = NBPCenter_A5.NBPCenter_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5N
      Animation       = NBPCenter_A5N.NBPCenter_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5S
      Animation       = NBPCenter_A5S.NBPCenter_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBPCenter_A5SN
      Animation       = NBPCenter_A5SN.NBPCenter_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBPCenter_AB
      Animation       = NBPCenter_AB.NBPCenter_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBPCenter_ABN
      Animation       = NBPCenter_ABN.NBPCenter_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBPCenter_ABS
      Animation       = NBPCenter_ABS.NBPCenter_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBPCenter_ABSN
      Animation       = NBPCenter_ABSN.NBPCenter_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBPCenter_AB
      Animation       = NBPCenter_AB.NBPCenter_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBPCenter_ABN
      Animation       = NBPCenter_ABN.NBPCenter_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBPCenter_ABS
      Animation       = NBPCenter_ABS.NBPCenter_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBPCenter_ABSN
      Animation       = NBPCenter_ABSN.NBPCenter_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle  = -45

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:PropagandaCenter
  Side                = ChinaInfantryGeneral
  EditorSorting       = STRUCTURE
  Prerequisites
    Object            = Infa_ChinaWarFactory
  End
  BuildCost           = 2000
  BuildTime           = 45.0           ; in seconds
  EnergyProduction    = -2
  VisionRange         = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions        = None
    Armor             = StructureArmor
    DamageFX          = StructureDamageFXNoShake
  End
  CommandSet          = Infa_ChinaPropagandaCenterCommandSet
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level


  ; *** AUDIO Parameters ***
  VoiceSelect         = PropagandaCenterSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE CAPTURABLE FS_TECHNOLOGY MP_COUNT_FOR_VICTORY FS_ADVANCED_TECH
  Body            = StructureBody ModuleTag_07
    MaxHealth     = 1000.0
    InitialHealth = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
  Behavior = ProductionUpdate ModuleTag_10
    ;<NO DATA>
  End
  Behavior = DestroyDie ModuleTag_12
    ;<NO DATA>
  End
  Behavior  = FXListDie ModuleTag_14
    DeathFX = FX_StructureMediumDeath
  End
  Behavior                = GenerateMinefieldBehavior ModuleTag_15
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior             = FlammableUpdate ModuleTag_17
    AflameDuration     = 5000    ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay  = 500     ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_18
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaPropagandaCenterCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 33.0
  GeometryMinorRadius = 57.0
  GeometryHeight      = 40.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End

;------------------------------------------------------------------------------
Object Infa_ChinaGattlingCannon

  ; *** ART Parameters ***
  SelectPortrait         = SNGatTower_L
  ButtonImage            = SNGatTower
  UpgradeCameo1           = Upgrade_ChinaChainGuns
  Draw                    = W3DModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes

;--------------------- IDLE --------------------------------------------------
;-------------------------------------------------------------------------------    
    
    ; DAY
    DefaultConditionState 
      Model               = NBGattling
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End
    ConditionState        = DAMAGED
      Model               = NBGattling_D
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = SmokeM01 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
    End
    ConditionState        = REALLYDAMAGED RUBBLE
      Model               = NBGattling_E
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End
        
    
    
    ; NIGHT    --------------------------------------------------------------- 
    ConditionState        = NIGHT
      Model               = NBGattling_N
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End
    ConditionState        = DAMAGED NIGHT
      Model               = NBGattling_DN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = SmokeM01 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
    End
    ConditionState        = REALLYDAMAGED RUBBLE NIGHT
      Model               = NBGattling_EN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End
    
    
    ;SNOW    --------------------------------------------------------------- 
    ConditionState         = SNOW
      Model               = NBGattling_S
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End
    
    ConditionState        = DAMAGED SNOW
      Model               = NBGattling_DS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = SmokeM01 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
    End
    
    ConditionState        = REALLYDAMAGED RUBBLE SNOW
      Model               = NBGattling_ES
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End
    

    ; NIGHT SNOW    --------------------------------------------------------------- 
    ConditionState         = NIGHT SNOW
      Model               = NBGattling_NS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
    End
    
    ConditionState        = DAMAGED NIGHT SNOW
      Model               = NBGattling_DNS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = SmokeM01 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
    End
    
    ConditionState        = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model               = NBGattling_ENS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = MANUAL
      Turret              = TURRET
      TurretPitch         = TURRETEL
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      WeaponFireFXBone    = SECONDARY Muzzle
      WeaponMuzzleFlash   = SECONDARY MuzzleFX
      ParticleSysBone     = Smoke01 SmokeFactionMedium
      ParticleSysBone     = Smoke02 SmokeFactionMedium
      ParticleSysBone     = Smoke03 SmokeFactionMedium
      ParticleSysBone     = SparkM01 SparksMedium
      ParticleSysBone     = SparkM02 SparksMedium
    End
    

    
;---------------- ATTACKING ----------------------------------
;-------------------------------------------------------------
   ; DAY   
   ConditionState        = ATTACKING
      Model               = NBGattling
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    ConditionState        = ATTACKING DAMAGED
      Model               = NBGattling_D
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    ConditionState        = ATTACKING REALLYDAMAGED
      Model               = NBGattling_E
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    
    
    ;NIGHT     ---------------------------------------------------------------
    ConditionState        = ATTACKING NIGHT
      Model               = NBGattling_N
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = ATTACKING DAMAGED NIGHT
      Model               = NBGattling_DN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = ATTACKING REALLYDAMAGED NIGHT
      Model               = NBGattling_EN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    
    
    
    ;SNOW     ---------------------------------------------------------------
    ConditionState        = ATTACKING SNOW
      Model               = NBGattling_S
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = ATTACKING DAMAGED SNOW
      Model               = NBGattling_DS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = ATTACKING REALLYDAMAGED SNOW
      Model               = NBGattling_ES
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    
    
    ;SNOW NIGHT  ---------------------------------------------------------------
    ConditionState        = ATTACKING NIGHT SNOW
      Model               = NBGattling_NS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = ATTACKING DAMAGED SNOW NIGHT
      Model               = NBGattling_DNS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = ATTACKING REALLYDAMAGED NIGHT SNOW
      Model               = NBGattling_ENS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.5 0.5 ;set this state to animate  s l o w l y
    End
    
;---------------- CONTINUOUS_FIRE_SLOW -----------------------
;-------------------------------------------------------------
   ; DAY   
   ConditionState        = CONTINUOUS_FIRE_SLOW ATTACKING
      Model               = NBGattling
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW DAMAGED ATTACKING
      Model               = NBGattling_D
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED ATTACKING
      Model               = NBGattling_E
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    
    
    ;NIGHT     ---------------------------------------------------------------
    ConditionState        = CONTINUOUS_FIRE_SLOW NIGHT ATTACKING
      Model               = NBGattling_N
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = CONTINUOUS_FIRE_SLOW DAMAGED NIGHT ATTACKING
      Model               = NBGattling_DN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED NIGHT ATTACKING
      Model               = NBGattling_EN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    
    
    
    ;SNOW     ---------------------------------------------------------------
    ConditionState        = CONTINUOUS_FIRE_SLOW SNOW ATTACKING
      Model               = NBGattling_S
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = CONTINUOUS_FIRE_SLOW DAMAGED SNOW ATTACKING
      Model               = NBGattling_DS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED SNOW ATTACKING
      Model               = NBGattling_ES
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    
    
    ;SNOW NIGHT  ---------------------------------------------------------------
    ConditionState        = CONTINUOUS_FIRE_SLOW NIGHT SNOW ATTACKING
      Model               = NBGattling_NS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = CONTINUOUS_FIRE_SLOW DAMAGED SNOW NIGHT ATTACKING
      Model               = NBGattling_DNS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    ConditionState        = CONTINUOUS_FIRE_SLOW REALLYDAMAGED NIGHT SNOW ATTACKING
      Model               = NBGattling_ENS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 0.8 0.8 ;set this state to animate  s l o w l y
    End
    
    
    
    
;------------- CONTINUOUS_FIRE_MEAN ------------------------
;-----------------------------------------------------------
    ;DAY
    ConditionState       = CONTINUOUS_FIRE_MEAN ATTACKING
      Model               = NBGattling
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
     ConditionState       = CONTINUOUS_FIRE_MEAN DAMAGED ATTACKING
      Model               = NBGattling_D
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState       = CONTINUOUS_FIRE_MEAN REALLYDAMAGED ATTACKING
      Model               = NBGattling_E
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    
    
    
    ;NIGHT    ---------------------------------------------------------------
    ConditionState       = CONTINUOUS_FIRE_MEAN NIGHT ATTACKING
      Model               = NBGattling_N
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState       = CONTINUOUS_FIRE_MEAN DAMAGED NIGHT ATTACKING
      Model               = NBGattling_DN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState        = CONTINUOUS_FIRE_MEAN REALLYDAMAGED NIGHT ATTACKING
      Model               = NBGattling_EN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    
    
    ;SNOW    ---------------------------------------------------------------
    ConditionState       = CONTINUOUS_FIRE_MEAN SNOW ATTACKING
      Model               = NBGattling_S
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState       = CONTINUOUS_FIRE_MEAN DAMAGED SNOW ATTACKING
      Model               = NBGattling_DS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED SNOW ATTACKING
      Model               = NBGattling_ES
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
      
    
    ;NIGHT SNOW ---------------------------------------------------------------
    ConditionState       = CONTINUOUS_FIRE_MEAN NIGHT SNOW ATTACKING
      Model               = NBGattling_NS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState       = CONTINUOUS_FIRE_MEAN DAMAGED SNOW NIGHT ATTACKING
      Model               = NBGattling_DNS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    ConditionState       = CONTINUOUS_FIRE_MEAN REALLYDAMAGED NIGHT SNOW ATTACKING
      Model               = NBGattling_ENS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 1.5 1.5 ;set this state to animate  medium-fast
    End
    





;------------- CONTINUOUS_FIRE_FAST ------------------------
    ;DAY  
    ConditionState        = CONTINUOUS_FIRE_FAST ATTACKING
      Model               = NBGattling
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST DAMAGED ATTACKING
      Model               = NBGattling_D
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED ATTACKING
      Model               = NBGattling_E
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    
    
    
    ;NIGHT     ---------------------------------------------------------------
    ConditionState        = CONTINUOUS_FIRE_FAST NIGHT ATTACKING
      Model               = NBGattling_N
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST DAMAGED NIGHT ATTACKING
      Model               = NBGattling_DN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
     ConditionState       = CONTINUOUS_FIRE_FAST REALLYDAMAGED NIGHT ATTACKING
      Model               = NBGattling_EN
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    
    
    ;SNOW      ---------------------------------------------------------------
    ConditionState        = CONTINUOUS_FIRE_FAST SNOW ATTACKING
      Model               = NBGattling_S
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST DAMAGED SNOW ATTACKING
      Model               = NBGattling_NS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState       = CONTINUOUS_FIRE_MEAN REALLYDAMAGED SNOW ATTACKING
      Model               = NBGattling_ES
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
    End
    
    
    ;NIGHT SNOW ---------------------------------------------------------------
    ConditionState        = CONTINUOUS_FIRE_FAST NIGHT SNOW ATTACKING
      Model               = NBGattling_NS
      Animation           = NBGattling_A2.NBGattling_A2

      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST DAMAGED SNOW NIGHT ATTACKING
      Model               = NBGattling_DNS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke
    End
    ConditionState        = CONTINUOUS_FIRE_FAST REALLYDAMAGED NIGHT SNOW ATTACKING
      Model               = NBGattling_ENS
      Animation           = NBGattling_A2.NBGattling_A2
      AnimationMode       = LOOP
      AnimationSpeedFactorRange = 3.0 3.0 ;set this state to animate  vryfst
      ParticleSysBone    = Muzzle01 GattlingMuzzleSmoke
      ParticleSysBone    = Muzzle02 GattlingMuzzleSmoke  
    End
    


    
       ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBGattling
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBGattling_D
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBGattling_E
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBGattling_N
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBGattling_DN
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBGattling_EN
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBGattling_S
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBGattling_DS
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBGattling_ES
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBGattling_NS
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBGattling_DNS
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBGattling_ENS
      Animation          = NBGattling_A2.NBGattling_A2
      AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    ;**************************************************************************************************************************
   
  End
  
  


  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No

    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBGattling_A4
      Animation       = NBGattling_A4.NBGattling_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBGattling_A4N
      Animation       = NBGattling_A4N.NBGattling_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBGattling_A4S
      Animation       = NBGattling_A4S.NBGattling_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBGattling_A4SN
      Animation       = NBGattling_A4SN.NBGattling_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBGattling_A4
      Animation       = NBGattling_A4.NBGattling_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBGattling_A4N
      Animation       = NBGattling_A4N.NBGattling_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBGattling_A4S
      Animation       = NBGattling_A4S.NBGattling_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBGattling_A4SN
      Animation       = NBGattling_A4SN.NBGattling_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBGattling_A4
      Animation       = NBGattling_A4.NBGattling_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBGattling_A4N
      Animation       = NBGattling_A4N.NBGattling_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBGattling_A4S
      Animation       = NBGattling_A4S.NBGattling_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBGattling_A4SN
      Animation       = NBGattling_A4SN.NBGattling_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBGattling_A6
      Animation       = NBGattling_A6.NBGattling_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBGattling_A6N
      Animation       = NBGattling_A6N.NBGattling_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBGattling_A6S
      Animation       = NBGattling_A6S.NBGattling_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBGattling_A6SN
      Animation       = NBGattling_A6SN.NBGattling_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBGattling_A6
      Animation       = NBGattling_A6.NBGattling_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBGattling_A6N
      Animation       = NBGattling_A6N.NBGattling_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBGattling_A6S
      Animation       = NBGattling_A6S.NBGattling_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBGattling_A6SN
      Animation       = NBGattling_A6SN.NBGattling_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBGattling_A6
      Animation       = NBGattling_A6.NBGattling_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBGattling_A6N
      Animation       = NBGattling_A6N.NBGattling_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBGattling_A6S
      Animation       = NBGattling_A6S.NBGattling_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBGattling_A6SN
      Animation       = NBGattling_A6SN.NBGattling_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:GattlingCannon
  Side             = ChinaInfantryGeneral
  EditorSorting    = STRUCTURE
  Prerequisites
    Object         = Infa_ChinaPowerPlant
  End
  BuildCost        = 1200
  BuildTime        = 25.0           ; in seconds
  EnergyProduction = -3

  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY GattlingBuildingGun
    AutoChooseSources   = PRIMARY FROM_PLAYER FROM_AI FROM_SCRIPT
    Weapon              = SECONDARY GattlingBuildingGunAir
    AutoChooseSources   = SECONDARY FROM_PLAYER FROM_AI FROM_SCRIPT
    PreferredAgainst    = SECONDARY BALLISTIC_MISSILE AIRCRAFT
  End
  
  VisionRange      = 360.0           ; Shroud clearing distance AND targeting range
  ShroudClearingRange = 360
  
  ArmorSet
    Conditions     = None
    Armor          = BaseDefenseArmor
    DamageFX       = StructureDamageFXNoShake
  End
  CommandSet       = ChinaGattlingCannonCommandSet

  ;Behavior = AIUpdateInterface ModuleTag_20
  ;  AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS
  ;  MoodAttackCheckRate        = 250
  ;End

  ; *** AUDIO Parameters ***
  VoiceSelect      = GattlingCannonSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
    VoiceRapidFire        = NoSound
  End

  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;These aren't playing properly (mdp) TurretMoveLoopLoud
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT IMMOBILE SCORE FS_BASE_DEFENSE POWERED IMMUNE_TO_CAPTURE
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = StealthDetectorUpdate ModuleTag_13
    DetectionRate     = 500   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange   = 200   ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_04
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = AIUpdateInterface ModuleTag_06
    Turret
      ControlledWeaponSlots = PRIMARY SECONDARY
      TurretTurnRate      = 180   // turn rate, in degrees per sec
      TurretPitchRate     = 180
      AllowsPitch         = Yes
      FiresWhileTurning   = Yes
      NaturalTurretPitch  = 45 ; this keeps it aimed half way between land and sky
      MinIdleScanInterval   = 250    ; in milliseconds
      MaxIdleScanInterval   = 250   ; in milliseconds
      MinIdleScanAngle      = 0       ; in degrees off the natural turret angle
      MaxIdleScanAngle      = 360     ; in degrees off the natural turret angle
    End
    AutoAcquireEnemiesWhenIdle = Yes ;ATTACK_BUILDINGS; defensive weapon
    MoodAttackCheckRate        = 250
  End

  Behavior = ProductionUpdate ModuleTag_07
    ; nothing, but is required if we have any Object-level Upgrades!
  End

  Behavior             = DestroyDie ModuleTag_08
    ;nothing
  End
  Behavior             = FXListDie ModuleTag_09
    DeathFX       = FX_StructureTinyDeath
  End

  Behavior = ProductionUpdate ModuleTag_10
    ; nothing
  End
  
  Behavior        = CreateObjectDie ModuleTag_11
    CreationList  = OCL_LargeStructureDebris
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_14
    ;-------------DESIGNED FOR TINY SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionTinySmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionTinyExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionTinyShockwave
  End

  Behavior = WeaponBonusUpgrade ModuleTag_15
    TriggeredBy = Upgrade_ChinaChainGuns
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = ChinaGattlingCannonCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  Geometry            = BOX
  GeometryMajorRadius = 8.0
  GeometryMinorRadius = 8.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End









;------------------------------------------------------------------------------
Object Infa_ChinaInternetCenter

  ; *** ART Parameters ***
  
  ; ------------ the main building itself -----------------
  SelectPortrait         = SNIntCnt_L
  ButtonImage            = SNIntCnt
  UpgradeCameo1 = Upgrade_ChinaSatelliteHackOne
  UpgradeCameo2 = Upgrade_ChinaSatelliteHackTwo

  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
    
    ; DAY ************************************
    DefaultConditionState
      Model              = NBINTCNT
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState = USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2
      Animation = NBINTCNT_A2.NBINTCNT_A2
      AnimationMode = ONCE
    End

    ConditionState = USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2F
      Animation = NBINTCNT_A2F.NBINTCNT_A2F
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED
      Model              = NBINTCNT_D
    End

    ConditionState = DAMAGED USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2D
      Animation = NBINTCNT_A2D.NBINTCNT_A2D
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FD
      Animation = NBINTCNT_A2FD.NBINTCNT_A2FD
      AnimationMode = ONCE
    End

    ConditionState       = REALLYDAMAGED
      Model              = NBINTCNT_E
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End
    AliasConditionState = RUBBLE

    ConditionState = REALLYDAMAGED USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2E
      Animation = NBINTCNT_A2E.NBINTCNT_A2E
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE USER_1

    ConditionState = REALLYDAMAGED USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FE
      Animation = NBINTCNT_A2FE.NBINTCNT_A2FE
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE USER_1 USER_2

    ;NIGHT ***********************************
    ConditionState       = NIGHT
      Model              = NBINTCNT_N
    End

    ConditionState = NIGHT USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2N
      Animation = NBINTCNT_A2N.NBINTCNT_A2N
      AnimationMode = ONCE
    End

    ConditionState = NIGHT USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FN
      Animation = NBINTCNT_A2FN.NBINTCNT_A2FN
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED NIGHT
      Model              = NBINTCNT_DN
    End

    ConditionState = DAMAGED NIGHT USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2DN
      Animation = NBINTCNT_A2DN.NBINTCNT_A2DN
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED NIGHT USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FDN
      Animation = NBINTCNT_A2FDN.NBINTCNT_A2FDN
      AnimationMode = ONCE
    End

    ConditionState    = REALLYDAMAGED NIGHT
      Model           = NBINTCNT_EN
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End
    AliasConditionState = RUBBLE NIGHT

    ConditionState = REALLYDAMAGED NIGHT USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2EN
      Animation = NBINTCNT_A2EN.NBINTCNT_A2EN
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT USER_1

    ConditionState = REALLYDAMAGED NIGHT USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FEN
      Animation = NBINTCNT_A2FEN.NBINTCNT_A2FEN
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT USER_1 USER_2
    
    ;SNOW *************************************
    ConditionState       = SNOW
      Model              = NBINTCNT_S
    End

    ConditionState = SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2S
      Animation = NBINTCNT_A2S.NBINTCNT_A2S
      AnimationMode = ONCE
    End

    ConditionState = SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FS
      Animation = NBINTCNT_A2FS.NBINTCNT_A2FS
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED SNOW
      Model              = NBINTCNT_DS
    End

    ConditionState = DAMAGED SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2DS
      Animation = NBINTCNT_A2DS.NBINTCNT_A2DS
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FDS
      Animation = NBINTCNT_A2FDS.NBINTCNT_A2FDS
      AnimationMode = ONCE
    End

    ConditionState       = REALLYDAMAGED SNOW
      Model              = NBINTCNT_ES
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End
    AliasConditionState = RUBBLE SNOW

    ConditionState = REALLYDAMAGED SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2ES
      Animation = NBINTCNT_A2ES.NBINTCNT_A2ES
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE SNOW USER_1

    ConditionState = REALLYDAMAGED SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FES
      Animation = NBINTCNT_A2FES.NBINTCNT_A2FES
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE SNOW USER_1 USER_2

    ;NIGHT SNOW *****************************
    ConditionState       = NIGHT SNOW
      Model              = NBINTCNT_NS
    End

    ConditionState = NIGHT SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2NS
      Animation = NBINTCNT_A2NS.NBINTCNT_A2NS
      AnimationMode = ONCE
    End

    ConditionState = NIGHT SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FNS
      Animation = NBINTCNT_A2FNS.NBINTCNT_A2FNS
      AnimationMode = ONCE
    End

    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBINTCNT_DNS
    End

    ConditionState = DAMAGED NIGHT SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2DNS
      Animation = NBINTCNT_A2DNS.NBINTCNT_A2DNS
      AnimationMode = ONCE
    End

    ConditionState = DAMAGED NIGHT SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FDNS
      Animation = NBINTCNT_A2FDNS.NBINTCNT_A2FDNS
      AnimationMode = ONCE
    End

    ConditionState    = REALLYDAMAGED NIGHT SNOW
      Model           = NBINTCNT_ENS
      ParticleSysBone    = Smoke01 SmolderingSmoke
      ParticleSysBone    = Smoke02 SmolderingSmoke
      ParticleSysBone    = Smoke03 SmolderingSmoke
      ParticleSysBone    = Smoke04 SmolderingSmoke
      ParticleSysBone    = Smoke05 SmokeFactionLarge
      ParticleSysBone    = Smoke06 SmokeFactionLarge
      ParticleSysBone    = Fire01 SmolderingFire
      ParticleSysBone    = Fire02 SmolderingFire
      ParticleSysBone    = Fire03 FireFactionLarge
    End   
    AliasConditionState = RUBBLE NIGHT SNOW

    ConditionState = REALLYDAMAGED NIGHT SNOW USER_1   ; User 1 is set by an upgrade module.  First doors opening
      Model = NBINTCNT_A2ENS
      Animation = NBINTCNT_A2ENS.NBINTCNT_A2ENS
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT SNOW USER_1

    ConditionState = REALLYDAMAGED NIGHT SNOW USER_1 USER_2   ; Second doors opening (Can't get the second without the first)
      Model = NBINTCNT_A2FENS
      Animation = NBINTCNT_A2FENS.NBINTCNT_A2FENS
      AnimationMode = ONCE
    End
    AliasConditionState = RUBBLE NIGHT SNOW USER_1 USER_2
    
    ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBINTCNT
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBINTCNT_D
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBINTCNT_E
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBINTCNT_N
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBINTCNT_DN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBINTCNT_EN
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBINTCNT_S
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBINTCNT_DS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBINTCNT_ES
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBINTCNT_NS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBINTCNT_DNS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBINTCNT_ENS
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD  USER_1 USER_2
    AliasConditionState  = SOLD DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT USER_1 USER_2
    AliasConditionState  = SOLD NIGHT DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD SNOW USER_1 USER_2
    AliasConditionState  = SOLD SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD SNOW REALLYDAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT SNOW USER_1 USER_2
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED USER_1 USER_2
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED USER_1 USER_2
    ;**************************************************************************************************************************
  End

  ; ------------ Fan in back --------------
  Draw = W3DModelDraw ModuleTag_02
    DefaultConditionState
      Model           = NBINTCNT_F
      Animation = NBINTCNT_F.NBINTCNT_F
      AnimationMode = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
  End



  ; ------------- First Satellite -----------
  Draw = W3DModelDraw ModuleTag_03
    ConditionState = NONE
      Model           = None
      TransitionKey = Trans_Down
    End
    AliasConditionState = SOLD
    AliasConditionState = AWAITING_CONSTRUCTION
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1

    ConditionState = DAMAGED
      Model           = None
      TransitionKey = Trans_Down_Damaged
    End
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 DAMAGED

    ConditionState = REALLYDAMAGED
      Model           = None
      TransitionKey = Trans_Down_Really_Damaged
    End
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 REALLYDAMAGED


    TransitionState = Trans_Down Trans_Up
      Model           = NBINTCNT_AB
      Animation = NBINTCNT_AB.NBINTCNT_AB
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Damaged Trans_Up_Damaged
      Model           = NBINTCNT_DAB
      Animation = NBINTCNT_DAB.NBINTCNT_DAB
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Really_Damaged Trans_Up_Really_Damaged
      Model           = NBINTCNT_EAB
      Animation = NBINTCNT_EAB.NBINTCNT_EAB
      AnimationMode = ONCE
    End


    ConditionState = USER_1
      Model           = NBINTCNT_AC
      Animation = NBINTCNT_AC.NBINTCNT_AC
      AnimationMode = LOOP
      TransitionKey = Trans_Up
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState = USER_1 DAMAGED
      Model           = NBINTCNT_DAC
      Animation = NBINTCNT_DAC.NBINTCNT_DAC
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End

    ConditionState = USER_1 REALLYDAMAGED
      Model           = NBINTCNT_EAC
      Animation = NBINTCNT_EAC.NBINTCNT_EAC
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Really_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End


    TransitionState = Trans_Up Trans_Down
      Model           = NBINTCNT_AB
      Animation = NBINTCNT_AB.NBINTCNT_AB
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Damaged Trans_Down_Damaged
      Model           = NBINTCNT_DAB
      Animation = NBINTCNT_DAB.NBINTCNT_DAB
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Really_Damaged Trans_Down_Really_Damaged
      Model           = NBINTCNT_EAB
      Animation = NBINTCNT_EAB.NBINTCNT_EAB
      AnimationMode = ONCE_BACKWARDS
    End
  End

  ; ------------- Second Satellite -----------
  Draw = W3DModelDraw ModuleTag_04
    ConditionState = NONE
      Model           = None
      TransitionKey = Trans_Down
    End
    AliasConditionState = SOLD
    AliasConditionState = AWAITING_CONSTRUCTION
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1

    ConditionState = DAMAGED
      Model           = None
      TransitionKey = Trans_Down_Damaged
    End
    AliasConditionState = SOLD DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED DAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 DAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 DAMAGED

    ConditionState = REALLYDAMAGED
      Model           = None
      TransitionKey = Trans_Down_Really_Damaged
    End
    AliasConditionState = SOLD REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
    AliasConditionState = AWAITING_CONSTRUCTION USER_1 REALLYDAMAGED
    AliasConditionState = ACTIVELY_BEING_CONSTRUCTED USER_1 REALLYDAMAGED


    TransitionState = Trans_Down Trans_Up
      Model           = NBINTCNT_AF
      Animation = NBINTCNT_AF.NBINTCNT_AF
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Damaged Trans_Up_Damaged
      Model           = NBINTCNT_DAF
      Animation = NBINTCNT_DAF.NBINTCNT_DAF
      AnimationMode = ONCE
    End
    TransitionState = Trans_Down_Really_Damaged Trans_Up_Really_Damaged
      Model           = NBINTCNT_EAF
      Animation = NBINTCNT_EAF.NBINTCNT_EAF
      AnimationMode = ONCE
    End

    ConditionState = USER_2
      Model           = NBINTCNT_AG
      Animation = NBINTCNT_AG.NBINTCNT_AG
      AnimationMode = LOOP
      TransitionKey = Trans_Up
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState = USER_2 DAMAGED
      Model           = NBINTCNT_DAG
      Animation = NBINTCNT_DAG.NBINTCNT_DAG
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End
    ConditionState = USER_2 REALLYDAMAGED
      Model           = NBINTCNT_EAG
      Animation = NBINTCNT_EAG.NBINTCNT_EAG
      AnimationMode = LOOP
      TransitionKey = Trans_Up_Really_Damaged
      Flags = MAINTAIN_FRAME_ACROSS_STATES
    End

    TransitionState = Trans_Up Trans_Down
      Model           = NBINTCNT_AF
      Animation = NBINTCNT_AF.NBINTCNT_AF
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Damaged Trans_Down_Damaged
      Model           = NBINTCNT_DAF
      Animation = NBINTCNT_DAF.NBINTCNT_DAF
      AnimationMode = ONCE_BACKWARDS
    End
    TransitionState = Trans_Up_Really_Damaged Trans_Down_Really_Damaged
      Model           = NBINTCNT_EAF
      Animation = NBINTCNT_EAF.NBINTCNT_EAF
      AnimationMode = ONCE_BACKWARDS
    End

  End

  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_05
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A4
      Animation       = NBSupCent_A4.NBSupCent_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4N
      Animation       = NBSupCent_A4N.NBSupCent_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A4S
      Animation       = NBSupCent_A4S.NBSupCent_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A4SN
      Animation       = NBSupCent_A4SN.NBSupCent_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_06
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Dust01 BuildingDustChina
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
      ParticleSysBone = Smoke05 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Dust01 BuildingSnowDust
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
      ParticleSysBone = Smoke05 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Dust01 BuildingNightSnowDust
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke05 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBSupCent_A6
      Animation       = NBSupCent_A6.NBSupCent_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End    
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6N
      Animation       = NBSupCent_A6N.NBSupCent_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBSupCent_A6S
      Animation       = NBSupCent_A6S.NBSupCent_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBSupCent_A6SN
      Animation       = NBSupCent_A6SN.NBSupCent_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_07
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5
      Animation       = NBSupCent_A5.NBSupCent_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5N
      Animation       = NBSupCent_A5N.NBSupCent_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5S
      Animation       = NBSupCent_A5S.NBSupCent_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBSupCent_A5SN
      Animation       = NBSupCent_A5SN.NBSupCent_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBSupCent_AB
      Animation       = NBSupCent_AB.NBSupCent_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABN
      Animation       = NBSupCent_ABN.NBSupCent_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBSupCent_ABS
      Animation       = NBSupCent_ABS.NBSupCent_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBSupCent_ABSN
      Animation       = NBSupCent_ABSN.NBSupCent_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  DisplayName       = OBJECT:InternetCenter
  Side              = ChinaInfantryGeneral
  EditorSorting     = STRUCTURE
  BuildCost         = 2500
  BuildTime         = 30.0           ; in seconds
  EnergyProduction  = 0  
  CommandSet        = Infa_ChinaInternetCenterCommandSetOne
  VisionRange       = 200.0           ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorInternetCenter
    DamageFX        = StructureDamageFXNoShake
  End
  ExperienceValue     = 200 200 200 200  ; Experience point value at each level

  Prerequisites
    Object            = Infa_ChinaWarFactory
  End


  ;*******************************************************************************************************************
  MaxSimultaneousOfType = 1 ; *** Kris: DO NOT INCREASE THIS NUMBER -- UNLESS YOU WANT TO INTRODUCE A LOT OF BUGS! ***
  ;*******************************************************************************************************************

  ; *** AUDIO Parameters ***
  VoiceSelect       = CommandCenterChinaSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority     = STRUCTURE
  KindOf            = PRELOAD STRUCTURE SELECTABLE IMMOBILE SCORE IMMUNE_TO_CAPTURE MP_COUNT_FOR_VICTORY CAN_ATTACK FS_INTERNET_CENTER

  Body              = StructureBody ModuleTag_08
    MaxHealth       = 2500.0
    InitialHealth   = 2500.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 2700
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End

  Behavior = InternetHackContain ModuleTag_10 ; Contain module that gives aiHackInternet command to passengers
    PassengersAllowedToFire = No
    Slots                 = 8
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50%
    AllowInsideKindOf     = MONEY_HACKER
    ExitDelay         = 500
    NumberOfExitPaths = 1 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = No ; AI Will tell people to set their mood to Aggressive on exiting
  End

  Behavior             = DestroyDie ModuleTag_12
    ;nothing
  End
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureMediumDeath
  End

  Behavior         = SpyVisionUpdate ModuleTag_15
    NeedsUpgrade  = Yes
    SelfPowered   = Yes        ; No SpecialPower module, turns self on and off on timers (No timers means always on)
    SpyOnKindof   = COMMANDCENTER ; Defaults to ALL
    TriggeredBy   = Upgrade_ChinaSatelliteHackOne
  End

  Behavior         = SpyVisionUpdate ModuleTag_16
    NeedsUpgrade  = Yes
    SelfPowered   = Yes         ; No SpecialPower module, turns self on and off on timers
    SelfPoweredDuration = 20000
    SelfPoweredInterval = 240000
    TriggeredBy   = Upgrade_ChinaSatelliteHackTwo
  End

  Behavior = ArmorUpgrade ModuleTag_30
    TriggeredBy = Upgrade_ChinaEMPMines
  End
  Behavior = CommandSetUpgrade ModuleTag_31
    CommandSet = Infa_ChinaInternetCenterCommandSetOneUpgrade
    TriggeredBy = Upgrade_ChinaMines

    CommandSetAlt = Infa_ChinaInternetCenterCommandSetTwoUpgrade
    TriggerAlt = Upgrade_ChinaSatelliteHackOne
  End
  Behavior = CommandSetUpgrade ModuleTag_32
    CommandSet = Infa_ChinaInternetCenterCommandSetTwo
    TriggeredBy = Upgrade_ChinaSatelliteHackOne

    CommandSetAlt = Infa_ChinaInternetCenterCommandSetTwoUpgrade
    TriggerAlt = Upgrade_ChinaMines
  End

  Behavior = ModelConditionUpgrade ModuleTag_18
    ConditionFlag = USER_1
    TriggeredBy = Upgrade_ChinaSatelliteHackOne
  End

  Behavior = ModelConditionUpgrade ModuleTag_19
    ConditionFlag = USER_2
    TriggeredBy   = Upgrade_ChinaSatelliteHackTwo
  End

  Behavior = ProductionUpdate ModuleTag_22
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_23
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End


  Behavior = FlammableUpdate ModuleTag_24
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Behavior = TransitionDamageFX ModuleTag_25
    ;-------------DESIGNED FOR MEDIUM SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionMediumSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionMediumExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionMediumShockwave
  End

  Geometry            = BOX
  GeometryMajorRadius = 50.0
  GeometryMinorRadius = 50.0
  GeometryHeight      = 36.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End






;------------------------------------------------------------------------------
Object Infa_ChinaBunker

  ; *** ART Parameters ***
  SelectPortrait         = SNSuperBunk_L
  ButtonImage            = SNSuperBunk
  Draw                   = W3DModelDraw ModuleTag_01
    OkToChangeModelColor = Yes
   
   
    ;day
    ConditionState       = NONE
      Model              = NBBunkerI
    End
    ConditionState       = DAMAGED
      Model              = NBBunkerI_D
        ParticleSysBone      = Fire01  SmolderingFire
        ParticleSysBone      = Smoke01 SmolderingSmoke
        ParticleSysBone      = Fire01  SmolderingFlameCore
        ParticleSysBone      = Fire02  SmolderingFire
        ParticleSysBone      = Smoke02 SmolderingSmoke
        ParticleSysBone      = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE
      Model              = NBBunkerI_E
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    ConditionState       = GARRISONED
      Model              = NBBunkerI_G
    End
    ConditionState       = DAMAGED GARRISONED
      Model              = NBBunkerI_DG
        ParticleSysBone      = Fire01  SmolderingFire
        ParticleSysBone      = Smoke01 SmolderingSmoke
        ParticleSysBone      = Fire01  SmolderingFlameCore
        ParticleSysBone      = Fire02  SmolderingFire
        ParticleSysBone      = Smoke02 SmolderingSmoke
        ParticleSysBone      = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE GARRISONED
      Model              = NBBunkerI_EG
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    
    
    ConditionState       = SNOW
      Model              = NBBunkerI_S
    End
    ConditionState       = DAMAGED SNOW
      Model              = NBBunkerI_DS
        ParticleSysBone      = Fire01  SmolderingFire
        ParticleSysBone      = Smoke01 SmolderingSmoke
        ParticleSysBone      = Fire01  SmolderingFlameCore
        ParticleSysBone      = Fire02  SmolderingFire
        ParticleSysBone      = Smoke02 SmolderingSmoke
        ParticleSysBone      = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW
      Model              = NBBunkerI_ES
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    
    ConditionState       = SNOW GARRISONED
      Model              = NBBunkerI_SG
    End
    ConditionState       = DAMAGED SNOW GARRISONED
      Model              = NBBunkerI_DSG
        ParticleSysBone      = Fire01  SmolderingFire
        ParticleSysBone      = Smoke01 SmolderingSmoke
        ParticleSysBone      = Fire01  SmolderingFlameCore
        ParticleSysBone      = Fire02  SmolderingFire
        ParticleSysBone      = Smoke02 SmolderingSmoke
        ParticleSysBone      = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE SNOW GARRISONED
      Model              = NBBunkerI_ESG
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    



   ;night
    ConditionState       = NIGHT
      Model              = NBBunkerI_N
    End
    ConditionState       = DAMAGED NIGHT
      Model              = NBBunkerI_DN
      ParticleSysBone        = Fire01  SmolderingFire
      ParticleSysBone        = Smoke01 SmolderingSmoke
      ParticleSysBone        = Fire01  SmolderingFlameCore
      ParticleSysBone        = Fire02  SmolderingFire
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT
      Model              = NBBunkerI_EN
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    ;night
    ConditionState       = NIGHT GARRISONED
      Model              = NBBunkerI_NG
    End
    ConditionState       = DAMAGED NIGHT GARRISONED
      Model              = NBBunkerI_DNG
      ParticleSysBone        = Fire01  SmolderingFire
      ParticleSysBone        = Smoke01 SmolderingSmoke
      ParticleSysBone        = Fire01  SmolderingFlameCore
      ParticleSysBone        = Fire02  SmolderingFire
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT GARRISONED
      Model              = NBBunkerI_ENG
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    
    
    
    ;night snow
    ConditionState       = NIGHT SNOW
      Model              = NBBunkerI_NS
    End
    ConditionState       = DAMAGED NIGHT SNOW
      Model              = NBBunkerI_DNS
      ParticleSysBone        = Fire01  SmolderingFire
      ParticleSysBone        = Smoke01 SmolderingSmoke
      ParticleSysBone        = Fire01  SmolderingFlameCore
      ParticleSysBone        = Fire02  SmolderingFire
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW
      Model              = NBBunkerI_ENS
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    
       ;night snow
    ConditionState       = NIGHT SNOW GARRISONED
      Model              = NBBunkerI_NSG
    End
    ConditionState       = DAMAGED NIGHT SNOW GARRISONED
      Model              = NBBunkerI_DNSG
      ParticleSysBone        = Fire01  SmolderingFire
      ParticleSysBone        = Smoke01 SmolderingSmoke
      ParticleSysBone        = Fire01  SmolderingFlameCore
      ParticleSysBone        = Fire02  SmolderingFire
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Fire02  SmolderingFlameCore
    End
    ConditionState       = REALLYDAMAGED RUBBLE NIGHT SNOW GARRISONED
      Model              = NBBunkerI_ENSG
      ParticleSysBone        = Fire01 SmolderingFire
      ParticleSysBone        = Fire01 SmolderingFlameCore
      ParticleSysBone        = Fire02 SmolderingFire
      ParticleSysBone        = Fire02 SmolderingFlameCore
      ParticleSysBone        = Fire03 SmolderingFire
      ParticleSysBone        = Fire03 SmolderingFlameCore
      ParticleSysBone        = Fire04 SmolderingFire
      ParticleSysBone        = Fire04 SmolderingFlameCore
      ParticleSysBone        = Fire05 SmolderingFire
      ParticleSysBone        = Fire05 SmolderingFlameCore
      ParticleSysBone        = Smoke01  SmolderingSmoke
      ParticleSysBone        = Smoke02 SmolderingSmoke
      ParticleSysBone        = Smoke03 SmolderingSmoke
      ParticleSysBone        = Smoke04 SmolderingSmoke
      ParticleSysBone        = Smoke05 SmolderingSmoke
    End
    
    
        ;**************************************************************************************************************************
    ;This block handles every possible case with construction process, selling process, awaiting construction, and sold states
    ;for this draw module
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model              = NBBunkerI
      ;Animation          = NBBunkerI.NBBunkerI
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED DAMAGED
      Model              = NBBunkerI_D
      ;Animation          = NBBunkerI_D.NBBunkerI_D
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED REALLYDAMAGED
      Model              = NBBunkerI_E
      ;Animation          = NBBunkerI_E.NBBunkerI_E
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT
      Model              = NBBunkerI_N
      ;Animation          = NBBunkerI_N.NBBunkerI_N
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT DAMAGED
      Model              = NBBunkerI_DN
      ;Animation          = NBBunkerI_DN.NBBunkerI_DN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT REALLYDAMAGED
      Model              = NBBunkerI_EN
      ;Animation          = NBBunkerI_EN.NBBunkerI_EN
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW
      Model              = NBBunkerI_S
      ;Animation          = NBBunkerI_S.NBBunkerI_S
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW DAMAGED
      Model              = NBBunkerI_DS
      ;Animation          = NBBunkerI_DS.NBBunkerI_DS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED SNOW REALLYDAMAGED
      Model              = NBBunkerI_ES
      ;Animation          = NBBunkerI_ES.NBBunkerI_ES
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW
      Model              = NBBunkerI_NS
      ;Animation          = NBBunkerI_NS.NBBunkerI_NS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW DAMAGED
      Model              = NBBunkerI_DNS
      ;Animation          = NBBunkerI_DNS.NBBunkerI_DNS
      ;AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End
    ConditionState       = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED NIGHT SNOW REALLYDAMAGED
      Model              = NBBunkerI_ENS
     ; Animation          = NBBunkerI_ENS.NBBunkerI_ENS
     ; AnimationMode      = LOOP
      Flags              = ADJUST_HEIGHT_BY_CONSTRUCTION_PERCENT
    End

    ConditionState       = AWAITING_CONSTRUCTION 
      Model              = NONE
    End
    AliasConditionState  = AWAITING_CONSTRUCTION DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION SNOW REALLYDAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW DAMAGED
    AliasConditionState  = AWAITING_CONSTRUCTION NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD 
    AliasConditionState  = SOLD DAMAGED
    AliasConditionState  = SOLD REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT
    AliasConditionState  = SOLD NIGHT DAMAGED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED
    AliasConditionState  = SOLD SNOW
    AliasConditionState  = SOLD SNOW DAMAGED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED
    AliasConditionState  = SOLD NIGHT SNOW
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED
    AliasConditionState  = SOLD GARRISONED
    AliasConditionState  = SOLD DAMAGED GARRISONED
    AliasConditionState  = SOLD REALLYDAMAGED GARRISONED
    AliasConditionState  = SOLD NIGHT GARRISONED
    AliasConditionState  = SOLD NIGHT DAMAGED GARRISONED
    AliasConditionState  = SOLD NIGHT REALLYDAMAGED GARRISONED
    AliasConditionState  = SOLD SNOW GARRISONED
    AliasConditionState  = SOLD SNOW DAMAGED GARRISONED
    AliasConditionState  = SOLD SNOW REALLYDAMAGED GARRISONED
    AliasConditionState  = SOLD NIGHT SNOW GARRISONED
    AliasConditionState  = SOLD NIGHT SNOW DAMAGED GARRISONED
    AliasConditionState  = SOLD NIGHT SNOW REALLYDAMAGED GARRISONED
    ;**************************************************************************************************************************

    
  End  
    
  ; ------------ construction-zone fence -----------------
  Draw = W3DModelDraw ModuleTag_02
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A4
      Animation       = NBBunker_A4.NBBunker_A4
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
    End
    ConditionState    = NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A4N
      Animation       = NBBunker_A4N.NBBunker_A4N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
    End
    ConditionState    = SNOW AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A4S
      Animation       = NBBunker_A4S.NBBunker_A4S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
    End
    ConditionState    = SNOW NIGHT AWAITING_CONSTRUCTION PARTIALLY_CONSTRUCTED ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A4SN
      Animation       = NBBunker_A4SN.NBBunker_A4SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model           = NBBunker_A4
      Animation       = NBBunker_A4.NBBunker_A4
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model           = NBBunker_A4N
      Animation       = NBBunker_A4N.NBBunker_A4N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model           = NBBunker_A4S
      Animation       = NBBunker_A4S.NBBunker_A4S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model           = NBBunker_A4SN
      Animation       = NBBunker_A4SN.NBBunker_A4SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBBunker_A4
      Animation       = NBBunker_A4.NBBunker_A4
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBBunker_A4N
      Animation       = NBBunker_A4N.NBBunker_A4N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBBunker_A4S
      Animation       = NBBunker_A4S.NBBunker_A4S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBBunker_A4SN
      Animation       = NBBunker_A4SN.NBBunker_A4SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ under-construction scaffolding -----------------
  Draw = W3DModelDraw ModuleTag_03
  AnimationsRequirePower = No
    MinLODRequired = MEDIUM
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = PARTIALLY_CONSTRUCTED
      Model           = NBBunker_A6
      Animation       = NBBunker_A6.NBBunker_A6
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_DAY
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBBunker_A6N
      Animation       = NBBunker_A6N.NBBunker_A6N
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_NIGHT
      ParticleSysBone = Smoke01 BuildUpSmokeChina
      ParticleSysBone = Smoke02 BuildUpSmokeChina
      ParticleSysBone = Smoke03 BuildUpSmokeChina
      ParticleSysBone = Smoke04 BuildUpSmokeChina
    End
    ConditionState    = SNOW PARTIALLY_CONSTRUCTED
      Model           = NBBunker_A6S
      Animation       = NBBunker_A6S.NBBunker_A6S
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOW
      ParticleSysBone = Smoke01 BuildUpSnowSmoke
      ParticleSysBone = Smoke02 BuildUpSnowSmoke
      ParticleSysBone = Smoke03 BuildUpSnowSmoke
      ParticleSysBone = Smoke04 BuildUpSnowSmoke
    End
    ConditionState    = SNOW NIGHT PARTIALLY_CONSTRUCTED
      Model           = NBBunker_A6SN
      Animation       = NBBunker_A6SN.NBBunker_A6SN
      AnimationMode   = MANUAL
      Flags           = START_FRAME_LAST
      TransitionKey   = UP_SNOWNIGHT
      ParticleSysBone = Smoke01 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke02 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke03 BuildUpNightSnowSmoke
      ParticleSysBone = Smoke04 BuildUpNightSnowSmoke
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
     Model            = NBBunker_A6
      Animation       = NBBunker_A6.NBBunker_A6
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_NIGHT
     Model            = NBBunker_A6N
      Animation       = NBBunker_A6N.NBBunker_A6N
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
     Model            = NBBunker_A6S
      Animation       = NBBunker_A6S.NBBunker_A6S
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
     Model            = NBBunker_A6SN
      Animation       = NBBunker_A6SN.NBBunker_A6SN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model           = NBBunker_A6
      Animation       = NBBunker_A6.NBBunker_A6
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model           = NBBunker_A6N
      Animation       = NBBunker_A6N.NBBunker_A6N
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model           = NBBunker_A6S
      Animation       = NBBunker_A6S.NBBunker_A6S
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model           = NBBunker_A6SN
      Animation       = NBBunker_A6SN.NBBunker_A6SN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End

  ; ------------ being-constructed crane -----------------
  Draw = W3DModelDraw ModuleTag_04
  AnimationsRequirePower = No
    DefaultConditionState
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SNOW NIGHT
      Model           = None
      TransitionKey   = DOWN_DEFAULT
    End
    ConditionState    = SOLD
      Model           = NONE
    End

    ConditionState  = ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A5
      Animation       = NBBunker_A5.NBBunker_A5
      AnimationMode   = LOOP
      TransitionKey  = UP_DAY
    End

    ConditionState  = NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A5N
      Animation       = NBBunker_A5N.NBBunker_A5N
      AnimationMode   = LOOP
      TransitionKey  = UP_NIGHT
    End
    ConditionState  = SNOW ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A5S
      Animation       = NBBunker_A5S.NBBunker_A5S
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOW
    End
    ConditionState  = SNOW NIGHT ACTIVELY_BEING_CONSTRUCTED
      Model           = NBBunker_A5SN
      Animation       = NBBunker_A5SN.NBBunker_A5SN
      AnimationMode   = LOOP
      TransitionKey  = UP_SNOWNIGHT
    End
    TransitionState   = DOWN_DEFAULT UP_DAY
      Model            = NBBunker_AB
      Animation       = NBBunker_AB.NBBunker_AB
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End

    TransitionState   = DOWN_DEFAULT UP_NIGHT
      Model            = NBBunker_ABN
      Animation       = NBBunker_ABN.NBBunker_ABN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOW
      Model            = NBBunker_ABS
      Animation       = NBBunker_ABS.NBBunker_ABS
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = DOWN_DEFAULT UP_SNOWNIGHT
      Model            = NBBunker_ABSN
      Animation       = NBBunker_ABSN.NBBunker_ABSN
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 1.0 1.0
      Flags           = START_FRAME_FIRST
    End
    TransitionState   = UP_DAY DOWN_DEFAULT
      Model            = NBBunker_AB
      Animation       = NBBunker_AB.NBBunker_AB
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_NIGHT DOWN_DEFAULT
      Model            = NBBunker_ABN
      Animation       = NBBunker_ABN.NBBunker_ABN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOW DOWN_DEFAULT
      Model            = NBBunker_ABS
      Animation       = NBBunker_ABS.NBBunker_ABS
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
    TransitionState   = UP_SNOWNIGHT DOWN_DEFAULT
      Model            = NBBunker_ABSN
      Animation       = NBBunker_ABSN.NBBunker_ABSN
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2.0 2.0   ; play teardown animations more quickly
      Flags           = START_FRAME_LAST
    End
  End
  
  PlacementViewAngle     = -135

  ; ***DESIGN parameters *** ;rto look here
  DisplayName      = OBJECT:Infa_Bunker
  Side = ChinaInfantryGeneral
  EditorSorting     = STRUCTURE
  Prerequisites
    Object = Infa_ChinaBarracks
  End
  BuildCost         = 700
  BuildTime         = 8.0           ; in seconds
  EnergyProduction  = 0
  VisionRange       = 300.0         ; Shroud clearing distance
  ShroudClearingRange = 200
  ArmorSet
    Conditions      = None
    Armor           = StructureArmorTough
    DamageFX        = StructureDamageFXNoShake
  End
  CommandSet       = Infa_ChinaBunkerCommandSetUpgrade

  ; *** AUDIO Parameters ***
  VoiceSelect       = BunkerSelect
  SoundOnDamaged        = BuildingDamagedStateLight
  SoundOnReallyDamaged  = BuildingDestroy

  UnitSpecificSounds
    UnderConstruction     = UnderConstructionLoop
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD STRUCTURE SELECTABLE STICK_TO_TERRAIN_SLOPE IMMOBILE SCORE FS_BASE_DEFENSE GARRISONABLE_UNTIL_DESTROYED IMMUNE_TO_CAPTURE
  Body              = StructureBody ModuleTag_05
    MaxHealth       = 1000.0
    InitialHealth   = 1000.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 1200
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 100
  End
;  Behavior               = FXListDie ModuleTag_07
;    DeathFX         = FX_SmallStructureDeath
;  End

  ExperienceValue     = 20 20 20 20  ; Experience point value at each level

  Behavior = GarrisonContain ModuleTag_08
    ContainMax                    = 10
    EnterSound                    = GarrisonEnter
    ExitSound                     = GarrisonExit
    ImmuneToClearBuildingAttacks  = Yes
  End

  Behavior = GenerateMinefieldBehavior     ModuleTag_09
    TriggeredBy           = Upgrade_ChinaMines
    MineName              = ChinaStandardMine
    SmartBorder           = Yes
    AlwaysCircular        = Yes

    Upgradable            = Yes
    UpgradedTriggeredBy   = Upgrade_ChinaEMPMines
    UpgradedMineName      = ChinaEMPMine
  End

  Behavior = ProductionUpdate ModuleTag_10
    ; nothing, but is required if we have any Object-level Upgrades!
  End

  Behavior = GrantUpgradeCreate ModuleTag_11
    UpgradeToGrant           = Upgrade_ChinaMines
    ExemptStatus      = UNDER_CONSTRUCTION
  End

  Behavior = FlammableUpdate ModuleTag_12
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 5       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  
  Behavior             = CreateObjectDie ModuleTag_13
    CreationList  = OCL_LargeStructureDebris
  End
  Behavior             = FXListDie ModuleTag_14
    DeathFX       = FX_StructureSmallDeath
  End
  Behavior = DestroyDie ModuleTag_06
    ;nothing
  End

  Behavior = TransitionDamageFX ModuleTag_15
    ;-------------DESIGNED FOR SMALL SIZED FACTION BUILDING TRANSITIONS-------------------
    DamagedParticleSystem1       = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ;---------------------------------------------------------------------------------------
    ReallyDamagedParticleSystem1 = Bone:None RandomBone:No PSys:StructureTransitionSmallSmoke
    ReallyDamagedParticleSystem2 = Bone:None RandomBone:No PSys:StructureTransitionSmallExplosion
    ReallyDamagedParticleSystem3 = Bone:None RandomBone:No PSys:StructureTransitionSmallShockwave
  End

  Behavior = CommandSetUpgrade ModuleTag_25
    CommandSet = Infa_ChinaBunkerCommandSetUpgrade
    TriggeredBy = Upgrade_ChinaMines
  End
  Behavior = ArmorUpgrade ModuleTag_26
    TriggeredBy = Upgrade_ChinaEMPMines
  End

  
  Geometry            = BOX
  GeometryMajorRadius = 16.0
  GeometryMinorRadius = 16.0
  GeometryHeight      = 20.0
  GeometryIsSmall     = No
  Shadow              = SHADOW_VOLUME
  BuildCompletion     = PLACED_BY_PLAYER

End





















































;------------------------------------------------------------------------------
Object Infa_ChinaInfantryMiniGunner

  ; *** ART Parameters ***
  SelectPortrait         = SNMiniGunner_L  
  ButtonImage            = SNMiniGunner
  
  UpgradeCameo1 = Upgrade_Fanaticism
  UpgradeCameo2 = Upgrade_InfantryCaptureBuilding
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE

  Draw = W3DModelDraw ModuleTag_01

    OkToChangeModelColor = Yes

    ; this says "we don't use these condition states at all, so completely
    ; ignore them for purposes of matchmaking"... this is useful to help
    ; reduce the number of AliasConditionState clauses you must add in
    ; order to avoid ambiguity in some cases.
    IgnoreConditionStates = PREATTACK_A FIRING_A BETWEEN_FIRING_SHOTS_A RELOADING_A

    ; ------- Standing-Around Animations
 
    DefaultConditionState
      Model               = NICNSCI_SKN
      IdleAnimation       = NICNSC_SKL.NICNSC_STA 0 35
      IdleAnimation       = NICNSC_SKL.NICNSC_IDA
      IdleAnimation       = NICNSC_SKL.NICNSC_IDB
      AnimationMode       = ONCE
      WeaponFireFXBone    = PRIMARY Muzzle
      WeaponMuzzleFlash   = PRIMARY MuzzleFX
      TransitionKey       = TRANS_Stand
    End

    ConditionState        = REALLYDAMAGED
      IdleAnimation       = NICNSC_SKL.NICNSC_STB
      AnimationMode       = ONCE
      TransitionKey       = TRANS_StandDamaged
    End

    ; ------- Machine Gun Animations

    ConditionState      = USING_WEAPON_A
      Animation         = NICNSC_SKL.NICNSC_ATA
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Firing
    End

    ConditionState      = USING_WEAPON_A REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_ATC
      AnimationMode     = LOOP
      TransitionKey     = TRANS_FiringDamaged
    End

    ConditionState      = USING_WEAPON_B
      Animation         = NICNSC_SKL.NICNSC_ATA2
      AnimationMode     = LOOP
 ;    TransitionKey     = TRANS_Firing
    End

    ConditionState      = USING_WEAPON_B REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_ATC2
      AnimationMode     = LOOP
 ;    TransitionKey     = TRANS_FiringDamaged
    End

    ; ------- Firing-related Transitions

    TransitionState   = TRANS_Firing TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
    End

    TransitionState   = TRANS_Stand TRANS_Firing
      Animation       = NICNSC_SKL.NICNSC_SA2AA
      AnimationMode   = ONCE
    End

    TransitionState   = TRANS_Firing TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE
    End

    TransitionState   = TRANS_StandDamaged TRANS_FiringDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCST
      AnimationMode   = ONCE
    End

    TransitionState   = TRANS_FiringDamaged TRANS_StandDamaged
      Animation       = NICNSC_SKL.NICNSC_ATCED
      AnimationMode   = ONCE
    End


    ; ------------- Damage Transitions --------------------
    TransitionState = TRANS_StandDamaged TRANS_RunDamaged
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE
      AnimationSpeedFactorRange = 2 2
    End
    TransitionState = TRANS_RunDamaged TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2AC
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 2 2
      Flags           = START_FRAME_LAST
    End
    TransitionState = TRANS_Stand TRANS_StandDamaged 
      Animation       = NICNSC_SKL.NICNSC_AA2SA
      AnimationMode   = ONCE_BACKWARDS
      AnimationSpeedFactorRange = 4 5
      Flags           = START_FRAME_LAST
    End




    ; ------- Bayonet Animations

    ConditionState    = PREATTACK_C 
      Animation       = NICNSC_SKL.NICNSC_ATB1
      AnimationMode   = ONCE
      TransitionKey   = TRANS_Stab
    End
    AliasConditionState = PREATTACK_C MOVING
    AliasConditionState = PREATTACK_C FIRING_C
    AliasConditionState = PREATTACK_C BETWEEN_FIRING_SHOTS_C

    ConditionState      = FIRING_C
      Animation         = NICNSC_SKL.NICNSC_ATB2
      AnimationMode     = ONCE
      ; this is basically a trick: this guy has a nontrivial animation for firing,
      ; and a long recycle time between shots. we want him to finish his fire animation
      ; (unless he's ordered to do something else), so this is just a handy trick that
      ; says, "if the previous state had this transition key, allow it to finish before
      ; switching to us, if possible".
      WaitForStateToFinishIfPossible = TRANS_Stab
    End
    AliasConditionState = BETWEEN_FIRING_SHOTS_C
    AliasConditionState = RELOADING_C

    ; ------- Parachuting Animations

    ConditionState    = FREEFALL
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = MANUAL
      Flags           = START_FRAME_FIRST
      TransitionKey   = TRANS_Falling
    End
    AliasConditionState = FREEFALL REALLYDAMAGED
    AliasConditionState = FREEFALL DYING

    ConditionState    = PARACHUTING
      Animation       = NICNSC_SKL.NICNSC_PHG
      AnimationMode   = LOOP
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
      TransitionKey   = TRANS_Chute
    End
    AliasConditionState = PARACHUTING REALLYDAMAGED
    AliasConditionState = PARACHUTING DYING

    TransitionState   = TRANS_Falling TRANS_Chute
      Animation       = NICNSC_SKL.NICNSC_POP
      AnimationMode   = ONCE
      Flags           = PRISTINE_BONE_POS_IN_FINAL_FRAME  ; our bone positions should come from the last frame, rather than the first
    End

    TransitionState   = TRANS_Chute TRANS_Stand
      Animation       = NICNSC_SKL.NICNSC_PTD
      AnimationMode   = ONCE
    End

    ; ------- Movement Animations

    ConditionState      = MOVING
      Animation         = NICNSC_SKL.NICNSC_RNA 26
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = None
      ParticleSysBone   = None InfantryDustTrails
    End
    AliasConditionState = MOVING ATTACKING

    ConditionState = MOVING REALLYDAMAGED
      Animation         = NICNSC_SKL.NICNSC_RNB 28
      AnimationMode     = LOOP
      Flags             = RANDOMSTART
      TransitionKey     = TRANS_RunDamaged
      TransitionKey     = None
    End
    AliasConditionState = MOVING ATTACKING REALLYDAMAGED

    ; ------- Bldg-capture

    ConditionState      = UNPACKING
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP1
      AnimationMode     = ONCE
    End
    AliasConditionState = UNPACKING REALLYDAMAGED

    ConditionState      = RAISING_FLAG
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP2
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Raising
    End
    AliasConditionState = RAISING_FLAG REALLYDAMAGED

    ConditionState      = PACKING
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP1
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
      TransitionKey     = TRANS_Packing
    End
    AliasConditionState = PACKING REALLYDAMAGED

    TransitionState     = TRANS_Raising TRANS_Packing
      Model             = NICNSC_F_SKN
      Animation         = NICNSC_F_SKL.NICNSC_F_FDP2
      AnimationMode     = ONCE_BACKWARDS
      Flags             = START_FRAME_LAST
    End

    ; ------- Dying Animations

    ConditionState      = DYING
      Animation         = NICNSC_SKL.NICNSC_DTA
      Animation         = NICNSC_SKL.NICNSC_DTB
      AnimationMode     = ONCE
      TransitionKey     = TRANS_Dying
    End

    TransitionState     = TRANS_Dying TRANS_Flailing
      Animation         = NICNSC_SKL.NICNSC_ATDE1
      AnimationMode     = ONCE
    End

    ConditionState      = DYING EXPLODED_FLAILING
      Animation         = NICNSC_SKL.NICNSC_ATDE2
      AnimationMode     = LOOP
      TransitionKey     = TRANS_Flailing
    End

    ConditionState      = DYING EXPLODED_BOUNCING
      Animation         = NICNSC_SKL.NICNSC_ATDE3
      AnimationMode     = ONCE
      TransitionKey     = None
    End

    ; ------- Misc Animations

    ConditionState      = SPECIAL_CHEERING
      Animation         = NICNSC_SKL.NICNSC_CHA
      AnimationMode     = LOOP
    End

  End

  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:MiniGunner
  Side                = ChinaInfantryGeneral
  EditorSorting       = INFANTRY
  TransportSlotCount  = 1                 ;how many "slots" we take in a transport (0 == not transportable)
  WeaponSet
    Conditions = None 
    Weapon = PRIMARY Infa_MiniGunnerGun
    Weapon = SECONDARY Infa_MiniGunnerGunAir
    PreferredAgainst = SECONDARY AIRCRAFT
  End
  ArmorSet
    Conditions      = None
    Armor           = InfGen_HumanArmor
    DamageFX        = InfantryDamageFX
  End
  ArmorSet
    Conditions      = PLAYER_UPGRADE
    Armor           = HazMatHumanArmor
    DamageFX        = InfantryDamageFX
  End
  VisionRange = 100
  ShroudClearingRange = 200
  Prerequisites
    Object = Infa_ChinaBarracks
  End
  BuildCost     = 350
  BuildTime     = 10.0          ;in seconds      

  ExperienceValue = 5 5 10 20   ;Experience point value at each level
  ExperienceRequired = 0 20 40 80  ;Experience points needed to gain each level
  IsTrainable = Yes             ;Can gain experience
  CrushableLevel         = 0  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet    = Infa_ChinaInfantryMiniGunnerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = RedMinigunnerVoiceSelect
  VoiceMove = RedGuardVoiceMove
  VoiceGuard = RedGuardVoiceMove
  VoiceAttack = RedMinigunnerVoiceAttack
  VoiceGroupSelect = BattleCrySound
  VoiceFear = RedGuardVoiceFear
  VoiceTaskComplete = RedGuardVoiceCaptureComplete
  UnitSpecificSounds
    VoiceMelee      = RedGuardVoiceAttackBayonet
    VoiceGarrison   = RedGuardVoiceGarrison
    VoiceCreate     = RedMinigunnerVoiceCreate
    VoiceSubdue     = RedGuardVoiceSubdue
    VoiceEnter      = RedGuardVoiceMove
    VoiceEnterHostile = RedGuardVoiceMove
    VoiceGetHealed      = RedGuardVoiceMove
  End

  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK ATTACK_NEEDS_LINE_OF_SIGHT CAN_CAST_REFLECTIONS INFANTRY SCORE PARACHUTABLE

  Body = ActiveBody ModuleTag_02
    MaxHealth       = 120.0
    InitialHealth   = 120.0
  End

  Behavior = VeterancyGainCreate ModuleTag_03
    StartingLevel = VETERAN
  End

  Behavior = VeterancyGainCreate ModuleTag_08
    StartingLevel = ELITE
    ScienceRequired = Infa_SCIENCE_RedGuardTraining
  End

  Behavior = AIUpdateInterface ModuleTag_04
    AutoAcquireEnemiesWhenIdle = Yes
  End

  Behavior = CommandButtonHuntUpdate  ModuleTag_05 ; allows use of command button hunt script with this unit. 
  End

  Locomotor = SET_NORMAL RedguardLocomotor

  Behavior = HordeUpdate ModuleTag_06
    RubOffRadius = 100    ; if I am this close to a real hordesman, I will get to be an honorary hordesman
    UpdateRate = 1000    ; how often to recheck horde status (msec)
    Radius = 30          ; how close other units must be to us to count towards our horde-ness (~30 feet or so)
    KindOf = INFANTRY    ; what KindOf's must match to count towards horde-ness
    AlliesOnly = Yes     ; do we only count allies towards horde status? 
    ExactMatch = No      ; do we only count units of our exact same type towards horde status? (overrides kindof)
    Count = 5            ; how many units must be within Radius to grant us horde-ness
    Action = HORDE       ; when horde-ing, grant us the HORDE bonus
  End
  Behavior = PhysicsBehavior ModuleTag_07
    Mass = 5.0
  End

; --- begin Death modules ---
  Behavior = SlowDeathBehavior ModuleTag_Death01
    DeathTypes          = ALL -CRUSHED -SPLATTED -EXPLODED -BURNED -POISONED -POISONED_BETA -POISONED_GAMMA
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
  End
  Behavior = SlowDeathBehavior ModuleTag_Death02
    DeathTypes          = NONE +CRUSHED +SPLATTED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_GIDieCrushed
  End
  Behavior = SlowDeathBehavior ModuleTag_Death03
    DeathTypes          = NONE +EXPLODED
    SinkDelay           = 3000
    SinkRate            = 0.5     ; in Dist/Sec
    DestructionDelay    = 8000
    FX                  = INITIAL FX_RedGuardDie
    FlingForce          = 8
    FlingForceVariance  = 3
    FlingPitch          = 60
    FlingPitchVariance  = 10
  End
  Behavior = SlowDeathBehavior ModuleTag_Death04
    DeathTypes          = NONE +BURNED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByFireChina
    OCL                 = INITIAL OCL_FlamingInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death05
    DeathTypes          = NONE +POISONED
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantry
  End
  Behavior = SlowDeathBehavior ModuleTag_Death06 ; don't forget to give it a new, unique module tag
    DeathTypes          = NONE +POISONED_BETA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryBeta ;you'll have to create this OCL and make it use the blue guys instead of green ones
  End
  
  Behavior = SlowDeathBehavior ModuleTag_Death07
    DeathTypes          = NONE +POISONED_GAMMA
    DestructionDelay    = 0
    FX                  = INITIAL FX_DieByToxinChina
    OCL                 = INITIAL OCL_ToxicInfantryGamma
  End
; --- end Death modules ---

  Behavior = PoisonedBehavior ModuleTag_15
    PoisonDamageInterval = 100  ; Every this many msec I will retake the poison damage dealt me...
    PoisonDuration = 3000       ; ... for this long after last hit by poison damage
  End

  Behavior = SpecialAbility ModuleTag_16
    SpecialPowerTemplate      = SpecialAbilityRedGuardCaptureBuilding
    UpdateModuleStartsAttack  = Yes
    StartsPaused              = Yes
    InitiateSound         = RedGuardVoiceCapture
  End
  Behavior = SpecialAbilityUpdate ModuleTag_17
    SpecialPowerTemplate  = SpecialAbilityRedGuardCaptureBuilding
    StartAbilityRange  = 5.0
    UnpackTime            = 3000  ; (changing this will scale anim speed)
    PreparationTime       = 20000 ; time to complete hack once prepared (changing this will scale anim speed)
    PackTime              = 2000  ; (changing this will scale anim speed)
    DoCaptureFX           = Yes
    AwardXPForTriggering  = 4
    ;SkillPointsForTriggering = ???  -- Dustin, fill me out if you want different balance values.
  End
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_18
    SpecialPowerTemplate = SpecialAbilityRedGuardCaptureBuilding
    TriggeredBy = Upgrade_InfantryCaptureBuilding
  End



  Geometry = CYLINDER
  GeometryMajorRadius = 7.0
  GeometryMinorRadius = 7.0
  GeometryHeight = 12.0
  GeometryIsSmall = Yes
  Shadow = SHADOW_DECAL
  ShadowSizeX = 14;
  ShadowSizeY = 14;
  ShadowTexture = ShadowI;
  BuildCompletion = APPEARS_AT_RALLY_POINT

End




;------------------------------------------------------------------------------
Object Infa_ChinaVehicleTroopCrawler

  ; *** ART Parameters ***
  SelectPortrait         = SNAsltTroop_L
  ButtonImage            = SNAsltTroop
  
  UpgradeCameo1 = Upgrade_ChinaSubliminalMessaging
  ;UpgradeCameo2 = NONE
  ;UpgradeCameo3 = NONE
  ;UpgradeCameo4 = NONE
  ;UpgradeCameo5 = NONE
  
  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes
    ConditionState = NONE
      Model = NVTClrI
      ;note, the IRSonar particle system is added in StealthDetectorUpdate.cpp, not here
    End
    ConditionState       = REALLYDAMAGED RUBBLE ; THIS IS VERY IMPORTANT... DO NOT REMOVE 'RUBBLE' 
                                                ; @todo find out why a non-animating model like this has such trouble matching
                                                ; reallydamaged against moving against rubble, etc.
      Model              = NVTClrI_D
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    ; PowerslideSpray = RocketBuggyDirtPowerSlide doesn't powerslide

    ; These parameters are only used if the model has a separate suspension, 
    ; and the locomotor has HasSuspension = Yes.
    LeftFrontTireBone     = Wheel01
    RightFrontTireBone    = Wheel08
    LeftRearTireBone      = Wheel03
    RightRearTireBone     = Wheel05
    MidLeftFrontTireBone  = Wheel02
    MidRightFrontTireBone = Wheel07
    MidLeftRearTireBone   = Wheel04
    MidRightRearTireBone  = Wheel06

    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.

  End


  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AssaultTroopTransport
  Side = ChinaInfantryGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 8                 ;Just enough to fit into a Chinook.
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     NONE
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY     Infa_ChinaVehicleTroopCrawlerDummyWeapon
  End 
  ArmorSet
    Conditions      = None
    Armor           = AssaultCrawlerArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 2400
  BuildTime       = 25.0          ;in seconds    
  VisionRange     = 175           ;Needs to see farther and match it's weapon range -- else troop crawlers will get slaughtered against tanks!
  ShroudClearingRange = 400
  Prerequisites
    Object = Infa_ChinaWarFactory
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Infa_ChinaTroopCrawlerCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = AssaultTroopCrawlerVoiceSelect
  VoiceMove = TroopCrawlerVoiceMove
  VoiceGuard = TroopCrawlerVoiceMove
  VoiceAttack = AssaultTroopCrawlerVoiceAttack
  SoundMoveStart = TroopCrawlerMoveStart
  SoundMoveStartDamaged = TroopCrawlerMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = AssaultTroopCrawlerVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush = TroopCrawlerVoiceCrush
    VoiceUnload   = TroopCrawlerVoiceUnload
    VoiceEnter = TroopCrawlerVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 240.0
    InitialHealth   = 240.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 480
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = StealthDetectorUpdate ModuleTag_03
    DetectionRate             = 900   ; how often to rescan for stealthed things in my sight (msec)
    ;DetectionRange           = ??? ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
    PingSound                 = IRPing
    LoudPingSound             = IRPingLoud
    IRParticleSysName         = IRDetectSonar
    IRBrightParticleSysName   = IRDetectSonarBright
    IRGridParticleSysName     = IRDetectGrid
    IRBeaconParticleSysName   = IRLenzflare
    IRParticleSysBone         = IRFX
  End

;OBSOLETE
;  Behavior = AIUpdateInterface ModuleTag_04
;    Turret
;      ControlledWeaponSlots = PRIMARY
;    End
;  End
; Dude, quit changing this.  He is NOT an AssaultTransport.  The guys don't hop out and attack.  He is a transport.
;  Behavior = AssaultTransportAIUpdate ModuleTag_NewAI
;    MembersGetHealedAtLifeRatio = 0.5
;  End
  Behavior = TransportAIUpdate ModuleTag_CorrectAI
  End

  Locomotor = SET_NORMAL TroopCrawlerLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 50.0
  End
  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                 = 8
    InitialPayload        = Infa_ChinaInfantryMiniGunner 8
    ScatterNearbyOnExit   = Yes
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50% ;10%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_FinalAssaultTroopCrawlerDebris
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End
  Behavior        = PropagandaTowerBehavior ModuleTag_22
    Radius                = 100
    DelayBetweenUpdates   = 4000 ; in milliseconds
    HealPercentEachSecond = 2%   ; get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 4%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End





























;------------------------------------------------------------------------------
Object Infa_ChinaVehicleListeningOutpost

  ; *** ART Parameters ***
  SelectPortrait         = NVLOutpost_L
  ButtonImage            = NVLOutpost
  UpgradeCameo1          = Upgrade_ChinaSubliminalMessaging

  Draw = W3DTruckDraw ModuleTag_01
    OkToChangeModelColor = Yes

    ExtraPublicBone = IRFX
    
    ConditionState = NONE
      Model = NVLOUTPOST
    End

    ConditionState       = REALLYDAMAGED  
      Model              = NVLOUTPOST_D
    End

    ConditionState       = RUBBLE   
      Model              = NVLOUTPOST_D1
      HideSubObject      = TURRET01      ;Hide the dish, since an ocl makes an airborne one is slow death behavior
    End

    TrackMarks = EXTireTrack.tga

    Dust = RocketBuggyDust
    DirtSpray = RocketBuggyDirtSpray
    LeftFrontTireBone     = TIRE01
    RightFrontTireBone    = TIRE02
    LeftRearTireBone      = TIRE03
    RightRearTireBone     = TIRE04
    TireRotationMultiplier      = 0.2   ; this * speed = rotation.
    PowerslideRotationAddition  = 0   ; This vehicle doesn't powerslide.
  End

  Draw = W3DModelDraw ModuleTag_33
    OkToChangeModelColor = Yes
    
    ConditionState = NONE
      Model = NVLOUTPOST_B
      Animation = NVLOUTPOST_B.NVLOUTPOST_B
      AnimationMode     = LOOP
      TransitionKey = Trans_Deployed
    End
    ConditionState = REALLYDAMAGED
      Model = NVLOUTPOST_BD
      Animation = NVLOUTPOST_BD.NVLOUTPOST_BD
      AnimationMode     = LOOP
      TransitionKey = Trans_Deployed_ReallyDamaged
    End
    
    ConditionState = MOVING
      Model = NVLOUTPOST_A
      Animation = NVLOUTPOST_A.NVLOUTPOST_A
      AnimationMode     = LOOP
      TransitionKey = Trans_Moving
    End
    ConditionState = REALLYDAMAGED MOVING
      Model = NVLOUTPOST_AD
      Animation = NVLOUTPOST_AD.NVLOUTPOST_AD
      AnimationMode     = LOOP
      TransitionKey = Trans_Moving_ReallyDamaged
    End

    ConditionState = RUBBLE
      Model = NONE
    End
    AliasConditionState = RUBBLE MOVING

    ;**** PACKING AND UNPACKING MODES ***
    TransitionState     = Trans_Moving Trans_Deployed
      Model = NVLOUTPOST_C
      Animation = NVLOUTPOST_C.NVLOUTPOST_C
      AnimationMode     = ONCE
    End
    TransitionState     = Trans_Moving_ReallyDamaged Trans_Deployed_ReallyDamaged
      Model = NVLOUTPOST_CD
      Animation = NVLOUTPOST_CD.NVLOUTPOST_CD
      AnimationMode     = ONCE
    End

    TransitionState     = Trans_Deployed Trans_Moving 
      Model = NVLOUTPOST_C
      Animation = NVLOUTPOST_C.NVLOUTPOST_C
      AnimationMode     = ONCE_BACKWARDS
    End
    TransitionState     = Trans_Deployed_ReallyDamaged Trans_Moving_ReallyDamaged 
      Model = NVLOUTPOST_CD
      Animation = NVLOUTPOST_CD.NVLOUTPOST_CD
      AnimationMode     = ONCE_BACKWARDS
    End
  End

  ; ***DESIGN parameters ***
  DisplayName      = OBJECT:AssaultListeningOutpost
  Side = ChinaInfantryGeneral
  EditorSorting   = VEHICLE
  TransportSlotCount = 8    ;This means, 'how many seats do I occupy in another transport.'
  WeaponSet
    Conditions          = None 
    Weapon              = PRIMARY     NONE
  End
  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    Weapon              = PRIMARY     ListeningOutpostUpgradedDummyWeapon
  End 

  ArmorSet
    Conditions      = None
    Armor           = TankArmor
    DamageFX        = TankDamageFX
  End
  BuildCost       = 1000
  BuildTime       = 15.0          ;in seconds    
  VisionRange     = 250
  ShroudClearingRange = 500
  Prerequisites
    Object = Infa_ChinaWarFactory
  End
  CrusherLevel           = 2  ;What can I crush?: 1 = infantry, 2 = trees, 3 = vehicles
  CrushableLevel         = 2  ;What am I?:        0 = for infantry, 1 = for trees, 2 = general vehicles
  CommandSet = Infa_ChinaListeningOutpostCommandSet

  ; *** AUDIO Parameters ***
  VoiceSelect = ListeningOutpostVoiceSelect
  VoiceMove = ListeningOutpostVoiceMove
  VoiceGuard = ListeningOutpostVoiceMove
  VoiceAttack = ListeningOutpostVoiceAttack
  SoundMoveStart = RadarVanMoveStart
  SoundMoveStartDamaged = RadarVanMoveStart
  SoundEnter = HumveeEnter
  SoundExit = HumveeExit
  UnitSpecificSounds
    ; These have the syntax of SomeNameSomewhereInCode = SomeNameSomewhereInLookupINIs
    VoiceCreate     = ListeningOutpostVoiceCreate
    TurretMoveStart = NoSound
    TurretMoveLoop = TurretMoveLoop
    TruckLandingSound = NoSound ;RocketBuggyLand
    TruckPowerslideSound = NoSound ;RocketBuggyPowerslide
    VoiceCrush = NoSound
    VoiceUnload   = NoSound ; nothing recorded
    VoiceEnter = ListeningOutpostVoiceMove
  End


  ; *** ENGINEERING Parameters ***
  RadarPriority = UNIT
  KindOf = PRELOAD SELECTABLE CAN_ATTACK CAN_CAST_REFLECTIONS TRANSPORT VEHICLE SCORE REVEALS_ENEMY_PATHS CANNOT_RETALIATE
  
  Body = ActiveBody ModuleTag_02
    MaxHealth       = 300.0
    InitialHealth   = 300.0

    ; Subdual damage "Subdues" you (reaction defined by BodyModule) when it passes your max health.
    ; The cap limits how extra-subdued you can be, and the other numbers detemine how fast it drains away on its own.
    SubdualDamageCap = 590
    SubdualDamageHealRate = 500
    SubdualDamageHealAmount = 50
  End
  Behavior = StealthDetectorUpdate ModuleTag_03
    DetectionRate             = 900   ; how often to rescan for stealthed things in my sight (msec)
    DetectionRange            = 300 ;Dustin, enable this for independant balancing!
    CanDetectWhileGarrisoned  = No ;Garrisoned means being in a structure that you units can shoot out of.
    CanDetectWhileContained   = No ;Contained means being in a transport or tunnel network.
;    PingSound                 = IRPing
;    LoudPingSound             = IRPingLoud
;    IRParticleSysName         = IRDetectSonar
;    IRBrightParticleSysName   = IRDetectSonarBright
    IRGridParticleSysName     = IRDetectGrid
    IRBeaconParticleSysName   = IRLenzflare
    IRParticleSysBone         = IRFX
  End

  Behavior = TransportAIUpdate ModuleTag_99
    AutoAcquireEnemiesWhenIdle = No ; let the contained do it for themselves
  End
  Behavior = StealthUpdate ModuleTag_04
    StealthDelay                = 2000 ; msec
    StealthForbiddenConditions  = MOVING RIDERS_ATTACKING
    FriendlyOpacityMin          = 50.0%
    FriendlyOpacityMax          = 100.0%
    InnateStealth               = Yes
    OrderIdleEnemiesToAttackMeUponReveal  = Yes
  End

  Locomotor = SET_NORMAL ListeningOutpostLocomotor
  Behavior = PhysicsBehavior ModuleTag_05
    Mass = 90.0
  End
  Behavior = TransportContain ModuleTag_06
    PassengersAllowedToFire = Yes
    Slots                 = 8
    InitialPayload        = Infa_ChinaInfantryTankHunter 3
    ScatterNearbyOnExit   = No
    HealthRegen%PerSec    = 10
    DamagePercentToUnits  = 50%
    AllowInsideKindOf     = INFANTRY
    ExitDelay         = 250
    NumberOfExitPaths = 3 ; Defaults to 1.  Set 0 to not use ExitStart/ExitEnd, set higher than 1 to use ExitStart01-nn/ExitEnd01-nn
    GoAggressiveOnExit = Yes ; AI Will tell people to set their mood to Aggressive on exiting
    ArmedRidersUpgradeMyWeaponSet = Yes
  End

  Behavior = SlowDeathBehavior ModuleTag_07
    DeathTypes = ALL -CRUSHED -SPLATTED
    DestructionDelay = 1789
    FX  = INITIAL    FX_SupplyTruckExplosionOneFinal
    OCL = INITIAL    OCL_InitialListeningOutpostDebris
    FX  = FINAL    FX_SupplyTruckExplosionOneFinal
    OCL = FINAL    OCL_FinalListeningOutpostDebris
  End

  Behavior                 = TransitionDamageFX ModuleTag_08
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmallLightSmokeColumn
    ReallyDamagedFXList1 = Loc: X:0 Y:0 Z:0 FXList:FX_NukeCannonDamageTransition
  End

  Behavior = DestroyDie ModuleTag_09
    DeathTypes = NONE +CRUSHED +SPLATTED
  End

  Behavior = FXListDie ModuleTag_10
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  ; A crushing defeat
  Behavior = FXListDie ModuleTag_11
    DeathTypes = NONE +CRUSHED +SPLATTED
    DeathFX = FX_CarCrush
  End

  Behavior = CreateCrateDie ModuleTag_12
    CrateData = SalvageCrateData
    ;CrateData = EliteTankCrateData
    ;CrateData = HeroicTankCrateData
  End

  Behavior        = PropagandaTowerBehavior ModuleTag_13
    Radius                = 75
    DelayBetweenUpdates   = 4000 ; in milliseconds
    HealPercentEachSecond = 1%   ; get this % of max health every second 
    PulseFX               = FX_PropagandaTowerPropagandaPulse ;plays as often as DelayBetweenUpdates
    UpgradeRequired       = Upgrade_ChinaSubliminalMessaging
    UpgradedHealPercentEachSecond = 2%   ; get this % of max health every second 
    UpgradedPulseFX       = FX_PropagandaTowerSubliminalPulse ;plays as often as DelayBetweenUpdates
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3       ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End

  Geometry = BOX
  GeometryMajorRadius = 22.0
  GeometryMinorRadius = 9.0
  GeometryHeight = 13.0     
  GeometryIsSmall = No
  Shadow = SHADOW_VOLUME
  ShadowSizeX = 45  ; minimum elevation angle above horizon. Used to limit shadow length    

End







Object Infa_ChinaVehicleHelix

  ; *** ART Parameters ***
  SelectPortrait         = SNHelix_L
  ButtonImage            = SNHelix
  
  UpgradeCameo1 = Upgrade_HelixNapalmBomb
  UpgradeCameo2 = Upgrade_ChinaBlackNapalm
  UpgradeCameo3 = Upgrade_Infa_ChinaHelixBattleBunker


    Draw = W3DOverlordAircraftDraw  ModuleTag_01; Works with the dependencyModelDraw of the upgrade portable structures 

      ParticlesAttachedToAnimatedBones = Yes

    DefaultConditionState
      Model = NVHELIX
      Animation = NVHELIX.NVHELIX
      AnimationMode = LOOP
      WeaponFireFXBone    = PRIMARY Muzzle03
      WeaponMuzzleFlash   = PRIMARY TurretFX03
      HideSubObject       = BombWing
    End

    ConditionState = MOVING
      ParticleSysBone = SMOKE01 HelixExhaust
      ParticleSysBone = SMOKE02 HelixExhaust
    End

    ConditionState = REALLYDAMAGED
      Model = NVHELIX_d
      Animation = NVHELIX_d.NVHELIX_d
      AnimationMode = LOOP
    End
    ConditionState = REALLYDAMAGED MOVING
      Model = NVHELIX_d
      Animation = NVHELIX_d.NVHELIX_d
      AnimationMode = LOOP
      ParticleSysBone = SMOKE01 HelixExhaust
      ParticleSysBone = SMOKE02 HelixExhaust
    End

    ConditionState = RUBBLE
      Model = NVHELIX_d
      Animation = NVHELIX_d.NVHELIX_d
      AnimationMode = LOOP
    End
    ConditionState = RUBBLE MOVING
      Model = NVHELIX_d
      Animation = NVHELIX_d.NVHELIX_d
      AnimationMode = LOOP
      ParticleSysBone = SMOKE01 HelixExhaust
      ParticleSysBone = SMOKE02 HelixExhaust
    End

    ConditionState = RUBBLE SPECIAL_DAMAGED
      Model = NVHELIX_d 
    End

    OkToChangeModelColor = Yes
  End


  ; ***DESIGN parameters ***
  DisplayName         = OBJECT:Infa_Helix
  EditorSorting       = VEHICLE
  Side                = ChinaInfantryGeneral
  TransportSlotCount  = 0                 ;how many "slots" we take in a transport (0 == not transportable)
  VisionRange         = 200.0 
  ShroudClearingRange = 600
  BuildCost           = 1500
  BuildTime           = 20.0          ;in seconds  
  Prerequisites
    Object = Infa_ChinaAirfield
  End
  ExperienceValue     = 50 100 150 200 ;Experience point value at each level
  ExperienceRequired  = 0 100 200 400  ;Experience points needed to gain each level
  IsTrainable         = Yes  
  CommandSet          = Infa_ChinaVehicleHelixCommandSet


  ArmorSet
    Conditions      = None
    Armor           = ChinookArmor
    DamageFX        = None
  End


  WeaponSet
    Conditions          = None 
    ;----------------------------
    Weapon              = PRIMARY     HelixMinigunWeapon
    PreferredAgainst    = PRIMARY     INFANTRY
    AutoChooseSources   = PRIMARY     FROM_PLAYER FROM_SCRIPT FROM_AI
    ;----------------------------
  End

  WeaponSet
    Conditions          = PLAYER_UPGRADE 
    ;----------------------------
    Weapon              = PRIMARY     HelixMinigunWeapon
    PreferredAgainst    = PRIMARY     INFANTRY
    AutoChooseSources   = PRIMARY     FROM_PLAYER FROM_SCRIPT FROM_AI
    ;----------------------------
  End



  ; *** AUDIO Parameters ***
  VoiceSelect     = HelixVoiceSelect
  VoiceMove       = HelixVoiceMove
  VoiceAttack     = HelixVoiceAttack
  SoundAmbient    = HelixAmbientLoop
  SoundEnter      = HumveeEnter
  SoundExit       = HumveeExit
  UnitSpecificSounds
    VoiceCreate         = HelixVoiceCreate
    VoiceUnload         = HelixVoiceUnload
    VoiceGarrison       = HelixVoiceMove
  End



  ; *** ENGINEERING Parameters ***
  RadarPriority   = UNIT
  KindOf = PRELOAD CAN_CAST_REFLECTIONS SELECTABLE VEHICLE HUGE_VEHICLE TRANSPORT AIRCRAFT SCORE PRODUCED_AT_HELIPAD CAN_ATTACK 

  Body = ActiveBody ModuleTag_03
    MaxHealth       = 300.0
    InitialHealth   = 300.0
  End

  Behavior = FXListDie ModuleTag_05
    DeathFX = FX_HelicopterStartDeath
  End

  Behavior                       = TransitionDamageFX ModuleTag_06
    ReallyDamagedParticleSystem1 = Bone:Smoke RandomBone:Yes PSys:SmokeSmallContinuousDown
    ReallyDamagedFXList1         = Loc: X:0 Y:0 Z:0 FXList:FX_ComancheDamageTransition
  End

  Behavior = ChinookAIUpdate ModuleTag_07
     AutoAcquireEnemiesWhenIdle = Yes 
     RotorWashParticleSystem = HelixRotorWashRing
  End
  Locomotor = SET_NORMAL    HelixLocomotor
  Locomotor = SET_TAXIING   BasicHelicopterTaxiLocomotor


  Behavior = PhysicsBehavior ModuleTag_09
    Mass = 50.0
  End

  Behavior = HelicopterSlowDeathBehavior ModuleTag_10
    DestructionDelay                = 99999999        ; the destruction delay
    SpiralOrbitTurnRate             = 80.0           ; in degrees per second, bigger # = tighter spiral
    SpiralOrbitForwardSpeed         = 110.0           ; bigger # = larger spiral
    SpiralOrbitForwardSpeedDamping  = .9999           ; smaller #'s = slow down faster
    MaxBraking                      = 210   ; max braking we can use during death spiral (lower num = wilder spiral)    
    SoundDeathLoop                  = HelixDamagedLoop
    MinSelfSpin                     = 40                     ; in degrees per second
    MaxSelfSpin                     = 120                     ; in degrees per second
    SelfSpinUpdateDelay             = 300                     ; in milliseconds
    SelfSpinUpdateAmount            = 5                      ; in degrees   
    FallHowFast                     = 8.0%                   ; fraction of gravity, lower = take longer to fall
    MinBladeFlyOffDelay             = 1000                    ; in milliseconds
    MaxBladeFlyOffDelay             = 1000                    ; in milliseconds
    AttachParticle                  = SootySmokeTrail
    AttachParticleBone              = Propeller02
    BladeObjectName                 = HelixBlades
    BladeBoneName                   = Propeller01    
    FXBlade                         = FX_HelicopterBladeExplosion
    OCLBlade                        = OCL_HelicopterBladeExplosion
    FXHitGround                     = FX_HelicopterHitGround
    OCLHitGround                    = OCL_HelicopterHitGround
    FXFinalBlowUp                   = FX_HelixHelicopterBlowUpBig
    OCLFinalBlowUp                  = OCL_HelixBlades
    DelayFromGroundToFinalDeath     = 30
    FinalRubbleObject               = HelixRubbleHull
  End

  Behavior = FlammableUpdate ModuleTag_21
    AflameDuration = 5000         ; If I catch fire, I'll burn for this long...
    AflameDamageAmount = 3        ; taking this much damage...
    AflameDamageDelay = 500       ; this often.
  End



  Behavior = ProductionUpdate ModuleTag_25
    MaxQueueEntries = 1; So you can't build multiple upgrades in the same frame
  End





  ;--------------------------
  Behavior = ObjectCreationUpgrade ModuleTag_24
    UpgradeObject = OCL_Infa_HelixBattleBunker
    TriggeredBy   = Upgrade_Infa_ChinaHelixBattleBunker
  End

  Behavior = PassengersFireUpgrade ModuleTag_34
    TriggeredBy   = Upgrade_Infa_ChinaHelixBattleBunker
  End

  Behavior = HelixContain ModuleTag_29
    Slots                   = 8
    DamagePercentToUnits    = 100%
    AllowInsideKindOf       = INFANTRY
    ForbidInsideKindOf      = AIRCRAFT 
    ExitDelay               = 100
    NumberOfExitPaths       = 1
    PassengersAllowedToFire = No 
  End
  ;--------------------------

  Behavior = WeaponSetUpgrade ModuleTag_30
    TriggeredBy = Upgrade_ChinaBlackNapalm
  End
;---------------------------

  Behavior = SpecialAbility ModuleTag_32
    SpecialPowerTemplate = SpecialAbilityHelixNapalmBomb
    UpdateModuleStartsAttack = Yes
    StartsPaused              = Yes; so the UnpauseSpecialPowerUpgrade, below can turn it on
    InitiateSound             = HelixVoiceAttack
  End
  Behavior = SpecialAbilityUpdate ModuleTag_33
    SpecialPowerTemplate = SpecialAbilityHelixNapalmBomb
    StartAbilityRange = 3.0
    PreparationTime = 0
    SpecialObject = NapalmBomb
    MaxSpecialObjects = 1
    SpecialObjectsPersistWhenOwnerDies = Yes 
    SpecialObjectsPersistent = Yes          ;Charges are persistent till lifetime expires or owner detonates them.
    UniqueSpecialObjectTargets = No        ;This would prevent multiple charges placed on the same object.
    UnpackTime              = 500     ;slight delay to drop bomb
    FlipOwnerAfterUnpacking = No
    FleeRangeAfterCompletion = 0.0         ;DOes not run away after finishing ability
    UnpackSound               = NoSound
    LoseStealthOnTrigger      = No
    ApproachRequiresLOS       = No ; we are a helicopter, we can see everything
    NeedToFaceTarget          = No ; can drop the bomb at any angle to target

    PersistentPrepTime        = 100
    PersistenceRequiresRecharge = Yes

  End
  Behavior = UnpauseSpecialPowerUpgrade ModuleTag_38
    SpecialPowerTemplate = SpecialAbilityHelixNapalmBomb
    TriggeredBy = Upgrade_HelixNapalmBomb
  End
  Behavior = SubObjectsUpgrade ModuleTag_39
    TriggeredBy    = Upgrade_HelixNapalmBomb 
    ShowSubObjects = BombWing 
  End
  Behavior = CommandSetUpgrade ModuleTag_28
    CommandSet = Infa_ChinaHelixBombCommandSet
    TriggeredBy   = Upgrade_HelixNapalmBomb
  End





  Geometry              = CYLINDER
  GeometryMajorRadius   = 35.0
  GeometryHeight        = 30.0     
  GeometryIsSmall       = No
  Shadow                = SHADOW_VOLUME    
  ShadowSizeX           = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End


;------------------------
Object Infa_ChinaHelixBattleBunker

  ; *** ART Parameters ***
  SelectPortrait         = SNBunker_L
  ButtonImage            = SNBunker
  
  
  Draw                    = W3DDependencyModelDraw ModuleTag_01
    OkToChangeModelColor  = Yes
    AttachToBoneInContainer = CHASSISBONE

    ConditionState = NONE
      Model         = NVHELIX_B
    End
    ConditionState = REALLYDAMAGED
      Model         = NVHELIX_BD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
    ; night
    ConditionState = NIGHT
      Model         = NVHELIX_B
    End 
    ConditionState = NIGHT REALLYDAMAGED
      Model         = NVHELIX_BD
      ParticleSysBone = Smoke01 SmolderingSmoke
      ParticleSysBone = Smoke02 SmolderingSmoke
      ParticleSysBone = Flame01 SmolderingFire
      ParticleSysBone = Flame01 SmolderingFlameCore
      ParticleSysBone = Spark01 LiveWireSparks
    End
  End

  PlacementViewAngle = -45

  ; ***DESIGN parameters ***
  Side             = ChinaInfantryGeneral
  EditorSorting    = SYSTEM
  TransportSlotCount = 1
  
  ArmorSet
    Conditions     = None
    Armor          = InvulnerableAllArmor ; We can't be hurt on the field.  We share damage from the Overlord with his damage module
  End
  VisionRange     = 200

  ; *** AUDIO Parameters ***
  UnitSpecificSounds
    TurretMoveStart = NoSound
    TurretMoveLoop  = NoSound ;TurretMoveLoop
    VoiceUnload     = OverlordTankVoiceUnload
  End

  ; *** ENGINEERING Parameters ***
  KindOf            = PRELOAD PORTABLE_STRUCTURE CLICK_THROUGH IGNORED_IN_GUI
    Body            = StructureBody ModuleTag_02
    MaxHealth       = 100.0
    InitialHealth   = 100.0
  End

  Behavior = HelixContain ModuleTag_29
    Slots                   = 8
    DamagePercentToUnits    = 100%
    AllowInsideKindOf       = INFANTRY
    ForbidInsideKindOf      = AIRCRAFT 
    ExitDelay               = 100
    NumberOfExitPaths       = 1
    PassengersAllowedToFire = Yes 
  End
 
  Behavior             = DestroyDie ModuleTag_04
    ;nothing
  End

  Geometry            = BOX
  GeometryMajorRadius = 6.0
  GeometryMinorRadius = 6.0
  GeometryHeight      = 10.0
  GeometryIsSmall     = No      
  Shadow              = SHADOW_VOLUME
  ShadowSizeX = 89  ; minimum elevation angle above horizon. Used to limit shadow length

End





